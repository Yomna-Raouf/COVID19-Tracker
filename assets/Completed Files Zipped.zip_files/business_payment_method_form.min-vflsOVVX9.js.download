define(["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/payments/validation","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_frame","modules/clean/react/payments/checkout/components/payment_method_form/direct_debit_form","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/checkout/components/inputs/labeled_text_input","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/checkout/components/payment_method_form/payment_method_selector","modules/clean/react/payments/checkout/components/payment_method_form/address_form","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_purchase_full_name"],(function(e,t,a,r,o,s,n,i,p,l,m,d,u,c,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r);var h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCpfChange=function(e){t.props.actions.updateCpf(e.value)},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHistory()},t.prototype.prepareForSubmission=function(){var e=this.props.formData.paymentMethod;return this.props.paymentIsDown||e.formattedValue!==d.PaymentMethod.CreditCard?Promise.resolve(!0):this.creditCardFrame.tokenize()},t.prototype.getCreditCardFrame=function(){return this.creditCardFrame},t.prototype.onVatChange=function(e){this.props.actions.updateVat(e.value||this.props.vat||"")},t.prototype.vatErrorString=function(){var e=this.props.formData.vat;return!l.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"iRjYtd",defaultMessage:"Please enter a valid VAT number (ex: {examples})."},{examples:n.getVatExamples(this.props.formData.countryCode.formattedValue).join(", ")}):""},t.prototype.cpfErrorString=function(){var e=this.props.formData.cpf;return!l.FormValueHelper.isValid(e)&&e.showError?s.intl.formatMessage({id:"MQDRWx",defaultMessage:"Please enter a valid CPF number."}):""},t.prototype.renderLocationFields=function(){var e=this.props,t=e.paymentSpec,a=e.formData,i=null;if(t.should_show_vat_for_country(a.countryCode.formattedValue)){var p=n.getVatPrefix(a.countryCode.formattedValue),d=r.default({"billing-vat":!0,grid__item:!0,"grid__item--medium--1-2":Boolean(!this.props.isTeam)}),u=r.default({"billing-vat-input":!0,"billing-vat-input--valid":""!==a.vat.formattedValue&&l.FormValueHelper.isValid(a.vat)});i=o.default.createElement(m.BizLabeledTextInput,{className:d,inputClassName:u,name:"vat",labelText:s.intl.formatMessage({id:"eZAuK1",defaultMessage:"VAT number (optional)"}),errorText:this.vatErrorString(),placeholder:p,onChange:this.onVatChange.bind(this)})}var f=null;if(t.should_require_cpf(a.countryCode.formattedValue,a.paymentMethod.formattedValue)){var h=r.default({"billing-cpf":!0,grid__item:!0}),y=r.default({"payment-info__cpf-input":!0,"payment-info__cpf-input--valid":""!==a.cpf.formattedValue&&l.FormValueHelper.isValid(a.cpf)});f=o.default.createElement("div",{className:"grid__item"},o.default.createElement(m.BizLabeledTextInput,{className:h,inputClassName:y,name:"cpf",labelText:s.intl.formatMessage({id:"Z1BdZ2",defaultMessage:"CPF/CNPJ"}),errorText:this.cpfErrorString(),errorHTML:a.cpf.serverError,value:a.cpf.rawValue,onChange:this.onCpfChange}))}var _=null,g=s.intl.formatMessage({id:"8vkOAo",defaultMessage:"Please note: changing your billing location could impact your applicable tax rate."});return t.should_show_vat_for_country(a.countryCode.formattedValue)&&(g=s.intl.formatMessage({id:"RCr4JC",defaultMessage:"Please note: changing your billing location or VAT number could impact your applicable tax rate."})),this.props.isTeam||(_=o.default.createElement("div",{className:"disclaimer-message"},g)),o.default.createElement("div",{className:"location-info-fields grid__item grid--x-bookend"},o.default.createElement(c.AddressForms,{paymentSpec:this.props.paymentSpec,formData:this.props.formData,actions:this.props.actions,countryList:this.props.countryList,psd2AddressFields:this.props.psd2AddressFields,businessStyling:!0}),i,f,_)},t.prototype.render=function(){var e=this,t=this.props,s=t.paymentSpec,n=t.actions,l=t.formData,m=this.renderLocationFields(),c=m;l.paymentMethod.formattedValue===d.PaymentMethod.DirectDeposit&&(c=o.default.createElement(p.DirectDebitForm,{locationFields:m,formData:l,actions:n}));var h=r.default({grid__item:!0,"payment-form":!0,"payment-form--responsive":this.props.isResponsive});return o.default.createElement("div",{className:h},o.default.createElement(u.PaymentMethodSelector,{isTeam:this.props.isTeam,paymentSpec:s,paymentMethod:l.paymentMethod.rawValue,updatePaymentMethod:this.props.actions.updatePaymentMethod,countryCode:l.countryCode.rawValue,zipCode:l.zipCode.rawValue}),this.props.subPaymentMethodHeader,o.default.createElement(f.CreditCardPurchaseFullNameIfPsd2,a.__assign({},this.props,{businessStyling:!0})),o.default.createElement(i.CreditCardFrame,{getHeightFromIframe:!0,iframeUrl:this.props.iframeUrl,isResponsive:this.props.isResponsive,hidden:l.paymentMethod.formattedValue!==d.PaymentMethod.CreditCard,actions:this.props.actions,ref:function(t){e.creditCardFrame=t},nonce:l.nonce,bin:l.bin,submitForm:this.props.submitForm}),c)},t.defaultProps={isResponsive:!1},t})((o=a.__importDefault(o)).default.Component);t.BusinessPaymentMethodForm=h}));
//# sourceMappingURL=business_payment_method_form.min.js-vflfUYTWJ.map