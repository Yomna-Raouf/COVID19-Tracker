define(["require","exports","tslib","react","modules/clean/browse_interface","modules/clean/cloud_docs/constants","modules/clean/em_string","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/app_actions/app_actions_menu","modules/clean/react/async_file_modal_controller","modules/clean/react/badge","modules/clean/react/browse/actions","modules/clean/react/browse/client_download_modal","modules/clean/react/browse/constants","modules/clean/react/browse/data/folder_overview_selectors","modules/clean/react/browse/file_actions/actions/copy","modules/clean/react/browse/file_actions/actions/move","modules/clean/react/browse/file_actions/actions/share","modules/clean/react/browse/file_actions/file_action_helpers","modules/clean/react/browse/models","modules/clean/react/delorean/rewinds_upsell_util","modules/clean/react/extensions/data/types","modules/clean/react/file_lock/api","modules/clean/react/file_transfers/async/browse_entry_point_onboarding_modal_async","modules/clean/react/file_transfers/lib/api","modules/clean/react/file_transfers/lib/urls","modules/clean/react/file_transfers/lib/utils","modules/clean/react/files_view/types","modules/clean/react/folder_overview/async_components","modules/clean/react/folder_overview/data/action_creators","modules/clean/react/folder_overview/data/store","modules/clean/react/folder_overview/utils","modules/clean/react/retrieval_success_banner/util","modules/clean/react/snackbar","modules/clean/react/starred/browse_exports","modules/clean/search/types","modules/clean/sharing/browse_exports","modules/clean/sharing/constants","modules/clean/sharing/gating_util","modules/clean/unity/check_file_cache","modules/clean/unity/features","modules/clean/viewer","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],(function(e,s,r,n,o,i,t,a,l,c,d,u,f,h,p,m,w,g,_,v,S,F,y,E,b,A,M,T,O,R,N,L,U,I,k,D,B,P,C,x,V,W,q,H,z,G){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),n=r.__importDefault(n),a=r.__importStar(a),d=r.__importStar(d),m=r.__importStar(m),E=r.__importStar(E),N=r.__importStar(N),V=r.__importDefault(V),z=r.__importStar(z);var Q={showTiburonShare:!1,showCopyPublicFolderFileLink:!1,showOpen:!1,showOpenWith:!1,showDownload:!1,showComment:!1,showDelete:!1,showArchive:!1,showRemove:!1,showRename:!1,showRenameTeamFolder:!1,showMove:!1,showCopy:!1,showVersions:!1,showRewindFolder:!1,showRestore:!1,showReadd:!1,showPermanentDelete:!1,showRemoveAccess:!1,showShowInFolder:!1,showStar:!1,showUnstar:!1,showLoadingStar:!1,showSharedFolderEvents:!1,showCalculateFolderSize:!1,showManageAsAdmin:!1,showRequestFiles:!1,showAddToTransfer:!1,showAddFolderToTransfer:!1,showPin:!1,showPinTo:!1,showUnpin:!1,showSplitShare:!1,showFileLock:!1,showFileUnlock:!1,showFileRequestUnlock:!1};function J(e){return e.isDeleted||e.is_unmounted}function K(e){var s=e.context,n=e.files,o=e.user,t=e.viewType,c=e.sharingServiceInfo,d=e.extensionsFeatureFlags,u=e.canDisplayFolderSizes,f=void 0!==u&&u,h=e.isSearchMode,p=void 0!==h&&h,m=e.isQueryingFolderSizes,w=e.showAddToTransfer,g=e.showAddFolderToTransfer,_=e.expFolderHistoryRollbacks,v=void 0!==_&&_,y=e.pinnedItems,E=e.expShowFileLocking,b=void 0!==E&&E,A=e.expVaultEnableViewOnlySharing,M=void 0!==A&&A,T=r.__assign({},Q);if(s.isInsideArchivedTeamFolder)return T.showDownload=!0,T;var R=n.every((function(e){return!J(e)})),N=!R&&n.every((function(e){return J(e)}));return R?(function(e){var s,r=e.actions,n=e.context,o=e.files,t=e.user,c=e.viewType,d=e.canDisplayFolderSizes,u=void 0!==d&&d,f=e.isQueryingFolderSizes,h=void 0!==f&&f,p=e.isSearchMode,m=void 0!==p&&p,w=e.showAddToTransfer,g=void 0!==w&&w,_=e.showAddFolderToTransfer,v=void 0!==_&&_,y=e.expFolderHistoryRollbacks,E=void 0!==y&&y,b=e.pinnedItems,A=e.expShowFileLocking,M=void 0!==A&&A,T=e.expVaultEnableViewOnlySharing,R=void 0!==T&&T,N=o.first(),L=1===o.count(),U=L&&!N.is_dir,I=L&&N.is_dir,k=o.every((function(e){return e.type===l.FileTypes.FILE})),B=o.some((function(e){return e.type===l.FileTypes.TEAM_SHARED_FOLDER})),C=o.some((function(e){return e.type===l.FileTypes.TEAM_MEMBER_FOLDER})),H=o.some((function(e){return e.type===l.FileTypes.SANDBOX})),z=o.some((function(e){return e instanceof S.FileSharedWithMe})),G=o.some((function(e){return e.is_cloud_doc})),Q=o.some((function(e){return e.is_cloud_doc&&e instanceof S.FileSharedWithMe})),J=o.some((function(e){return e.type===l.FileTypes.VAULT_FOLDER})),K=!1;z||B||C||(r.showCopy=!0,r.showDelete=!0,r.showMove=!0,r.showRename=L);!z&&B&&I&&t&&x.GoldenGate.hasContentManagerAndSuperAdmin(t.id)&&(r.showRenameTeamFolder=!0,r.showArchive=!0);!z&&!q.Viewer.get_viewer().is_assume_user_session&&t&&x.GoldenGate.hasContentManagerAndSuperAdmin(t.id)&&x.GoldenGate.hasNewOwnershipModel(t.id)&&n.isInsideTeamFolderTree&&(r.showManageAsAdmin=!0);if(L){var Y=o.first();s=P.shouldUsePublicFolderSharing(n.config,Y.fq_path),z||n.isInsideVaultFolder&&!R||s||C||H||(r.showTiburonShare=!0),(K=!z&&W.UnityFeatures.isUnitySupported()&&null!=V.default&&V.default.is_cached_and_locally_available(Y.ns_id,Y.ns_path))&&!n.isInsideVaultFolder&&(r.showOpen=!0),z||n.isInsideVaultFolder||(r.showOpenWith=!0),z||n.isInsideVaultFolder&&!R||(r.showSplitShare=!0)}!z&&I&&(E||F.shouldShowRewindsUpsell(t))&&(r.showRewindFolder=!0);r.showShowInFolder=!z&&m&&(function(e){var s=e.toArray().map((function(e){return e.fq_path}));return a.inSameDirectory(s)})(o),U&&(r.showComment=!N.is_cloud_doc,r.showVersions=!(z||N.is_cloud_doc&&i.isPointerByExtension(N.ns_path)),n.isInFolderMode?r.showCopyPublicFolderFileLink=!!s:r.showCopyPublicFolderFileLink=!1);if(U)if(N.is_locked)N.is_lockholder?r.showFileUnlock=!0:r.showFileRequestUnlock=!0;else if(M){var X=N.ns_id!==t.home_ns_id,j=N.read_only||N.is_symlink||!X;r.showFileLock=!j}K||(r.showDownload=U?!G:!z&&!Q&&(n.isInFolderMode||m));if(r.showAddToTransfer=g&&!G&&(k||v)&&!o.some(S.File.isNoAccessSharedFolder),r.showRequestFiles=I&&n.isCurrentPathWriteable()&&!n.isInsideVaultFolder&&!S.File.isReadOnlySharedFolder(N),!z&&L){var Z=o.first().type;Z!==l.FileTypes.SHARED_FOLDER&&Z!==l.FileTypes.TEAM_SHARED_FOLDER||(r.showSharedFolderEvents=!0),I&&null==o.first().fetchFolderSizesStatus&&!h&&!m&&c!==O.ViewType.Grid&&u&&(r.showCalculateFolderSize=!0)}if(!z){var $=o.every((function(e){return null==e.fetchFolderSizesStatus})),ee=o.every((function(e){return e.is_dir})),se=o.some((function(e){return!S.File.canViewFileMembers(e,n)}));$&&ee&&!se&&!h&&!m&&c!==O.ViewType.Grid&&u&&(r.showCalculateFolderSize=!0)}if(!z&&!n.isInsideVaultFolder&&L){var re={id:o.first().file_id,type:D.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID},ne=D.StarredStore.getIsLoading(re),oe=D.StarredStore.getIsStarred(re);r.showStar=!1===oe,r.showUnstar=!0===oe,r.showLoadingStar=ne}if(!z&&void 0!==b&&!m){var ie=o.toArray().filter((function(e){return b.some((function(s){return s.fq_path===e.fq_path||s.file_id===e.file_id}))})).length;n.isCurrentPathWriteable()&&(r.showUnpin=ie===o.size,r.showPin=!n.isInsideVaultFolder&&ie<o.size),r.showPinTo=!n.isInsideVaultFolder&&a.normalize(n.currentFQPath).split("/").length>1}J&&(r.showCopy=!1,r.showDelete=!1,r.showMove=!1,r.showRename=!1,r.showTiburonShare=!1,r.showRequestFiles=!1);return r})({actions:T,canDisplayFolderSizes:f,expFolderHistoryRollbacks:v,context:s,files:n,sharingServiceInfo:c,extensionsFeatureFlags:d,isQueryingFolderSizes:m,isSearchMode:p,user:o,viewType:t,showAddToTransfer:w,showAddFolderToTransfer:g,pinnedItems:y,expShowFileLocking:b,expVaultEnableViewOnlySharing:M}):N?(function(e){var s,r=e.actions,n=e.files,o=e.context,i=e.user,t=n.first();if(n.some((function(e){return e.is_unmounted||e.ns_id!==t.ns_id})))return r;1===n.count()&&t.is_dir&&o.inactiveNSIDByFQPath[t.fq_path.toLowerCase()]&&!o.isInsideTeamFolderTree?r.showReadd=!0:r.showRestore=!0;if(o.isInFolderMode)s=o.permanentDeletionDisabledStateByNSID[o.currentNSID];else{var a=n.map((function(e){return e.ns_id}));s=a.some((function(e){return o.permanentDeletionDisabledStateByNSID[e]}))}!q.Viewer.get_viewer().is_assume_user_session&&i&&x.GoldenGate.hasContentManagerAndSuperAdmin(i.id)&&x.GoldenGate.hasNewOwnershipModel(i.id)&&o.isInsideTeamFolderTree&&(r.showManageAsAdmin=!0);s||(r.showPermanentDelete=!0);o.isInsideVaultFolder&&(r.showRequestFiles=!1);return r})({actions:T,files:n,context:s,user:o}):T}var Y=function(e){var s=e.user,r=e.files,n=e.firstFile,i=r.map((function(e){return e.fq_path})).toArray();return function(){var r=i.map((function(e){return a.filename(e)})),t=a.parent_dir(i[0]),l=o.browse_uri_for_fq_path(s,t);r.length>1?l.updateQuery({select_multi:JSON.stringify(r)}):l.updateQuery({select:r[0]}),v.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.SHOW_IN_FOLDER}),window.open(l.toString(),"_blank")}},X=function(e){return function(){var s=e.isSidebar?H.ActionSurfaceLogValue.RIGHT_SIDEBAR:H.ActionSurfaceLogValue.CENTER_PANE;v.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.OPEN_EXTENSIONS,action_surface:s})}},j=function(e){return function(s){var r=e.isSidebar?H.ActionSurfaceLogValue.RIGHT_SIDEBAR:H.ActionSurfaceLogValue.CENTER_PANE;v.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.EXTENSIONS_SELECTED,action_surface:r,extra:{extensions_option:s||"unknown"}})}},Z=function(e){return function(){var s=e.user,r=e.firstFile;v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.OPEN_DESKTOP}),W.UnityFeatures.open_file(r.ns_id,r.ns_path,s.id,W.UnityFeatures.standard_open_file_handler,(function(){return W.UnityFeatures.standard_open_file_handler(!1)}))}},$=function(e){var s=e.canShowUJPopup,r=e.args;return function(){var e=r.user,n=r.context,o=r.files,i=r.firstFile,t=r.isSearchMode,a=r.useSearchSuccessBanner,l=r.expBrowseSuccessBanner;v.logUserEventOnFile({result:i,args:r,action_type:H.WebUserActionLogEvent.DOWNLOAD}),v.showRetrievalSuccessBanner(a,t,l,H.WebUserActionLogEvent.DOWNLOAD),f.browseActions.downloadFiles({files:o,context:n,user:e}),s&&h.maybeShowClientDownloadModal(!0)}},ee=function(e){return function(){var s=e.firstFile,r=e.isSearchMode,n=e.useSearchSuccessBanner,o=e.expBrowseSuccessBanner;v.logUserEventOnFile({result:s,args:e,action_type:H.WebUserActionLogEvent.ADD_COMMENT}),ge(n,r,o,H.WebUserActionLogEvent.ADD_COMMENT),e.actionHandlers.onShowComment(s)}},se=function(e){var s=e.isStarred,r=e.args;return function(){var e=r.user,n=r.firstFile,o=r.isSearchMode,i=r.useSearchSuccessBanner,t=r.expBrowseSuccessBanner;v.logUserEventOnFile({result:n,args:r,action_type:s?H.WebUserActionLogEvent.STAR:H.WebUserActionLogEvent.REMOVE_STAR}),v.showRetrievalSuccessBanner(i,o,t,H.WebUserActionLogEvent.STAR),D.StarredActions.update(e.role,n.file_id,D.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID,s)}},re=function(e){return function(){var s=e.actionHandlers,r=e.firstFile,n=e.isSearchMode,o=e.useSearchSuccessBanner,i=e.expBrowseSuccessBanner;v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.RENAME}),v.showRetrievalSuccessBanner(o,n,i,H.WebUserActionLogEvent.RENAME),s.onShowRename(r)}},ne=function(e){return function(){var s=e.files,r=e.firstFile;v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.RENAME}),d.showContentManagerBridge(s.toArray(),"rename",q.Viewer.get_viewer().team_is_limited)}},oe=function(e){return function(){var s=e.files,r=e.firstFile;v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.ARCHIVE}),d.showContentManagerBridge(s.toArray(),"archive",q.Viewer.get_viewer().team_is_limited)}},ie=function(e){var s=e.args;return function(){var e=s.actionHandlers,r=s.files,n=s.firstFile,o=s.isSearchMode,i=s.useSearchSuccessBanner,t=s.expBrowseSuccessBanner,a=r.toArray();v.logUserEventOnFile({result:n,args:s,action_type:H.WebUserActionLogEvent.RESTORE}),v.showRetrievalSuccessBanner(i,o,t,H.WebUserActionLogEvent.RESTORE),e.onRestore(a)}},te=function(e){return function(){var s=o.browse_uri_for_fq_path(e.user,e.firstFile.fq_path);s.setQuery({rewind:"true"}),z.replace_location(s.toString())}},ae=function(e){return function(){var s=e.user,r=e.context,n=e.firstFile.fq_path.toLowerCase(),o=r.inactiveNSIDByFQPath[n];o&&P.asyncMountSharedFolder(o,s.role,C.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,!1,null,!0)}},le=function(e){return function(){var s=e.user,r=e.firstFile,n=e.isSearchMode,i=e.useSearchSuccessBanner,t=e.expBrowseSuccessBanner;v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.VERSIONS}),ge(i,n,t,H.WebUserActionLogEvent.VERSIONS);var a=o.getFileHistoryUrl({fqPath:r.fq_path,userId:s.id});z.redirect(a)}},ce=function(e){return function(){var s=e.actionHandlers,r=e.firstFile,n=e.files,o=e.isSearchMode,i=e.useSearchSuccessBanner,t=e.expBrowseSuccessBanner;v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.DELETE}),v.showRetrievalSuccessBanner(i,o,t,H.WebUserActionLogEvent.DELETE),s.onDelete(n.toArray())}},de=function(e){return function(){var s=e.actionHandlers,r=e.files,n=e.firstFile,o=e.isSearchMode,i=e.useSearchSuccessBanner,t=e.expBrowseSuccessBanner;v.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.PERMANENT_DELETE}),v.showRetrievalSuccessBanner(i,o,t,H.WebUserActionLogEvent.PERMANENT_DELETE),s.onPermanentDelete(r.toArray())}},ue=function(e){return function(){var s=e.firstFile;v.logUserEventOnFile({result:s,args:e,action_type:H.WebUserActionLogEvent.EVENTS}),z.redirect("/events?ns="+s.target_ns)}},fe=function(e){return function(){var s=e.firstFile,r=e.files;v.logUserEventOnFile({result:s,args:e,action_type:H.WebUserActionLogEvent.CALCULATE_SIZE}),f.browseActions.fetchMultipleFolderSizes({files:r})}},he=function(s){return function(){(function(s){r.__awaiter(this,void 0,Promise,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(s,r){e(["modules/clean/sharing/content_manager"],s,r)})).then(r.__importStar)];case 1:return(0,n.sent().goToContentManagerForPath)(s),[2]}}))}))})({containingFolder:s.context.currentFQPath})}},pe=function(e){return function(){var s=e.files,r=e.firstFile,n=L.getStoreForFolderOverview();n.dispatch(N.addContentReferences({folderFileId:m.folderOverviewFolderFileId(n.getState()),fileIds:s.toArray().map(U.fileToContentReferenceId),componentNamespace:p.BrowseFolderOverviewComponentNamespace})),v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.FOLDER_OVERVIEW_PIN})}},me=function(e){return function(){var s=e.files,r=e.firstFile,n=e.user,o=e.context;R.asyncShowPinToModal({user:n,path:o.currentFQPath,files:s.toArray(),onFolderSelected:function(n){L.getStoreForFolderOverview().dispatch(N.addContentReferencesForPath({files:s.toArray(),path:n})),v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.FOLDER_OVERVIEW_PIN})},isCurrentPathReadOnly:!o.isCurrentPathWriteable()})}},we=function(e){return function(){var s=e.files,r=e.firstFile,n=L.getStoreForFolderOverview();n.dispatch(N.removeContentReferences({folderFileId:m.folderOverviewFolderFileId(n.getState()),fileIds:s.toArray().map(U.fileToContentReferenceId),componentNamespace:p.BrowseFolderOverviewComponentNamespace})),v.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.FOLDER_OVERVIEW_UNPIN})}},ge=function(e,s,r,n){e&&s&&I.setSearchSuccessBannerVisible(),r!==B.BrowseSuccessBannerVariants.V2||s||I.setBrowseSuccessBannerVisible(n)},_e=function(e){return function(){b.asyncShowBrowseEntryPointOnboardingModal({primaryActionOnClick:function(){var s=e.user.id,r=e.files.map((function(e){return{file_id:e.file_id,destination_path:a.filename(e.ns_path)}})).toArray();k.Snackbar.sync(G.intl.formatMessage({id:"EmOY+w",defaultMessage:"Creating new transfer..."}),!1,"create-transfer"),A.createTransfer(s,T.generateTransferTrackingId()).then((function(e){if(!e.transfer)return Promise.reject();var n=e.transfer.transfer_id;return A.addFilesById(s,n,r).then((function(){k.Snackbar.close("create-transfer"),z.redirect(M.editTransferUrl(n,{referrer:"browse",logCreateTransferEvent:!0}))}))})).catch((function(){k.Snackbar.fail(G.intl.formatMessage({id:"ElDiXe",defaultMessage:"Unable to create transfer"}),"create-transfer")}))},userId:e.user.id})}};function ve(e){return function(){var s=e.firstFile,r=s.ns_id,n=s.ns_path;z.redirect("/requests?ns_id="+r+"&path="+n+"&referrer=web_browse_file_action")}}var Se=function(e){return function(){E.showFileLockConfirmModal(e.user.id,e.firstFile),v.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.LOCK_FILE})}},Fe=function(e){return function(){E.asyncUnlockFile(e.user.id,[e.firstFile]),v.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.UNLOCK_FILE})}},ye=function(e){return function(){E.showRequestUnlockConfirmModal(e.user.id,e.firstFile),v.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.REQUEST_UNLOCK_FILE})}};s.getActionsForFileCollection=function(e){var s,r=e.files,o=e.context,i=e.user,l=e.responsive,d=e.sharingServiceInfo,f=e.extensionsFeatureFlags,h=e.canDisplayFolderSizes,p=void 0!==h&&h,m=e.actionHandlers,v=e.skipSharing,F=void 0!==v&&v,E=e.source,b=e.viewType,A=e.isOverFreeQuota,M=void 0!==A&&A,T=e.hasExcludedNsIds,O=void 0!==T&&T,R=e.isSearchMode,N=void 0!==R&&R,L=e.isQueryingFolderSizes,U=void 0!==L&&L,I=e.canShowUJPopup,k=void 0!==I&&I,D=e.isSidebar,C=void 0!==D&&D,x=e.showAddToTransfer,V=void 0!==x&&x,W=e.showAddFolderToTransfer,q=void 0!==W&&W,H=e.useSearchSuccessBanner,z=void 0!==H&&H,Q=e.expBrowseSuccessBanner,J=void 0===Q?B.BrowseSuccessBannerVariants.OFF:Q,ge=e.expListSubfoldersWithOdyssey,Ee=void 0!==ge&&ge,be=e.pinnedItems,Ae=e.expFolderHistoryRollbacks,Me=void 0!==Ae&&Ae,Te=e.expShowFileLocking,Oe=void 0!==Te&&Te,Re=e.forceSplitShareSecondary,Ne=void 0!==Re&&Re,Le=e.shouldUsePortalPopover,Ue=void 0===Le||Le,Ie=e.scrollableSidebarRef,ke=e.expVaultEnableViewOnlySharing,De=void 0!==ke&&ke,Be=r.first(),Pe=!o.isCurrentPathWriteable()||r.some((function(e){return e.read_only})),Ce=Pe,xe=Pe,Ve=Pe,We=Pe,qe=r.some((function(e){return!S.File.canViewFileMembers(e,o)})),He=qe,ze=qe,Ge=r.every(S.File.isNoAccessSharedFolder),Qe=Ge,Je=Ge,Ke=Ge,Ye=r.some(S.File.isNoAccessSharedFolder),Xe=!l.isMatchedMedium&&!l.isMatchedLarge,je=K({files:r,context:o,user:i,viewType:b,sharingServiceInfo:d,extensionsFeatureFlags:f,canDisplayFolderSizes:p,isQueryingFolderSizes:U,isSearchMode:N,showAddToTransfer:V,showAddFolderToTransfer:q,expFolderHistoryRollbacks:Me,pinnedItems:be,expShowFileLocking:Oe,expVaultEnableViewOnlySharing:De}),Ze=new Array,$e=null===J?B.BrowseSuccessBannerVariants.OFF:J,es={user:i,context:o,actionHandlers:m,files:r,firstFile:Be,isSearchMode:N,source:E,viewType:b,useSearchSuccessBanner:z,expBrowseSuccessBanner:$e,isSidebar:C,expListSubfoldersWithOdyssey:Ee};return!F&&je.showTiburonShare&&Ze.push(_.getShareItem(es,{showSplitShare:je.showSplitShare,user:i,firstFile:Be,isViewSmall:Xe,shareItemDisabled:He,forceSplitShareSecondary:Ne,extensionsFeatureFlags:f,sharingServiceInfo:d,scrollableSidebarRef:Ie,shouldUsePortalPopover:Ue,isSidebar:C,isSearchMode:N})),je.showCopyPublicFolderFileLink&&Ze.push({label:G.intl.formatMessage({id:"oGsGbO",defaultMessage:"Copy public link"}),iconName:"link",className:"action-world-link",performAction:(s=es,function(){var e=s.user,r=s.context,n=s.firstFile;if(r.config&&n&&n.fq_path){var o=P.makePublicFolderLink(e.id,r.config,n.fq_path,n.is_dir);o&&P.showPublicFolderLinkModal(o)}}),key:"copy-public-link"}),je.showOpen&&Ze.push({label:G.intl.formatMessage({id:"z5t3Bh",defaultMessage:"Open"}),performAction:Z(es),iconName:"open-in-app",className:"action-open-in-app",key:"open"}),je.showShowInFolder&&Ze.push({label:G.intl.formatMessage({id:"CkyxPA",defaultMessage:"Show in folder"}),performAction:Y(es),iconName:"open-in-app",className:"action-show-in-folder",key:"show-in-folder"}),je.showDownload&&Ze.push({label:G.intl.formatMessage({id:"pHnJw0",defaultMessage:"Download"}),performAction:$({canShowUJPopup:k,args:es}),disabled:Qe,iconName:"download",className:"action-download",key:"download"}),je.showOpenWith&&Ze.push((function(){return n.default.createElement(c.ExtensionsMenu,{user:i,file:Be,triggerType:y.TriggerType.SecondaryButton,telemetryContext:{surface:"sidebar"},key:"extensions-"+Be.fq_path,onDropdownOpen:X(es),onExtensionClick:j(es),scrollableSidebarRef:Ie,shouldUsePortalPopover:Ue})})),je.showAddToTransfer&&Ze.push({label:G.intl.formatMessage({id:"2L/lmG",defaultMessage:"Send with Transfer"}),performAction:_e(es),iconName:"send-with-transfer"}),je.showRequestFiles&&Ze.push({label:G.intl.formatMessage({id:"QeqSyk",defaultMessage:"Request files"}),performAction:ve(es),iconName:"new-file-request"}),je.showComment&&Ze.push({label:G.intl.formatMessage({id:"fTdk5C",defaultMessage:"Add comment"}),performAction:ee(es),iconName:"add-comment",className:"action-add-comment",key:"add-comment"}),je.showStar?Ze.push({label:G.intl.formatMessage({id:"bsE+LR",defaultMessage:"Star"}),ariaLabel:G.intl.formatMessage({id:"SkEAyw",defaultMessage:"Add to Starred"}),ariaPressed:!1,performAction:se({isStarred:!0,args:es}),iconName:"star",className:"action-star",key:"star"}):je.showUnstar&&Ze.push({label:G.intl.formatMessage({id:"tZn8tS",defaultMessage:"Unstar"}),ariaLabel:G.intl.formatMessage({id:"SkEAyw",defaultMessage:"Add to Starred"}),ariaPressed:!0,performAction:se({isStarred:!1,args:es}),iconName:"unstar",className:"action-unstar",key:"star"}),je.showFileLock&&Ze.push({label:G.intl.formatMessage({id:"lHdaP6",defaultMessage:"Lock editing"}),performAction:Se(es),key:"file-lock",iconName:"permissions",badge:{variant:u.BadgeVariant.BETA,color:u.BadgeColor.PINK}}),je.showFileUnlock&&Ze.push({label:G.intl.formatMessage({id:"8e6dNr",defaultMessage:"Unlock editing"}),performAction:Fe(es),key:"file-lock",iconName:"permissions",badge:{variant:u.BadgeVariant.BETA,color:u.BadgeColor.PINK}}),je.showFileRequestUnlock&&Ze.push({label:G.intl.formatMessage({id:"PMI4xl",defaultMessage:"Ask to unlock"}),performAction:ye(es),key:"file-lock",iconName:"permissions",badge:{variant:u.BadgeVariant.BETA,color:u.BadgeColor.PINK}}),je.showVersions&&(void 0===es.firstFile.is_versionable||es.firstFile.is_versionable)&&Ze.push({label:G.intl.formatMessage({id:"kfhlgf",defaultMessage:"Version history"}),performAction:le(es),iconName:"view-version-history",className:"action-view-version-history",key:"version-history"}),je.showRewindFolder&&Ze.push({label:G.intl.formatMessage({id:"97aiU1",defaultMessage:"Rewind"}),performAction:te(es),iconName:"revert-folder",className:"action-revert-folder",key:"rewind"}),je.showRename&&Ze.push({label:G.intl.formatMessage({id:"0/TLiY",defaultMessage:"Rename"}),performAction:re(es),iconName:"rename",className:"action-rename",disabled:xe,key:"rename"}),je.showRenameTeamFolder&&Ze.push({label:G.intl.formatMessage({id:"0/TLiY",defaultMessage:"Rename"}),performAction:ne(es),iconName:"rename",className:"action-rename",key:"rename-team-folder"}),je.showArchive&&Ze.push({label:G.intl.formatMessage({id:"JiHG/V",defaultMessage:"Archive"}),performAction:oe(es),iconName:"delete",className:"action-delete",key:"archive"}),je.showMove&&Ze.push(g.getMoveItem(es,{isOverFreeQuota:M,hasExcludedNsIds:O,moveItemDisabled:Ve})),je.showCopy&&Ze.push(w.getCopyItem(es,{isOverFreeQuota:M,hasExcludedNsIds:O,copyItemDisabled:Je})),je.showDelete&&Ze.push({label:G.intl.formatMessage({id:"9v2+SN",defaultMessage:"Delete"}),performAction:ce(es),disabled:Ce,iconName:"delete",className:"action-delete",key:"delete"}),je.showRestore&&Ze.push({label:G.intl.formatMessage({id:"PL5ta5",defaultMessage:"Restore"}),className:"action-restore",performAction:ie({args:es}),disabled:We,key:"restore"}),je.showReadd&&Ze.push({label:G.intl.formatMessage({id:"1YhtdU",defaultMessage:"Re-add shared folder"}),className:"action-re-add",performAction:ae(es),disabled:We,key:"re-add-shared-folder"}),je.showPermanentDelete&&Ze.push({label:G.intl.formatMessage({id:"LuofqH",defaultMessage:"Permanently delete"}),iconName:"delete",className:"action-permanently-delete",performAction:de(es),key:"permanently-delete"}),je.showSharedFolderEvents&&Ze.push({label:G.intl.formatMessage({id:"xUl7yl",defaultMessage:"Events"}),performAction:ue(es),disabled:ze,iconName:"events",className:"action-events",key:"events"}),je.showCalculateFolderSize&&Ze.push({label:G.intl.formatMessage({id:"AB3iuT",defaultMessage:"Calculate size"}),performAction:fe(es),disabled:Ke,iconName:"calculate",className:"action-calculate-folder-size",key:"calculate-size"}),je.showManageAsAdmin&&Ze.push({label:G.intl.formatMessage({id:"SrWnn5",defaultMessage:"View in admin console"}),performAction:he(es),iconName:"settings-gear",key:"view-in-admin-console"}),je.showPin&&Ze.push({label:G.intl.formatMessage({id:"/qxon/",defaultMessage:"Pin to {path}"},{path:t.Emstring.em_snippet(a.filename(o.currentFQPath),8,1)}),performAction:pe(es),iconName:"pin",disabled:Ye,key:"pin-to"}),je.showUnpin&&Ze.push({label:G.intl.formatMessage({id:"LrpqA7",defaultMessage:"Unpin"}),performAction:we(es),iconName:"pin",disabled:Ye,key:"unpin"}),je.showPinTo&&Ze.push({label:G.intl.formatMessage({id:"O8ncIV",defaultMessage:"Pin to..."}),performAction:me(es),iconName:"pin",disabled:Ye,key:"pin-to-path"}),Ze}}));
//# sourceMappingURL=file_actions.min.js-vfl0XTCFm.map