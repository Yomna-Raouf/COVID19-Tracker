define(["require","exports","tslib","react","react-intl","spectrum/modal","dig-components/typography","modules/core/browser_detection","modules/core/i18n","modules/clean/analytics","modules/clean/static_urls","modules/clean/ux_analytics_modal_tracking","modules/constants/page_load","modules/clean/react/image","modules/clean/teams/constants","modules/clean/teams/modals/team_admin_roles_modal","modules/clean/teams/admin/widgets/admin_permissions_modal/admin_permissions_modal","modules/clean/teams/admin/widgets/invite_modal/invite_modal_member_row","modules/clean/teams/admin/widgets/invite_modal/invite_modal_sidebar","modules/clean/react/growth/first_task/first_task","modules/clean/react/admin/teams/onboarding/web/constants","modules/clean/react/admin/teams/onboarding/web/components/invite_link_button","modules/clean/react/member_sidebar_actions","modules/clean/growth/smb_funnel/smb_funnel_logger"],(function(e,a,t,s,n,i,l,o,m,r,d,c,_,u,g,f,b,v,p,E,M,I,N,A){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),s=t.__importDefault(s),o=t.__importStar(o);var w=m.intl.formatMessage({id:"CfiPnG",defaultMessage:"Member"}),C=m.intl.formatMessage({id:"Tnr+vP",defaultMessage:"Admin"});function h(e){return null!=e&&e!==g.ADMIN_ROLE.NONE}function S(e,a){void 0===a&&(a={}),r.TeamsWebActionsLogger.log(e,t.__assign({module_name:"first_task_imm",mobile_web:o.is_supported_mobile_browser()},a))}var L=function(e){var a=e.baseClass,n=e.currentUserId,i=e.tieredAdmin,l=e.memberList,o=e.memberActionsData,c=e.loggingExtras,_=e.handleOnClose,p=e.growthActSmbMWInvitesActive,E=e.teamId,M=e.teamName,I=["option-member","option-admin"],A=I[0],S=I[1],L={enabled:!0,id:"role-dropdown",options:[{apiId:A,label:w,tooltip:m.intl.formatMessage({id:"FUI8ZQ",defaultMessage:"Can view, edit, delete, comment on, and save files"})},{apiId:S,label:C,tooltip:m.intl.formatMessage({id:"/bSK06",defaultMessage:"Member, but can invite and manage team members"})}]};return s.default.createElement("div",{className:a+"__members"},s.default.createElement("div",{className:a+"__members-header"},s.default.createElement(u.Image,{src:d.static_url("/static/images/growth/team-vflxkrqB-.svg"),className:a+"__members-image"}),m.intl.formatMessage({id:"LPLhLV",defaultMessage:"Members of {team}"},{team:M})),l.map((function(e,a){var l=o&&o[e.user_id],u=h(e.admin_role)?S:A,M=(function(e,a){return void 0===a&&(a=!1),e?h(e.admin_role)?a&&g.ADMIN_ROLE_NAMES[e.admin_role]||C:w:m.intl.formatMessage({id:"lX8rGg",defaultMessage:"Select between member or admin"})})(e,i);return s.default.createElement(v.MemberRow,{key:a,id:"member-row-"+a,userId:e.user_id,showInvited:e.team_join_state===N.JoinState.PENDING,avatarUrl:e.team_join_state!==N.JoinState.PENDING?e.photo_url||"":d.static_url("/static/images/growth/member-vflJ3QUg7.svg"),displayName:e.display_name,roleLabel:M,initials:e.initials,email:e.email,actionsData:l,handleOnClose:_,onChange:function(a){if(a!==u||i&&a===S){_();var s=a===S?"granted":"revoked",n=t.__assign(t.__assign({},c),{user_id:e.user_id});r.TeamsWebActionsLogger.log(s+"_admin_permissions_open",t.__assign({},n));var o=function(){r.TeamsWebActionsLogger.log(s+"_admin_permissions_cancel",t.__assign({},n))};i?f.showTeamAdminRolesModal({userId:e.user_id,displayName:e.display_name,isAdmin:h(e.admin_role),origAdminRole:null!=e.admin_role?e.admin_role:g.ADMIN_ROLE.NONE,success:function(a){if(r.TeamsWebActionsLogger.log(s+"_admin_permissions",t.__assign({},n)),l&&l.roleUpdateCallback){var i=JSON.parse(a)[e.user_id].admin_role;l.roleUpdateCallback(i)}},onRequestClose:l&&l.onClose,onSecondaryAction:o}):b.showAdminPermissionsModal({userId:e.user_id,displayName:e.display_name,enablePermissions:"option-admin"===a,limited:!1,team_id:E,onPrimaryAction:function(){if(r.TeamsWebActionsLogger.log(s+"_admin_permissions",t.__assign({},n)),l&&l.roleUpdateCallback){var e="option-admin"===a?g.ADMIN_ROLE.SUPER:g.ADMIN_ROLE.NONE;l.roleUpdateCallback(e)}},onRequestClose:l&&l.onClose,onSecondaryAction:o})}},optionGroup:n!==e.user_id?t.__assign(t.__assign({},L),{selectedApiId:u,label:M}):void 0,growthActSmbMWInvitesActive:p})})),1===l.length&&s.default.createElement(v.MemberRow,{id:"empty-row",userId:-1,empty:!0,avatarUrl:d.static_url("/static/images/growth/single-vflQ4gh9g.svg"),displayName:m.intl.formatMessage({id:"CAKUql",defaultMessage:"Your team members will show up here"}),roleLabel:w,handleOnClose:_}))};a.FirstTaskInviteModal=function(e){var a=e.baseClass,t=e.children,r=e.currentUserId,d=e.showSidebar,u=e.memberList,g=e.emails,f=e.sentEmails,b=e.handleOnClose,v=e.focusRef,N=e.open,w=e.loggingExtras;s.default.useEffect((function(){var e={platform:w.is_client?A.Platform.DESKTOP_SSCV:o.is_supported_mobile_browser()?A.Platform.MOBILE_WEB:A.Platform.WEB};A.SMBFunnelLogger.setCommonTags(e)}),[]);var C=1===u.length?m.intl.formatMessage({id:"uaF2Te",defaultMessage:"Invite team members"}):m.intl.formatMessage({id:"YlQJ18",defaultMessage:"Manage team members"}),h=s.default.createElement("div",{className:a+"__action-separator"},s.default.createElement(l.Text,{size:"small",color:"disabled",tagName:"span"},m.intl.formatMessage({id:"2Pd+4t",defaultMessage:"Or"})));return s.default.createElement(n.IntlProvider,{defaultLocale:"en-US",locale:m.localeToBcp47LangTag(_.USER_LOCALE)},s.default.createElement(i.Modal,{className:e.growthActSmbMWInvitesActive?"mw-invites-modal-sheet":"",open:N,ariaLabel:m.intl.formatMessage({id:"TuViF7",defaultMessage:"Invite Members"}),displayCloseButton:!0,onRequestClose:function(){f.length&&E.showClinkTooltip(E.TooltipType.Members),b()},overlayClickClose:!0,width:d?960:699,overflowY:!0,focusedElementOnOpen:v,appElement:document.body,bodyClassName:"invite-modal "+a+" "+(d?a+"--sidebar-visible":"")},s.default.createElement(c.UXAnalyticsModalTracking,{id:"invite-modal"}),e.growthActSmbMWInvitesActive?s.default.createElement("div",{className:a+"__container"},s.default.createElement("div",{className:a+"__content"},s.default.createElement("div",{className:a+"__title"},m.intl.formatMessage({id:"5dI3gl",defaultMessage:"Invite team members"})),s.default.createElement("div",{className:a+"__invite-content"},!!e.isInviteLinkEnabled&&s.default.createElement(I.InviteLinkButton,{buttonClass:a+"__button",notifyWith:"snackbar",userId:r,onClick:function(){return S(M.Events.SHARE_INVITE_CLICK)},onLinkCopied:function(){return S(M.Events.SHARE_INVITE_COPIED)},onShareAction:function(){return S(M.Events.SHARE_INVITE_SHEET_ACTION)},onShareDismiss:function(){return S(M.Events.SHARE_INVITE_SHEET_DISMISS)}},m.intl.formatMessage({id:"ueivUA",defaultMessage:"Send invite link"})),!!e.isInviteLinkEnabled&&h,t),L(e))):s.default.createElement("div",{className:a+"__container"},s.default.createElement("div",{className:a+"__content"},s.default.createElement("div",{className:a+"__title"},C),s.default.createElement("div",{className:a+"__invite-content"},t),L(e)),d&&s.default.createElement(p.InviteModalSidebar,{baseClass:a,memberList:u,emails:g,sentEmails:f}))))}}));
//# sourceMappingURL=invite_modal_first_task.min.js-vflS2GWOB.map