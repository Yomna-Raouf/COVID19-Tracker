define("modules/clean/react/payments/buy/components/buy_component",["require","exports","tslib","classnames","modules/core/notify","react","classnames","modules/core/browser","modules/core/i18n","modules/clean/react/payments/buy/components/plan/buy_plan","modules/clean/react/async/loadable","modules/clean/web_timing_logger","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/types/types","modules/clean/react/payments/buy/components/headline","modules/clean/react/payments/buy/components/navigation","modules/clean/react/payments/buy/components/footer"],(function(e,t,a,r,n,o,i,s,l,u,c,d,p,m,f,y,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),o=a.__importDefault(o),i=a.__importDefault(i),s=a.__importStar(s);var g=c.Loadable({loader:function(){return d.waitForTTI().then((function(){return new Promise((function(t,a){e(["modules/clean/react/payments/buy/components/payments/sox_compliance_warning"],t,a)})).then(a.__importStar).then((function(e){return e.SOXComplianceBanner}))}))}}),_=(function(e){function t(t){var a=e.call(this,t)||this;return a.redirectToPromo=function(){s.redirect(a.props.promoRedirect),n.Notify.success(l.intl.formatMessage({id:"Ny8biJ",defaultMessage:"Great news! Youâ€™re eligible for a discount"}))},a.headline=o.default.createRef(),a}return a.__extends(t,e),t.prototype.componentDidMount=function(){d.mark_time_to_interactive()},Object.defineProperty(t.prototype,"ujProfessionalTrial",{get:function(){return"ON"===this.props.experiments.ujProfessionalTrial},enumerable:!0,configurable:!0}),t.prototype.renderHeadline=function(){var e=this.props,t=e.content,a=e.currentStep,r=e.productPlanType,n=e.showTrialVersion,i=e.showPlusTryRedesign,s=m.getPlanContentFromMap(t,r),l=n?s.trySubheadline:s.buySubheadline,u=t.purchaseHeadline;return i&&(u=t.trialHeadline),o.default.createElement(f.DropboxBuyHeadlineWeb,{forwardRef:this.headline,headlineText:1===a?t.chooseHeadline:u,subheadlineText:l})},t.prototype.hideSteps=function(){var e=this.props,t=e.currentStep,a=e.experiments,r=e.defaultPlan,n=e.isFromLowSpace,o=e.showPlusTryRedesign,i=s.get_uri().getQuery(),l=["V1","V2","V3"].includes(String(a.proBizMve))&&"1"===i.hs&&2===t&&"professional"===r;return!!(n||o||l)},t.prototype.renderPlans=function(){var e=this,t=this.props,a=t.content,n=t.currentPlan,s=t.experiments,l=t.hasPromo,c=t.planClick,d={Professional:m.getPlanContentFromMap(a,p.ProductPlanType.PROFESSIONAL),Plus:m.getPlanContentFromMap(a,p.ProductPlanType.PLUS)},f="professional"===n,y="plus"===n,h=function(t){var a=t.productPlanType,r=t.showTrialVersion;return function(){return c(a,Boolean(r),e.headline.current||void 0)}},g="ON"===s.subgrowthProBuyFeaturesMobile,_=r.default({"DropboxBuyPage-plansAndReasons":!0,grid__item:!0,"grid__item--medium--5-12":!0,"grid__item--large--1-3":!0,"DropboxBuyPage-plansAndReasons--showReasonsOnMobile":g}),S=function(e){var t=e.plan,a=e.onClick,r=e.secondaryClick,n=e.disabled,l=e.href,c=e.boldFirstReason,d=e.trackingId,p=e.secondaryTrackingId;return o.default.createElement("div",{className:_},o.default.createElement(u.BuyPlan,{trackingId:d,secondaryTrackingId:p,plan:t,onClick:a,secondaryClick:r,classname:"buy-plan",disabled:n,href:l,experiments:s}),o.default.createElement("span",{className:"ax-visually-hidden"},t.included.title),o.default.createElement("ul",{className:"DropboxBuyPage__reasons",role:"list"},t.reasons.map((function(e,t){var a;return o.default.createElement("li",{className:i.default("DropboxBuyPage__reason",(a={},a["DropboxBuyPage__reason--bold"]=c&&0===t,a)),key:"reason-"+t},e.text)}))))};return o.default.createElement("section",{className:"DropboxBuyPage__plans grid__container"},o.default.createElement(S,{plan:d.Plus,onClick:l?this.redirectToPromo:h({productPlanType:p.ProductPlanType.PLUS}),disabled:!f&&y,trackingId:"buy_page_select_plus"}),o.default.createElement("div",{className:"spacer grid__item--medium--1-24"}),y?o.default.createElement(S,{plan:d.Professional,href:"/account/plan?modal=plan&option=pro",trackingId:"buy_page_select_pro"}):this.ujProfessionalTrial?o.default.createElement(S,{plan:d.Professional,onClick:h({productPlanType:p.ProductPlanType.PROFESSIONAL,showTrialVersion:!0}),secondaryClick:h({productPlanType:p.ProductPlanType.PROFESSIONAL}),disabled:f,trackingId:"buy_page_select_pro",secondaryTrackingId:"buy_page_select_pro_secondary"}):o.default.createElement(S,{plan:d.Professional,onClick:h({productPlanType:p.ProductPlanType.PROFESSIONAL}),disabled:f,trackingId:"buy_page_select_pro"}))},t.prototype.renderCheckOutForm=function(){var e=this.props,t=e.actions,a=e.checkoutFormProps,r=e.content,n=e.experiments,i=e.formData,s=e.pageState,l=e.pricingState,u=e.productPlanType,c=e.PurchaseFormComponent,d=e.showTrialVersion,f=e.isFromLowSpace,y=e.updateHistory,h=e.useAUTaxInclusivePricing,g=e.showPlusTryRedesign,_=m.getPlanContentFromMap(r,u),S={monthlyPrice:_.priceMonthly.price,annualPriceAsMonthly:_.priceAnnual.priceAsMonthly,yearlyPrice:_.priceAnnual.price,yearlyWithoutSavings:_.priceAnnual.withoutSavings,yearlySavings:_.priceAnnual.savings},b=m.getPlanContentFromMap(r,p.ProductPlanType.PLUS),v=m.getPlanContentFromMap(r,p.ProductPlanType.PROFESSIONAL),P={plus:b.quota,professional:v.quota};return o.default.createElement(c,{actions:t,braintreeClientToken:a.braintreeClientToken,buyLink:_.cta.link,ccIframeUrl:a.ccIframeUrl,continueURI:a.continueURI,countryList:a.countryList,currencyToFormatMap:a.currencyToFormatMap,experiments:n,formData:i,idealBanks:a.idealBanks,iframeExperiments:a.iframeExperiments,includedFeaturesContent:_.included,locale:a.locale,localeNumberFormat:a.localeNumberFormat,pageState:s,paymentMethodMapper:a.paymentMethodMapper,planName:_.name,plansByType:r.plansByType,planTier:_.tier,planNamePrefixedWithDropbox:_.namePrefixedWithDropbox,productPlanType:u,pricingState:l,isFromLowSpace:f,initialPricingStrings:l.subChangePlans?void 0:S,quotaStrings:P,updateHistory:y,trialLength:a.trialLength,taxNamesByCountry:a.taxNamesByCountry,userInfo:a.userInfo,showTrialVersion:d,useAUTaxInclusivePricing:h,submitFormSuccess:s.submitFormSuccess,showPlusTryRedesign:g})},t.prototype.renderFooter=function(){var e,t=this.props,a=t.currentStep,r=t.pageState.footerLinks;if(r&&r.length){var n=function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)};e=r.map((function(e){return{section:n(e.section),links:e.links.filter((function(e){return e.href&&e.label})).map((function(e){return{href:e.href,label:n(e.label)}}))}}))}return o.default.createElement(h.DropboxBuyFooterWeb,{footerLinks:e,currentStep:a})},t.prototype.render=function(){var e=this.props,t=e.currentStep,a=e.SOXComplianceMessage,n=e.stepClick,i=r.default({DropboxBuyPage__content:!0,grid__container:!0,"grid--x-left":!0});return o.default.createElement("main",{className:i},a&&o.default.createElement(g,{message:a}),this.renderHeadline(),o.default.createElement(y.DropboxBuyNavigationWeb,{currentStep:t,hideSteps:this.hideSteps()||!1,onStepClick:n}),1===t&&this.renderPlans(),o.default.createElement("section",{className:"DropboxBuyPage__form grid__container"},2===t&&this.renderCheckOutForm()),this.renderFooter())},t})(o.default.Component);t.BuyComponent=_})),define("modules/clean/react/payments/buy/components/dropbox_buy_page",["require","exports","tslib","modules/clean/ajax","modules/core/exception","modules/core/notify","react","modules/clean/analytics","modules/core/browser","modules/core/uri","modules/clean/react/async/loadable","modules/clean/payments/skus/pricing_data","modules/clean/payments/skus/subscription_change_plan","modules/clean/web_timing_logger","modules/clean/stormcrow/stormcrow_exposure_logger","modules/clean/analytics","modules/clean/payments/skus/constants","modules/clean/web_timing_logger","modules/clean/react/payments/common/adapters/setup_cash","modules/clean/react/payments/buy/state/pro_store_creator","modules/clean/react/payments/buy/actions/buy_actions_creator","modules/clean/react/payments/buy/reducers/reducers","modules/clean/react/payments/buy/types/types","modules/clean/react/payments/buy/components/buy_component"],(function(e,t,a,r,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_,S,b,v,P,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importStar(r),n=a.__importStar(n),i=a.__importDefault(i),l=a.__importStar(l),g=a.__importStar(g);var E=c.Loadable({loader:function(){return a.__awaiter(void 0,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,a){e(["modules/clean/react/payments/pro/server_view_components/pro_try_server_view"],t,a)})).then(a.__importStar)];case 1:return[2,t.sent().ProTryServerView]}}))}))},loading:i.default.createElement("div",null)}),F=c.Loadable({loader:function(){return m.waitForTTI().then((function(){return new Promise((function(t,a){e(["modules/clean/react/payments/buy/components/buy_purchase_form"],t,a)})).then(a.__importStar).then((function(e){return e.BuyPurchaseForm}))}))}}),w=(function(t){function c(r){var n,o=t.call(this,r)||this;o.isInPlusTryRedesignExp=function(){var e=o.props,t=e.experiments,a=e.showTrialVersion;return o.getProductPlanType()===h.ProductPlanType.PLUS&&!!a&&a&&"V1"===t.actpaPlusTryRedesign},o.planClick=function(e,t,a){void 0===t&&(t=!1);var r={currentStep:2,productPlanType:e,showTrialVersion:t},n=o.getStoreProps(r);Promise.resolve(o.actions.updateState(n)).then((function(){window.scrollTo(0,0),o.updateHistory(2,e,void 0,t),a&&a.focus()})),s.ProEventsLogger.log(s.ProEventNames.BUY_TRY_PAGE_CHECKOUT,{type:"SelectPlan",productPlanType:e,showTrialVersion:t},void 0,o.props.showServerViewVersion)},o.stepClick=function(){Promise.resolve(o.actions.updateCurrentPage(1,o.state.navState.productPlanType,o.state.navState.showTrialVersion)).then((function(){window.scrollTo(0,0),o.updateHistory(1,o.state.navState.productPlanType,void 0,o.state.navState.showTrialVersion)}))},o.updateHistory=function(e,t,a,r){void 0===r&&(r=!1);var n=o.props.showServerViewVersion,i=u.URI.parse(l.get_href()).getQuery(),s="/buy",c="buy";if(2===e){var d=P.getPlanContentFromMap(o.contentForStep,t),p=t===h.ProductPlanType.PLUS?"plus":"professional";r?(s=d.cta.trial_link||"",c="try_"+p):(s=d.cta.link,c="buy_"+p)}n&&(s="/pro/try_server_view",c+="_server_view"),y.UXAnalyticsLogger.log("page_view",{page:c});var m=u.URI.parse(s).setQuery(i).toString();a?window.history.replaceState(o.state,document.title,m):window.history.pushState(o.state,document.title,m)},o.navAction=function(e){if(e.state&&e.state.navState){var t=o.getStoreProps(e.state.navState);o.actions.updateState(t)}};var i=r.checkoutFormProps,c=r.webTimingLoggerServerContext;_.setupCash(i.localeNumberFormat,i.currencyToFormatMap),c&&g.initialize_module(a.__assign({log_time_to_interactive:!0,log_time_to_view:!0,ttv_at_dom_interactive:!0,tti_at_dom_interactive:!0},c));var d=o.getStoreProps();return o.store=S.configureStore(d,v.proBuyReducer),o.state=o.store.getState(),o.store.subscribe((function(){o.setState((function(){return o.store.getState()}))})),(null===(n=o.state.pageState.marketingTracker)||void 0===n?void 0:n.initData)&&m.waitForTTI().then((function(){new Promise((function(t,a){e(["modules/clean/marketing_tracker"],t,a)})).then(a.__importStar).then((function(e){var t,a=e.MarketingTracker;(null===(t=o.state.pageState.marketingTracker)||void 0===t?void 0:t.initData)&&a.push(o.state.pageState.marketingTracker.initData)}))})),o}return a.__extends(c,t),c.prototype.getStoreProps=function(e){var t=this.props,a=t.checkoutFormProps,r=t.requestId,n=t.showTrialVersion,o=t.experiments,i=t.showServerViewVersion,s=t.isFromLowSpace,l=t.marketingTracker,u=t.content,c=e?e.productPlanType:this.getProductPlanType(),d=e||{currentStep:this.getCurrentStep(),productPlanType:this.getProductPlanType(),showTrialVersion:!!n},p=!1;return c!==h.ProductPlanType.PLUS||d.showTrialVersion||(o.subgrowthProBuyQuotaSwitchTrial&&["CONTROL","V1"].includes(o.subgrowthProBuyQuotaSwitchTrial)&&f.logVariantExposure("subgrowth_pro_buy_quota_switch_trial",o.subgrowthProBuyQuotaSwitchTrial),("V1"===o.subgrowthProBuyQuotaSwitchTrial||s)&&(p=!0)),{autocompleteForm:a.autocompleteForm,countryCode:a.countryCode,vat:a.vat,locale:a.locale,userInfo:a.userInfo,trialLength:a.trialLength,serializedPaymentFormSpec:a.serializedPaymentFormSpec,serializedSubChangePlans:void 0,baseSubChangePlans:this.state?this.state.pricingState.baseSubChangePlans:void 0,productPlanType:c,isServerView:i?"ON":"OFF",navState:d,showTrialVersion:d.showTrialVersion,showPlanSwitchRadios:p,footerLinks:this.state?this.state.pageState.footerLinks:void 0,requestId:r,paymentFormErrorsExperiment:o.paymentFormErrorsExperiment,psd2AddressFields:o.psd2AddressFields,marketingTracker:l,plansContent:u.plansByType}},Object.defineProperty(c.prototype,"actions",{get:function(){return b.bindProBuyActions(this.store)},enumerable:!0,configurable:!0}),c.prototype.getCurrentStep=function(){return this.props.defaultPlan?2:1},c.prototype.getProductPlanType=function(){var e=this.props.currentPlan;return"plus"===e||"professional"===e?h.ProductPlanType.PROFESSIONAL:this.props.defaultPlan&&"professional"===this.props.defaultPlan?h.ProductPlanType.PROFESSIONAL:h.ProductPlanType.PLUS},Object.defineProperty(c.prototype,"contentForStep",{get:function(){return 1!==this.state.navState.currentStep&&this.state.pageState.plansContent?a.__assign(a.__assign({},this.props.content),{plansByType:this.state.pageState.plansContent}):this.props.content},enumerable:!0,configurable:!0}),c.prototype.componentDidMount=function(){var e=this;this.updateHistory(this.state.navState.currentStep,this.state.navState.productPlanType,!0,this.state.navState.showTrialVersion),window.addEventListener("popstate",this.navAction);for(var t=document.querySelectorAll(".dws-preloader"),i=0;i<t.length;i++){var s=t[i];s.parentNode&&s.parentNode.removeChild(s)}r.WebRequest({url:"/buy/footer_links",type:"GET",success:function(t){var a=JSON.parse(t);e.actions.setFooterLinks(a)}});var l=this.props.showServerViewVersion?"buy_server_view":"buy";r.SilentBackgroundRequest({url:"/growth/log_visit_ajax",type:"POST",data:a.__assign({endpoint:l,log_preauth:!0,additional_preauth_types:"preauth_pro_upgrade"},this.props.loggingProps)}),r.WebRequest({url:"/pro/ajax_fetch_sub_change_plans",type:"POST",success:function(t){var a=JSON.parse(t);if(0===a.length)o.Notify.error(d.PricingDataException.notifyErrorMessagePersonal,20),n.reportException({err:new Error("/pro/ajax_fetch_sub_change_plans returned 0 Subscription Change Plans"),severity:n.SEVERITY.NONCRITICAL});else{var r=a.map((function(e){return p.SubscriptionChangePlan.deserialize(e)}));e.actions.loadSubChangePlans(r)}},error:function(e,t,a){if(0!==e.status){o.Notify.error(d.PricingDataException.notifyErrorMessagePersonal,20);var r="/pro/ajax_fetch_sub_change_plans failed to return Subscription Change Plans (status: "+e.status+")";n.reportException({err:new Error(r),severity:n.SEVERITY.CRITICAL})}}})},c.prototype.componentWillUnmount=function(){window.removeEventListener("popstate",this.navAction)},c.prototype.render=function(){var e=this.props,t=e.checkoutFormProps,r=e.content.purchaseHeadline,n=e.currentPlan,o=e.defaultPlan,s=e.experiments,l=e.hasPromo,u=e.isFromLowSpace,c=e.promoRedirect,d=e.PurchaseFormComponent,p=e.showServerViewVersion,m=e.SOXComplianceMessage,f=e.useAUTaxInclusivePricing,y=this.state,h=y.navState,g=h.currentStep,_=h.productPlanType,S=h.showTrialVersion,b=y.formData,v=y.pageState,F=y.pricingState,w=this.state.pageState.plansContent,T={actions:this.actions,experiments:s,formData:b,isFromLowSpace:u,pageState:v,plansByType:w,productPlanType:_,showTrialVersion:S,SOXComplianceMessage:m};if(p){var N=P.getPlanContentFromMap(this.contentForStep,_),M=a.__assign(a.__assign({},T),{ccIframeUrl:t.ccIframeUrl,continueURI:t.continueURI,countryList:t.countryList,currentPlanContent:N,currentTransitionPrices:F.currentTransitionPrices,displayPrices:F.displayPrices,headlineText:r,idealBanks:t.idealBanks,iframeExperiments:t.iframeExperiments,loadingPrices:F.loadingPrices,locale:t.locale,submitFormSuccess:v.submitFormSuccess,taxNamesByCountry:t.taxNamesByCountry,useAUTaxInclusivePricing:f||!1,userInfo:t.userInfo,requestId:this.props.requestId});return i.default.createElement(E,a.__assign({},M))}var k=a.__assign(a.__assign({},T),{checkoutFormProps:t,content:this.contentForStep,currentStep:g,currentPlan:n,defaultPlan:o,hasPromo:l,planClick:this.planClick,pricingState:F,promoRedirect:c,PurchaseFormComponent:d,stepClick:this.stepClick,updateHistory:this.updateHistory,useAUTaxInclusivePricing:f,showPlusTryRedesign:this.isInPlusTryRedesignExp()});return i.default.createElement(C.BuyComponent,a.__assign({},k))},c.defaultProps={PurchaseFormComponent:F},c})(i.default.Component);t.DropboxBuyPage=w,t.RootComponent=w})),define("modules/clean/react/payments/buy/components/dropbox_buy_checkout",["require","exports","tslib","react","modules/clean/react/payments/buy/components/buy_purchase_form","modules/clean/react/payments/buy/components/dropbox_buy_page"],(function(e,t,a,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return r.default.createElement(o.DropboxBuyPage,a.__assign({PurchaseFormComponent:n.BuyPurchaseForm},this.props))},t})((r=a.__importDefault(r)).default.Component);t.DropboxBuyPage=i})),define("modules/clean/react/payments/buy/components/headline",["require","exports","tslib","classnames","react"],(function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n),t.DropboxBuyHeadlineWeb=function(e){var t=e.forwardRef,a=e.headlineText,o=e.subheadlineText,i=r.default({DropboxBuyPage__headline:!0,grid__container:!0}),s=r.default({DropboxBuyPage__subheadline:!0,grid__container:!0}),l=o?n.default.createElement("h2",{className:s},o):null;return n.default.createElement(n.default.Fragment,null,n.default.createElement("h1",{className:i,tabIndex:-1,ref:t},a),l)}})),define("modules/clean/react/payments/buy/components/footer",["require","exports","tslib","react","modules/clean/web_timing_logger","modules/clean/react/async/loadable"],(function(e,t,a,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r);var i=o.Loadable({loader:function(){return n.waitForTTI().then((function(){return new Promise((function(t,a){e(["modules/clean/react/rebrand/elements/rebrand_arbor_footer_component"],t,a)})).then(a.__importStar).then((function(e){return e.RebrandArborMinimalFooterComponent}))}))}}),s=o.Loadable({loader:function(){return n.waitForTTI().then((function(){return new Promise((function(t,a){e(["modules/clean/react/rebrand/elements/rebrand_arbor_footer_component"],t,a)})).then(a.__importStar).then((function(e){return e.RebrandArborFooterComponent}))}))}});t.DropboxBuyFooterWeb=function(e){var t=e.footerLinks;return 1!==e.currentStep?r.default.createElement(i,{localeSelectorWithoutCss:!0}):t&&t.length?r.default.createElement(s,{backgroundColor:"white",textColor:"black",content:t,localeSelectorWithoutCss:!0}):null}})),define("modules/clean/react/payments/buy/components/navigation",["require","exports","tslib","classnames","react","modules/core/i18n"],(function(e,t,a,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n),t.DropboxBuyNavigationWeb=function(e){var t=[],a=e.currentStep;if(!e.hideSteps){t=[1,2].map((function(t){var i=r.default({DropboxBuyPage__step:!0,"DropboxBuyPage__step--currentStep":t===a,"DropboxBuyPage__step--clickable":1===t&&2===a});return 2===a&&1===t?n.default.createElement("button",{className:i,key:"step-"+t,onClick:e.onStepClick},o.intl.formatMessage({id:"PkxUWY",defaultMessage:"Step {step}"},{step:t})):n.default.createElement("span",{className:i,key:"step-"+t},o.intl.formatMessage({id:"PkxUWY",defaultMessage:"Step {step}"},{step:t}))}))}var i=r.default({DropboxBuyPage__steps:!0,grid__container:!0}),s=o.intl.formatMessage({id:"F0O+Rv",defaultMessage:"Current step is {current_step} of 2"},{current_step:a});return n.default.createElement("div",{className:i},n.default.createElement("span",{className:"ax-visually-hidden"},s),n.default.createElement("span",{"aria-hidden":"true"},t))}})),define("modules/clean/react/payments/buy/components/plan/buy_plan",["require","exports","tslib","classnames","react-intl","react","modules/core/i18n","modules/clean/web_timing_logger","modules/clean/react/css","modules/clean/react/payments/buy/types/types","modules/clean/react/rebrand/elements/rebrand_buttons","modules/clean/react/payments/buy/components/plan/plan_card","spectrum-arbor/atoms/arbor_copy","spectrum-arbor/atoms/arbor_headline"],(function(e,t,a,r,n,o,i,s,l,u,c,d,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),o=a.__importDefault(o),s=a.__importStar(s);var f=(function(e){function t(t){var a=e.call(this,t)||this;return a.state={namespace:"BuyPlan"},a}return a.__extends(t,e),t.prototype.isEligibleForTrialByTier=function(e){var t=this.props.experiments;if(!t)return!1;switch(e){case u.BuyPagePlanTiers.PROFESSIONAL:return"ON"===t.ujProfessionalTrial;default:return!1}},t.prototype.getPricingStrings=function(){var e,t,a,r=this.props.plan,s=r.priceMonthly,l=r.priceAnnual,u=r.gstIncluded;if(u){var c=n.defineMessage({id:"/jhkvD",defaultMessage:"{price} / {duration}{line_break}({tax_string})"});e=i.intl.formatMessage(c,{price:l.priceAsMonthly,duration:s.duration,tax_string:u,line_break:"\n"}),a=i.intl.formatMessage(c,{price:l.priceAsMonthly,duration:s.duration,tax_string:u,line_break:o.default.createElement("br",null)}),t=i.intl.formatMessage({id:"LciHZa",defaultMessage:"{price} per {duration}. {tax_string}"},{price:l.priceAsMonthly,duration:s.duration,tax_string:u})}else a=e=i.intl.formatMessage({id:"hc+1Ri",defaultMessage:"{price} / {duration}"},{price:l.priceAsMonthly,duration:s.duration}),t=i.intl.formatMessage({id:"paxTZY",defaultMessage:"{price} per {duration}"},{price:l.priceAsMonthly,duration:s.duration});return{primaryPrice:e,primaryPriceRichText:a,primaryPriceAx:t,secondaryPrice:i.intl.formatMessage({id:"YuTWxt",defaultMessage:"{price} / {duration} (save {savings})"},{price:l.price,duration:l.duration,savings:l.savings}),secondaryPriceAx:i.intl.formatMessage({id:"X8aFQg",defaultMessage:"{price} per {duration}. Save {savings}"},{price:l.price,duration:l.duration,savings:l.savings})}},t.prototype.renderCTA=function(){var e,t,n,s=this.props,l=s.secondaryClick,u=s.plan,d=s.onClick,p=s.disabled,m=s.href,f=s.trackingId,y=s.secondaryTrackingId,h=this.state.namespace,g={className:h+"__cta",importance:"primary",size:"medium",disabled:p};if(d){var _=p?i.intl.formatMessage({id:"cBVThZ",defaultMessage:"{plan_name} is your current plan"},{plan_name:u.name}):i.intl.formatMessage({id:"/LFPia",defaultMessage:"Select Dropbox {plan_name}"},{plan_name:u.name}),S=a.__assign({onClick:d,type:"button",ariaLabel:_,trackingId:f},g);t=o.default.createElement(c.RebrandButton,a.__assign({},S),p?i.intl.formatMessage({id:"fPUR43",defaultMessage:"Your current plan"}):u.cta.text)}else if(m){var b=a.__assign({href:m},g);t=o.default.createElement(c.RebrandButtonAnchor,a.__assign({},b),u.cta.text)}if(this.isEligibleForTrialByTier(u.tier)&&l){var v=r.default(h+"__secondary-cta","button-as-link"),P=i.intl.formatMessage({id:"Cf2uR5",defaultMessage:"Or buy {plan} now"},{plan:u.namePrefixedWithDropbox});n=o.default.createElement("button",{className:v,onClick:l,"data-uxa-log":y},P)}var C=r.default(h+"__cta-container",((e={})[h+"__cta-container__extra-padding"]=!n,e));return o.default.createElement("div",{className:C},t,n)},t.prototype.componentDidMount=function(){s.mark_time_to_interactive()},t.prototype.render=function(){var e=this.state.namespace,t=this.props,a=t.hideDivider,r=t.plan,n=this.getPricingStrings(),s=r.name,l="blue";r.tier===u.BuyPagePlanTiers.PLUS&&(l="black");var c=o.default.createElement(o.default.Fragment,null,o.default.createElement(m.ArborHeadline,{"aria-hidden":"true",className:"plan-card__content__subheader--primary plan-card__content__subheader--no-margin",tag:"h4"},n.primaryPriceRichText),o.default.createElement("span",{className:"ax-visually-hidden"},n.primaryPrice),o.default.createElement(p.ArborCopy,{tag:"p",size:"small",color:"shark",marginBottomSize:"medium",marginTopSize:"none"},i.intl.formatMessage({id:"evpR9Y",defaultMessage:"when billed yearly"})));return o.default.createElement(d.PlanCard,{classname:e+" "+e+"__"+s+" "+this.props.classname,title:s,planColor:l,hideDivider:a,primarySubheader:c,description:r.description},this.renderCTA())},t})(o.default.Component);t.BuyPlan=l.requireCssWithComponent(f,["/static/css/buy/components/buy_plan-vflJkL3sJ.css","/static/js/spectrum-arbor/index.web-vflH6uLPF.css"])})),define("modules/clean/react/payments/buy/components/plan/plan_card",["require","exports","tslib","react","modules/clean/react/css","modules/clean/web_timing_logger"],(function(e,t,a,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),o=a.__importStar(o);var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentDidMount=function(){o.mark_time_to_interactive()},t.prototype.render=function(){var e=this.props,t=e.classname,a=e.planColor,n=e.title,o=e.primarySubheader,i=e.description,s=e.hideDivider;return r.default.createElement("section",{className:t+" plan-card"},r.default.createElement("div",{className:"plan-card__card-top--"+a}),r.default.createElement("article",{className:"plan-card__content"},r.default.createElement("h2",{className:"plan-card__content__title"},n),r.default.createElement("div",null,o),!s&&r.default.createElement("hr",{"aria-hidden":"true",className:"plan-card__content__divider"}),r.default.createElement("p",{className:"plan-card__content__description"},i),this.props.children))},t})(r.default.PureComponent);t.PlanCard=n.requireCssWithComponent(i,["/static/css/growth_pages/plans/plan_card-vflpaOLUr.css"])})),define("modules/clean/react/payments/common/middleware/pro_buy_logger",["require","exports","modules/clean/analytics","modules/clean/payments/skus/constants","modules/clean/payments/payment_form/payment_form_spec"],(function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.proBuyLogger=function(e){var t,o,i,s,l,u=["UpdateFirstName","UpdateLastName","UpdateEmail","UpdatePassword","UpdateZipCode","UpdateAccountHolderName","UpdateIBAN"];return function(c){return function(d){try{var p=c(d),m=d.type,f=e.getState(),y=f.pageState,h=f.pricingState,g=f.formData,_=f.navState,S=void 0;if(-1!==u.indexOf(m)&&o===m)return p;"UpdateTransitionsStart"===m?t=(new Date).getTime():"UpdateTransitionsSuccess"!==m&&"UpdateTransitionsError"!==m||(S=(((new Date).getTime()-t)/1e3).toFixed(1));var b={type:m,submitButtonState:y.submitting||h.loadingPrices?"disabled":"enabled"};if(void 0!==S&&(b.roundtrip=S),"UpdateSchedule"===m){var v="Unknown";g.scheduleId.rawValue===r.ScheduleId.MONTHLY?v="SelectMonthly":g.scheduleId.rawValue===r.ScheduleId.YEARLY&&(v="SelectYearly"),b.event=v}else if("UpdatePaymentMethod"===m){var P="Unknown";g.paymentMethod.rawValue===n.PaymentMethod.CreditCard?P="SelectCredit":g.paymentMethod.rawValue===n.PaymentMethod.PayPal?P="SelectPaypal":g.paymentMethod.rawValue===n.PaymentMethod.DirectDeposit?P="SelectDebit":g.paymentMethod.rawValue===n.PaymentMethod.Ideal&&(P="SelectIdeal"),b.event=P}else if("UpdateNonce"===m){var C=!1,E=g.nonce,F=E.isCCNValid,w=E.isCCodeValid,T=E.isCCExpValid;if(null!==i&&null!==l&&null!==s&&i===F&&l===w&&s===T&&(C=!0),i=F,l=w,s=T,C)return p;b.UpdateCC=F?"Valid":"Invalid",b.UpdateCVV=w?"Valid":"Invalid",b.UpdateExp=T?"Valid":"Invalid",o=m}return g.productPlanType.rawValue&&(b.productPlanType=g.productPlanType.rawValue,b.showTrialVersion=_&&_.showTrialVersion?"true":"false"),a.ProEventsLogger.log(a.ProEventNames.BUY_TRY_PAGE_CHECKOUT,b,void 0,y.isServerView),-1!==u.indexOf(m)&&(o=m),p}catch(t){y=e.getState().pageState;throw a.ProEventsLogger.log(a.ProEventNames.BUY_TRY_PAGE_CHECKOUT_CRASH,{action:d.type,error:t.stack||t.toString()},void 0,y.isServerView),t}}}}})),define("modules/clean/react/payments/buy/actions/buy_actions_creator",["require","exports","tslib","redux","modules/clean/react/payments/buy/actions/page_actions","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/react/payments/common/form/actions/actions"],(function(e,t,a,r,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importStar(r),n=a.__importStar(n),o=a.__importStar(o),i=a.__importStar(i),t.bindProBuyActions=function(e){return r.bindActionCreators(a.__assign(a.__assign({},t.SHARED_FORM_ACTIONS),{setFooterLinks:n.setFooterLinks,loadSubChangePlans:n.loadSubChangePlans,updateHistory:n.updateHistory,updateSelectedPlan:n.updateSelectedPlan,updateState:n.updateState}),e.dispatch)},t.SHARED_FORM_ACTIONS={updatePhone:i.updatePhone,blurPhone:i.blurPhone,updateCity:i.updateCity,blurCity:i.blurCity,updateName:i.updateName,blurName:i.blurName,updateAddress:i.updateAddress,blurAddress:i.blurAddress,showFormFieldErrors:i.showFormFieldErrors,submitCaptcha:i.submitCaptcha,submitProBuyForm:o.submitProBuyFormToServer,updateNonce:i.updateNonce,updatePayPalNonce:i.updatePayPalNonce,blurCCField:i.blurCCField,updateAdyenEncryptedCard:i.updateAdyenEncryptedCard,updateEncryptedCardForNetworkToken:i.updateEncryptedCardForNetworkToken,updateBrowserInfo:i.updateBrowserInfo,updateThreeDsData:i.updateThreeDsData,triggerThreeDsChallenge:i.triggerThreeDsChallenge,triggerThreeDsFingerprint:i.triggerThreeDsFingerprint,updateBIN:i.updateBIN,toggleExistingAccount:n.toggleSignInModal,updateCurrentPage:n.updateCurrentPage,updateFirstName:i.updateFirstName,updateLastName:i.updateLastName,updateEmail:i.updateEmail,updatePassword:i.updatePassword,updateSchedule:o.updateSchedule,updateProductPlantype:o.updateProductPlanType,updatePaymentMethod:i.updatePaymentMethod,updateCountryCode:o.updateCountryCode,updateZipCode:o.updateZipCode,blurZipCode:i.blurZipCode,updateVat:o.updateVat,blurVat:i.blurVat,updateCpf:i.updateCpf,blurCpf:i.blurCpf,updateCpfName:i.updateCpfName,updateAccountHolderName:i.updateAccountHolderName,blurAccountHolderName:i.blurAccountHolderName,updateIBAN:i.updateIBAN,blurIBAN:i.blurIBAN,updateMandateSigned:i.updateMandateSigned,updateIdealBank:o.updateIdealBank,updateTermsAndService:i.updateTermsAndService,updateEVH:o.updateEVH,paymentBannerError:i.paymentBannerError}})),define("modules/clean/react/payments/buy/actions/buy_form_actions",["require","exports","tslib","modules/clean/analytics","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/skus/constants","modules/core/exception","modules/clean/react/payments/buy/actions/pricing_actions","modules/core/notify","modules/clean/web_register_logging_data","modules/clean/payments/skus/pricing_data","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/common/form/actions/actions"],(function(e,t,a,r,n,o,i,s,l,u,c,d,p){"use strict";function m(e,t,a,r,o,i,s){void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=!0),void 0===s&&(s="OFF");var l=e.countryCode.formattedValue,u=["scheduleId","paymentMethod","countryCode"];return o||u.push("termsAndService"),a||u.push("firstName","lastName","email","password"),t.allow_zip_code_for_country(l)&&u.push("zipCode"),t.should_show_vat_for_country(l)&&""!==e.vat.formattedValue&&u.push("vat"),t.should_require_cpf(l,e.paymentMethod.formattedValue)&&u.push("cpf"),t.showPSD2FieldsToUser(e.paymentMethod.formattedValue,l,r)&&u.push("name","city","address"),e.paymentMethod.formattedValue===n.PaymentMethod.CreditCard?(u.push("nonce"),u.push("adyenEncryptedCard"),u.push("encryptedCardForNetworkToken"),u.push("browserInfo"),u.push("threeDsData"),i&&u.push("bin")):e.paymentMethod.formattedValue===n.PaymentMethod.PayPal?"ON"===s&&u.push("payPalNonce"):e.paymentMethod.formattedValue===n.PaymentMethod.DirectDeposit?u.push("accountHolderName","iban","mandateSigned"):e.paymentMethod.formattedValue===n.PaymentMethod.Ideal&&u.push("idealBankId","idealBankName"),u}var f;function y(e,t,r){return a.__awaiter(this,void 0,void 0,(function(){var n,i,s,l,c,d,p,m;return a.__generator(this,(function(a){return n=r.pageState,i=n.existingAccountShowing,s=n.requestId,l=n.submitSeq,c=e&&e.getScheduleId()===o.ScheduleId.MONTHLY?"monthly":"yearly",t.account_info_type=i?"existing":"new",t.billing_schedule=c,t.currency=e&&e.getCurrency(),t.expected_price=e&&e.getExpectedPriceToken(),t.plan_id=e&&e.transition.state.plan.id,t.tos_version="3",t.packrat=e&&e.hasPackrat(),t.addon_expected_price=e&&e.hasPackrat()&&e.getAddonExpectedPrice(),t.request_id=s,t.submit_seq=l,r.navState?(d=r.navState,p=d.showTrialVersion,m=d.productPlanType,t.expected_price_amount=e&&e.getTotalPrice().amount,t.product=m===o.ProductPlanType.PLUS?"plus":"pro",t.signup_type=p?"trial":"purchase",t.signup_tag=m===o.ProductPlanType.PLUS?p?f.PLUS_TRY:f.PLUS_BUY:p?f.PRO_TRY:f.PRO_BUY,[2,u.setWebRegisterLoggingData(t)]):[2,u.setWebRegisterLoggingData(t)]}))}))}function h(e){return function(t){t(d.updateCountryCode(e)),t(s.updatePrice())}}function g(e){return function(t){t(d.updateZipCode(e)),t(s.updatePrice())}}function _(e){return function(t){t(d.updateVat(e)),t(s.updatePrice())}}function S(e){return function(t){t((function(e){return{type:"UpdateEVH",value:e}})(e)),t(s.updateCurrentTransitionPrices())}}function b(e){return function(t){t((function(e){return{type:"UpdateSchedule",value:e}})(e)),t(s.updateCurrentTransitionPrices())}}function v(e){return function(t){t(d.updateIdealBank(e))}}function P(e){return{type:"UpdateProductPlanType",value:e}}Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importStar(i),s=a.__importStar(s),d=a.__importStar(d),t.getFieldNamesToValidate=m,t.submitProBuyFormToServer=function(e){var t=e.additionalData,a=void 0===t?{}:t,n=e.allowSubmitWithoutTOS,o=e.captchaComponentRef,s=e.handle3DsMessage,u=e.enableBinRouting,d=e.prepareForSubmission,f=e.trigger,h=e.url,g=e.psd2AddressFields,_=void 0!==g&&g,S=(e.webPlusDirect,e.paymentPayPalV2Flow),b=void 0===S?"OFF":S;return function(e,t){var g,S=t(),v=S.formData,P=S.pageState.paymentFormSpec,C=S.pageState.existingAccountShowing,E=S.pricingState.subChangePlans;if(E){var F=v.scheduleId.formattedValue,w=v.evh.rawValue,T=E.filter((function(e){return!!e.finalSubState.plan&&(e.finalSubState.plan.billingSchedule.id===F&&!!e.finalSubState.addons.skus.length===w)})).pop();if(T){if(T.finalSubState.planSku.productType!==v.productPlanType.rawValue)return l.Notify.error(c.PricingDataException.notifyErrorMessagePersonal,20),void i.reportException({err:new Error("Intended product type to purchase does not match subscription change plan"),severity:i.SEVERITY.CRITICAL});g=T.tvm,a.sub_change_plan=JSON.stringify(T)}}var N=m(v,P,C,_,n,u,b);y(g,a,S).then((function(t){e(p.submitForm(h,N,d,t,o,s,f)),""!==S.formData.vat.formattedValue&&r.ProEventsLogger.log("vat_provided_on_initial_purchase",{},void 0,S.pageState.isServerView)}))}},(function(e){e.PRO_BUY="pro_buy_register",e.PRO_TRY="pro_try_register",e.PLUS_BUY="plus_buy_register",e.PLUS_TRY="plus_try_register"})(f||(f={})),t.fillAdditionalData=y,t.updateCountryCode=h,t.updateZipCode=g,t.updateVat=_,t.updateEVH=S,t.updateSchedule=b,t.updateIdealBank=v,t.updateProductPlanType=P,t.actionCreators={updateCountryCode:h,updateZipCode:g,updateVat:_,updateEVH:S,updateSchedule:b,updateIdealBank:v,updateProductPlanType:P}})),define("modules/clean/react/payments/buy/actions/page_actions",["require","exports","tslib","modules/clean/react/payments/buy/actions/pricing_actions","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/dbmodal"],(function(e,t,a,r,n,o){"use strict";function i(e,t,a){return{type:"UpdateCurrentPage",step:e,productPlanType:t,showTrialVersion:!!a}}function s(e){return function(t){t({type:"LoadSubChangePlans",baseSubChangePlans:e}),t(r.updatePrice())}}Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importStar(r),o=a.__importStar(o),t.toggleSignInModal=function(e){return function(t,a){a().pageState.userInfo.existingAccount?t({type:"ToggleSignInModal",show:e}):new o.DBModal({element_id:"sign-in-modal",focus:"input[name='login_email']"}).show()}},t.updateCurrentPage=i,t.updateHistory=function(){return{type:"UpdateHistory"}},t.setFooterLinks=function(e){return function(t){t({type:"SetFooterLinks",footerLinks:e})}},t.updateState=function(e){return{type:"UpdateState",props:e}},t.updateSelectedPlan=function(e,t){return function(a,r){a(i(2,e,t)),a(n.updateProductPlanType(e));var o=r().pricingState;o.baseSubChangePlans&&a(s(o.baseSubChangePlans))}},t.loadSubChangePlans=s})),define("modules/clean/react/payments/buy/actions/pricing_actions",["require","exports","modules/clean/payments/skus/subscription_diff","modules/clean/payments/skus/subscription_service","modules/clean/react/growth_pages/promo/types"],(function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=new r.SubscriptionService;function i(){return function(e,t){var r=t(),i=r.formData,s=r.pricingState,p=r.pageState,m={countryCode:i.countryCode.formattedValue,zipCode:i.zipCode.formattedValue,vat:i.vat.errorState?"":i.vat.formattedValue};if(e({type:"UpdateTransitionsStart"}),s.subChangePlans){var f=s.subChangePlans.map((function(e){return a.SubscriptionDiff.fromSubscriptionStatus(e)})),y=p.promoSpec&&p.promoSpec.cashCode&&p.promoSpec.id!==n.PromoSpecType.TRIAL?{cashCode:p.promoSpec.cashCode}:void 0;o.priceSet(f,m,y,!0).then((function(t){e(l(t)),e(c(t)),e(d(t))})).catch((function(t){e(u(t))}))}else e({type:"HasPendingUpdate"})}}function s(){return{type:"UpdateTransitionsStart"}}function l(e){return{type:"UpdateTransitionsSuccess",subChangePlans:e}}function u(e){return{type:"UpdateTransitionsError",error:e}}function c(e){return{type:"UpdateDisplayPrices",subChangePlans:e}}function d(e){return{type:"UpdateCurrentTransitionPrices",subChangePlans:e}}function p(){return{type:"HasPendingUpdate"}}t.updatePrice=i,t.updateTransitionsStart=s,t.updateTransitionsSuccess=l,t.updateTransitionsError=u,t.updateDisplayPrices=c,t.updateCurrentTransitionPrices=d,t.hasPendingUpdate=p,t.actionCreators={updatePrice:i,updateTransitionsStart:s,updateTransitionsSuccess:l,updateTransitionsError:u,updateDisplayPrices:c,updateCurrentTransitionPrices:d,hasPendingUpdate:p}})),define("modules/clean/react/payments/buy/state/pro_store_creator",["require","exports","tslib","redux","redux-thunk","modules/clean/payments/payment_form/payment_form_spec","modules/clean/redux/unsupported","modules/clean/redux/devtools","modules/clean/react/payments/buy/actions/pricing_actions","modules/clean/react/payments/buy/actions/buy_form_actions","modules/clean/react/payments/buy/helpers/pricing_value_helper","modules/clean/payments/skus/subscription_change_plan","modules/clean/payments/skus/constants","modules/clean/react/payments/common/middleware/pro_buy_logger","modules/clean/react/payments/common/form_value_factory","modules/core/browser","modules/core/notify","modules/clean/react/payments/common/middleware/payments_ux_logger","modules/clean/react/payments/common/form/middleware/middleware","modules/clean/logging/hive/schemas/web-payments_ux_analytics"],(function(e,t,a,r,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_,S){"use strict";function b(e){return function(e){return function(t){if("SubmitFormError"!==t.type)return e(t);var a=e(t);return t.data&&t.data.error_message&&h.Notify.error(t.data.error_message),t.data.redirect&&y.redirect(t.data.redirect),a}}}function v(e){var t=P(e),a=C(e,t);return{pageState:t,pricingState:E(e,a),formData:a,navState:(function(e){var t=e.navState;return t||{currentStep:0,productPlanType:0,showTrialVersion:!1}})(e)}}function P(e){var t=e.autocompleteForm,a=e.isServerView,r=e.locale,n=e.userInfo,i=e.serializedPaymentFormSpec,s=e.showPlanSwitchRadios,l=e.requestId,u=e.footerLinks,c=e.promoSpec,d=e.plansContent,p=e.marketingTracker;return{autocomplete:t,locale:r,userInfo:n,existingAccountShowing:n.existingAccount,paymentFormSpec:new o.PaymentFormSpec(i),submitFormSuccess:!1,hasFormError:!1,isServerView:"ON"===a,showPlanSwitchRadios:s,requestId:l,submitSeq:0,footerLinks:u,submitting:!1,promoSpec:c,paymentFormErrorsExperiment:e.paymentFormErrorsExperiment,showBuyClickError:!1,psd2AddressFields:e.psd2AddressFields,plansContent:d,marketingTracker:p,paypalEmail:""}}function C(e,t){var a=e.countryCode,r=e.userInfo,n=e.vat,o=e.trialLength,i=e.showTrialVersion,s=e.locale,l=r.fname||"",u=r.lname||"",c="";r.existingAccount||(c=r.email||"");var d,m=r.password||"",y=p.ScheduleId.YEARLY,h=e.productPlanType||p.ProductPlanType.STANDARD;d=i?t.paymentFormSpec.default_payment_method():t.paymentFormSpec.default_payment_method_for_country(a);var g=n||"";return{city:f.FormValueFactory.createCity(""),phone:f.FormValueFactory.createPhone(""),name:f.FormValueFactory.createName(""),address:f.FormValueFactory.createAddress(""),nonce:f.FormValueFactory.createNonce(""),payPalNonce:f.FormValueFactory.createPayPalNonce("",""),adyenEncryptedCard:f.FormValueFactory.createAdyenEncryptedCard(""),encryptedCardForNetworkToken:f.FormValueFactory.createEncryptedCardForNetworkToken("",""),bin:f.FormValueFactory.createBIN(""),browserInfo:f.FormValueFactory.createBrowserInfo(""),threeDsData:f.FormValueFactory.createThreeDsData(""),firstName:f.FormValueFactory.createInput(l),lastName:f.FormValueFactory.createInput(u),email:f.FormValueFactory.createEmail(c),password:f.FormValueFactory.createPassword(m),productPlanType:f.FormValueFactory.createProductPlanType(h),scheduleId:f.FormValueFactory.createSchedule(y),paymentMethod:f.FormValueFactory.createPaymentMethod(d,a,t.paymentFormSpec),countryCode:f.FormValueFactory.createCountryCode(a),zipCode:f.FormValueFactory.createZipCode("",a,t.paymentFormSpec),vat:f.FormValueFactory.createVat(g,a),cpf:f.FormValueFactory.createCpf("",void 0,!0),cpfName:f.FormValueFactory.createCpfNamePrefill("","",r.displayName,void 0,!0),accountHolderName:f.FormValueFactory.createInput(""),iban:f.FormValueFactory.createIBAN(""),mandateSigned:f.FormValueFactory.createCheckbox(!1),idealBankId:f.FormValueFactory.createIdealBankId(""),idealBankName:f.FormValueFactory.createIdealBankName(""),termsAndService:f.FormValueFactory.createCheckbox(!1),evh:f.FormValueFactory.createCheckbox(!1),trialEndDate:f.FormValueFactory.createTrialEndDate(o,s)}}function E(e,t){var a,r=e.baseSubChangePlans,n=e.serializedSubChangePlans;return r?a=r.filter((function(t){return t.subState.planSku&&e.navState&&t.subState.planSku.productType===e.navState.productPlanType})):n&&(a=n.map((function(e){return d.SubscriptionChangePlan.deserialize(e)}))),{hasCurrencyChanged:!1,loadingPrices:void 0===a,requestToken:-1,subChangePlans:a,baseSubChangePlans:r,pendingUpdate:!1,displayPrices:c.getDisplayPrices(a,t,e.promoSpec),currentTransitionPrices:c.getCurrentTransitionPrices(a,t)}}Object.defineProperty(t,"__esModule",{value:!0}),n=a.__importDefault(n),o=a.__importStar(o),t.submitFormErrorMiddleware=b,t.configureStore=function(e,t){var a=v(e),o=r.applyMiddleware(n.default,m.proBuyLogger,new g.PaymentsUXLogger(e.requestId,S.PaymentsUxPlatform.Legacy).reduxMiddleware,_.marketingEventMiddleware,b);return i.createStore(t,a,r.compose(o))},t.createState=v,t.createPageState=P,t.createFormState=C,t.createPricingState=E})),define("modules/clean/react/payments/buy/reducers/form_value_reducers",["require","exports","tslib","external/lodash","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_value_factory","modules/clean/react/payments/common/payments/reducers/reducers","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/buy/actions/buy_form_actions"],(function(e,t,a,r,n,o,i,s,l,u){"use strict";function c(e,t){var a=r.assignIn({},e.formData,t),n=e.pageState.showBuyClickError;if("ON"===e.pageState.paymentFormErrorsExperiment){var o=u.getFieldNamesToValidate(a,e.pageState.paymentFormSpec,e.pageState.existingAccountShowing,e.pageState.psd2AddressFields);n=e.pageState.showBuyClickError&&!l.isValidSubmitState(a,o)}var i=r.assignIn({},e.pageState,{hasFormError:!1,showBuyClickError:n});return r.assignIn({},e,{formData:a,pageState:i})}function d(e,t){return"UpdateFirstName"!==t.type?e:c(e,{firstName:i.FormValueFactory.createInput(t.value,e.formData.firstName)})}function p(e,t){return"UpdateLastName"!==t.type?e:c(e,{lastName:i.FormValueFactory.createInput(t.value,e.formData.lastName)})}function m(e,t){if("EmailTakenError"!==t.type)return e;var a=e.formData.email;return a.errorState=n.EmailErrorState.TakenError,a.showError=!0,c(e,{email:a})}function f(e,t){return"UpdateEmail"!==t.type?e:c(e,{email:i.FormValueFactory.createEmail(t.value,e.formData.email)})}function y(e,t){return"UpdatePassword"!==t.type?e:c(e,{password:i.FormValueFactory.createPassword(t.value,e.formData.password)})}function h(e,t){var a=e.formData.firstName.rawValue,r=e.formData.lastName.rawValue,n=e.pageState.userInfo.displayName;switch(t.type){case"UpdateCpfName":return c(e,{cpfName:i.FormValueFactory.createCpfName(t.value,e.formData.cpfName,!0)});case"UpdateFirstName":return e.formData.cpfName.manuallyEdited?e:c(e,{cpfName:i.FormValueFactory.createCpfNamePrefill(t.value,r,n,void 0,!0)});case"UpdateLastName":return e.formData.cpfName.manuallyEdited?e:c(e,{cpfName:i.FormValueFactory.createCpfNamePrefill(a,t.value,n,void 0,!0)});default:return e}}function g(e,t){if("PaymentBannerError"!==t.type)return e;var a,n=r.assignIn({},e.pageState,{paymentBannerError:t.msg});e=r.assignIn({},e,{pageState:n});var o=document.getElementById("payment-info");if(!o)return e;var i=o.getBoundingClientRect().top;return void 0===a?a=i:i<a&&(a=i),void 0!==a&&scrollBy({top:a-150,behavior:"smooth"}),e}function _(e,t){return"UpdateProductPlanType"!==t.type?e:c(e,{productPlanType:i.FormValueFactory.createProductPlanType(t.value)})}function S(e,t){return"UpdateSchedule"!==t.type?e:c(e,{scheduleId:i.FormValueFactory.createSchedule(t.value)})}function b(e,t){return"UpdateEVH"!==t.type?e:c(e,{evh:i.FormValueFactory.createCheckbox(t.value,e.formData.evh)})}function v(e,t){if("UpdateAddress"!==t.type)return e;var a="UpdateAddress"===t.type?t.value:e.formData.address.rawValue;return c(e,{address:i.FormValueFactory.createAddress(a,e.formData.address)})}function P(e,t){if("UpdatePhone"!==t.type)return e;var a="UpdatePhone"===t.type?t.value:e.formData.phone.rawValue;return c(e,{phone:i.FormValueFactory.createPhone(a,e.formData.phone)})}function C(e,t){if("UpdateName"!==t.type)return e;var a="UpdateName"===t.type?t.value:e.formData.name.rawValue;return c(e,{name:i.FormValueFactory.createName(a,e.formData.name)})}function E(e,t){if("UpdateCity"!==t.type)return e;var a="UpdateCity"===t.type?t.value:e.formData.city.rawValue;return c(e,{city:i.FormValueFactory.createCity(a,e.formData.city)})}function F(e,t){if("UpdatePaymentMethod"!==t.type&&"UpdateCountryCode"!==t.type)return e;var a=e.formData,r=e.pageState,n="UpdatePaymentMethod"===t.type?t.value:a.paymentMethod.rawValue,o=a.countryCode.formattedValue;return c(e,{paymentMethod:i.FormValueFactory.createPaymentMethod(n,o,r.paymentFormSpec,a.paymentMethod)})}function w(e,t){return"UpdateCountryCode"!==t.type?e:c(e,{countryCode:i.FormValueFactory.createCountryCode(t.value,e.formData.countryCode)})}function T(e,t){if("UpdateZipCode"!==t.type&&"UpdateCountryCode"!==t.type)return e;var a="UpdateZipCode"===t.type?t.value:e.formData.zipCode.rawValue,r=e.formData.countryCode.formattedValue;return c(e,{zipCode:i.FormValueFactory.createZipCode(a,r,e.pageState.paymentFormSpec,e.formData.zipCode)})}function N(e,t){if("UpdateVat"!==t.type&&"UpdateCountryCode"!==t.type)return e;var a="UpdateVat"===t.type?t.value.toUpperCase():e.formData.vat.rawValue,r=e.formData.countryCode.formattedValue;return c(e,{vat:i.FormValueFactory.createVat(a,r,e.formData.vat)})}function M(e,t){if("UpdateCpf"!==t.type)return e;return c(e,{cpf:i.FormValueFactory.createCpf(t.value,e.formData.cpf,!0)})}function k(e,t){return"UpdateNonce"!==t.type?e:c(e,{nonce:i.FormValueFactory.createNonce(t.value,t.creditCardIframeFields,e.formData.nonce,e.pageState.paymentFormErrorsExperiment)})}function V(e,t){return"UpdateBIN"!==t.type?e:c(e,{bin:i.FormValueFactory.createBIN(t.value,e.formData.bin)})}function x(e,t){return"UpdateAccountHolderName"!==t.type?e:c(e,{accountHolderName:i.FormValueFactory.createInput(t.value,e.formData.accountHolderName)})}function I(e,t){return"UpdateIBAN"!==t.type?e:c(e,{iban:i.FormValueFactory.createIBAN(t.value,e.formData.iban)})}function D(e,t){return"UpdateMandateSigned"!==t.type?e:c(e,{mandateSigned:i.FormValueFactory.createCheckbox(t.value,e.formData.mandateSigned)})}function B(e,t){return"UpdateTermsAndService"!==t.type?e:c(e,{termsAndService:i.FormValueFactory.createCheckbox(t.value,e.formData.termsAndService)})}function A(e,t){if("UpdateIdealBank"!==t.type)return e;var a=t.value,r=a.bankId,n=a.bankName;return c(e,{idealBankId:i.FormValueFactory.createIdealBankId(r,e.formData.idealBankId),idealBankName:i.FormValueFactory.createIdealBankName(n,e.formData.idealBankName)})}Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importStar(r),n=a.__importStar(n),t.AccountReducers=[d,p,f,y,h,m],t.PlanReducers=[_,S,b],t.PaymentReducers=[w,F,T,N,M,h,k,s.updatePayPalNonce,s.updateAdyenEncryptedCard,s.updateEncryptedCardForNetworkToken,V,s.updateBrowserInfo,s.updateThreeDsData,x,I,D,A,E,v,P,C,g],t.OrderSummaryReducers=[B],t.FormInputReducers=[U,R,O,q],t.updateFirstName=d,t.updateLastName=p,t.emailAlreadyTakenError=m,t.updateEmail=f,t.updatePassword=y,t.updateCpfName=h,t.paymentBannerError=g,t.updateProductPlanType=_,t.updateSchedule=S,t.updateEVH=b,t.updateAddress=v,t.updatePhone=P,t.updateName=C,t.updateCity=E,t.updatePaymentMethod=F,t.updateCountryCode=w,t.updateZipCode=T,t.updateVat=N,t.updateCpf=M,t.updateNonce=k,t.updateBIN=V,t.updateAccountHolderName=x,t.updateIBAN=I,t.updateMandateSigned=D,t.updateTOS=B,t.updateIdealBank=A;var L={firstName:"fname",lastName:"lname",email:"account-email",password:"password",name:"name",nonce:"iframe-holder",countryCode:"country_code",address:"address",zipCode:"zip",city:"city",accountHolderName:"owner_name",iban:"iban",mandateSigned:"mandate_signed",idealBankId:"ideal_bank",vat:"vat",cpf:"cpf"};function U(e,t){if("ShowFormFieldErrors"!==t.type)return e;var n=!1,i=a.__assign({},e.formData);e=r.assignIn({},e,{formData:i});for(var s,l=[],u=0,c=t.fieldNames;u<c.length;u++){var d=c[u],p=i[d];p&&!o.FormValueHelper.isValid(p)&&(i[d]=r.assignIn({},i[d],{showError:!0}),n=!0,l.push(d))}var m=e.pageState.showBuyClickError;if("ON"===e.pageState.paymentFormErrorsExperiment&&"SubmitForm"===t.origin){m=!0;for(var f=0,y=l;f<y.length;f++){var h=y[f];if(L[h]){var g=document.getElementById(L[h]);if(g){var _=g.getBoundingClientRect().top;void 0===s?s=_:_<s&&(s=_)}}}void 0!==s&&scrollBy({top:s-150,behavior:"smooth"})}var S=r.assignIn({},e.pageState,{hasFormError:n,showBuyClickError:m});return e=r.assignIn({},e,{pageState:S})}function R(e,t){if("SubmitFormStart"!==t.type)return e;var a=r.assignIn({},e.pageState,{submitting:!0,submitSeq:e.pageState.submitSeq+1});return r.assignIn({},e,{pageState:a})}function O(e,t){return"SubmitFormSuccess"!==t.type?e:a.__assign(a.__assign({},e),{pageState:a.__assign(a.__assign({},e.pageState),{submitFormSuccess:!0,submitting:!1})})}function q(e,t){if("SubmitFormError"!==t.type)return e;var a=r.assignIn({},e.pageState,{submitting:!1});return r.assignIn({},e,{pageState:a})}t.showFormFieldErrors=U,t.submitFormStart=R,t.submitFormSuccess=O,t.submitFormError=q})),define("modules/clean/react/payments/buy/reducers/page_reducers",["require","exports","tslib"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.existingAccountShowing=function(e,t){switch(void 0===e&&(e=!1),t.type){case"ToggleSignInModal":return(function(e,t){return void 0!==t.show?t.show:!e})(e,t);default:return e}},t.footerLinks=function(e,t){return void 0===e&&(e=[]),"SetFooterLinks"!==t.type?e:a.__spreadArrays(t.footerLinks)}})),define("modules/clean/react/payments/buy/reducers/pricing_reducers",["require","exports","tslib","external/lodash","modules/clean/react/payments/buy/helpers/pricing_value_helper"],(function(e,t,a,r,n){"use strict";function o(e,t){if("UpdateTransitionsStart"!==t.type)return e;var a=r.assignIn({},e.pricingState,{loadingPrices:!0});return r.assignIn({},e,{pricingState:a})}function i(e,t){if("UpdateTransitionsSuccess"!==t.type)return e;var a=!1;if(t.subChangePlans&&e.pricingState.subChangePlans){var n=e.pricingState.subChangePlans[0].tvm,o=t.subChangePlans[0].tvm,i=n&&n.getCurrency(),s=o&&o.getCurrency();a=e.pricingState.hasCurrencyChanged||i!==s}var l=r.assignIn({},e.pricingState,{loadingPrices:!1,hasCurrencyChanged:a,subChangePlans:t.subChangePlans,pendingUpdate:!1});return r.assignIn({},e,{pricingState:l})}function s(e,t){if("UpdateDisplayPrices"!==t.type)return e;var a=e.pageState.promoSpec,o=t.subChangePlans,i=n.getDisplayPrices(o,e.formData,a),s=r.assignIn({},e.pricingState,{displayPrices:i});return r.assignIn({},e,{pricingState:s})}function l(e,t){if("UpdateCurrentTransitionPrices"!==t.type)return e;var a=t.subChangePlans||e.pricingState.subChangePlans,o=n.getCurrentTransitionPrices(a,e.formData),i=r.assignIn({},e.pricingState,{currentTransitionPrices:o});return r.assignIn({},e,{pricingState:i})}function u(e,t){if("HasPendingUpdate"!==t.type)return e;var a=r.assignIn({},e.pricingState,{pendingUpdate:!0});return r.assignIn({},e,{pricingState:a})}Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importStar(r),t.TransitionManagementReducers=[o,i],t.PricingManagementReducers=[u,s,l],t.updateTransitionsStart=o,t.updateTransitionsSuccess=i,t.updateDisplayPrices=s,t.updateCurrentTransitionPrices=l,t.hasPendingUpdate=u})),define("modules/clean/react/payments/buy/reducers/nav_reducer",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navReducer=function(e,t){return"UpdateCurrentPage"!==t.type?e:{currentStep:t.step,productPlanType:t.productPlanType,showTrialVersion:t.showTrialVersion}}})),define("modules/clean/react/payments/buy/reducers/reducers",["require","exports","tslib","redux","modules/clean/react/payments/buy/reducers/form_value_reducers","modules/clean/react/payments/buy/reducers/pricing_reducers","modules/clean/react/payments/buy/reducers/page_reducers","modules/clean/react/payments/buy/reducers/nav_reducer","modules/clean/react/payments/buy/state/pro_store_creator"],(function(e,t,a,r,n,o,i,s,l){"use strict";function u(e){return function(t,a){return Object.assign({},t,e(t,a))}}function c(e,t){return"UpdateState"!==t.type?e:l.createState(t.props)}function d(e,t){if("LoadSubChangePlans"!==t.type)return e;var r=a.__assign({},e.pricingState);return r.baseSubChangePlans=t.baseSubChangePlans,r.subChangePlans=t.baseSubChangePlans.filter((function(t){return t.subState.planSku&&t.subState.planSku.productType===e.navState.productPlanType})),a.__assign(a.__assign({},e),{pricingState:a.__assign({},r)})}Object.defineProperty(t,"__esModule",{value:!0}),n=a.__importStar(n),o=a.__importStar(o),t.updateState=c,t.loadSubChangePlans=d,t.proBuyReducer=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(a,r){return t(e(a,r),r)}}))}.apply(void 0,a.__spreadArrays([r.combineReducers({formData:function(e,t){return void 0===e&&(e={}),e},pageState:u(r.combineReducers({existingAccountShowing:i.existingAccountShowing,footerLinks:i.footerLinks})),pricingState:function(e,t){return void 0===e&&(e={}),e},navState:u(s.navReducer)}),c,d],n.AccountReducers,n.PlanReducers,n.PaymentReducers,n.OrderSummaryReducers,n.FormInputReducers,o.TransitionManagementReducers,o.PricingManagementReducers))})),define("modules/clean/react/payments/buy/types/types",["require","exports","tslib","modules/clean/payments/skus/constants","modules/core/exception"],(function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a.__importStar(n),(function(e){e.PROFESSIONAL="PROFESSIONAL",e.PLUS="PLUS"})(t.BuyPagePlanTiers||(t.BuyPagePlanTiers={})),t.getPlanContentFromMap=function(e,t){return t!==r.ProductPlanType.PLUS&&t!==r.ProductPlanType.PROFESSIONAL&&(n.reportException({err:new Error("Unsupported plan type "+t),severity:n.SEVERITY.CRITICAL}),t=r.ProductPlanType.PROFESSIONAL),e.plansByType[t]},(function(e){e.DROPBOX_FILE_SHARING="dropbox_file_sharing",e.HELLO_SIGN="hello_sign",e.UNKNOWN_PRODUCT_LINE="unknown_product_line"})(t.ProductLine||(t.ProductLine={})),(function(e){e.PLUS="plus",e.PROFESSIONAL="professional",e.STANDARD="standard",e.ADVANCED="advanced",e.SERVER="server",e.ENTERPRISE="enterprise",e.EDUCATION="education",e.ANY_PRODUCT_FAMILY="any_product_family"})(t.ProductFamily||(t.ProductFamily={})),(function(e){e.DAY="day",e.MONTH="month",e.YEAR="year",e.UNKNOWN_CONTRACT_LENGHTH_UNIT="unknown_contract_length_unit"})(t.ContractLengthUnitType||(t.ContractLengthUnitType={})),(function(e){e.USER="user",e.TEAM="team",e.RESELLER_TEAM="reseller_team",e.UNKNOWN="unknown"})(t.CustomerType||(t.CustomerType={}))})),define("modules/clean/react/growth_pages/promo/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.NOT_APPLICABLE=0]="NOT_APPLICABLE",e[e.EXTRA_TIME_MONTHS=1]="EXTRA_TIME_MONTHS",e[e.EXPERIMENTAL_PLAN=2]="EXPERIMENTAL_PLAN",e[e.PERCENT_DISCOUNT_PRETAX=3]="PERCENT_DISCOUNT_PRETAX",e[e.TRIAL=4]="TRIAL"})(t.PromoSpecType||(t.PromoSpecType={}))})),define("modules/clean/react/payments/buy/components/plan/exp_plan_selection",["require","exports","tslib","react","modules/core/i18n","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/analytics","modules/constants/trademark"],(function(e,t,a,r,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPlanChange=function(e,a,r){var n=e.currentTarget;r=r||n.value,t.handlePlanChange(parseInt(r,10))},t.onPlanLabelClick=function(e){t.handlePlanChange(e)},t}return a.__extends(t,e),t.prototype.handlePlanChange=function(e){if(e!==this.props.productPlanType){var t=e===o.ProductPlanType.PROFESSIONAL&&!0===this.props.showTrialVersion;this.props.actions.updateSelectedPlan(e,t),this.props.updateHistory(2,e,void 0,t),s.ProEventsLogger.log(s.ProEventNames.BUY_TRY_PAGE_CHECKOUT,{type:"QuotaSwitch",selectedPlanType:e})}},t.prototype.renderPlusPlanBlock=function(){var e=this,t=this.props,a=t.showPlanNameUnderRadio,n=t.productPlanType,s=t.quotaStrings,u=r.default.createElement("span",{id:"plan-info__label--plus",className:"plan-info__label plan-info__label--bold plan-info__label--plus",onClick:function(){return e.onPlanLabelClick(o.ProductPlanType.PLUS)},"aria-hidden":"true"},s.plus),c="Dropbox "+l.TRADEMARK_PLUS;return r.default.createElement("div",{className:"plan-info__choice plan-info__plus"},r.default.createElement(i.LabeledRadioInput,{name:"plan_id",inputId:"plan-info__radio--plus",ariaLabelId:"plan-info__label--plus",className:"plan-info__radio",labelClassName:"plan-info__container",value:o.ProductPlanType.PLUS.toString(),checked:n===o.ProductPlanType.PLUS,labelSpan:u,onClickOrChange:this.onPlanChange}),r.default.createElement("div",{className:"plan-info__subtitle plan-info__subtitle--plus"},a&&c))},t.prototype.renderProfessionalPlanBlock=function(){var e=this,t=this.props,a=t.showPlanNameUnderRadio,s=t.productPlanType,u=t.quotaStrings,c=t.showTrialVersion,d=r.default.createElement("span",{id:"plan-info__label--pro",className:"plan-info__label plan-info__label--bold plan-info__label--pro",onClick:function(){return e.onPlanLabelClick(o.ProductPlanType.PROFESSIONAL)},"aria-hidden":"true"},u.professional),p="Dropbox "+l.TRADEMARK_PROFESSIONAL,m=n.intl.formatMessage({id:"H8xyuK",defaultMessage:"Try free for {pro_trial_days} days"},{pro_trial_days:this.props.proTrialDays});return r.default.createElement("div",{className:"plan-info__choice plan-info__pro"},r.default.createElement(i.LabeledRadioInput,{name:"plan_id",inputId:"plan-info__radio--pro",ariaLabelId:"plan-info__label--pro",className:"plan-info__radio",labelClassName:"plan-info__container",value:o.ProductPlanType.PROFESSIONAL.toString(),checked:s===o.ProductPlanType.PROFESSIONAL,labelSpan:d,onClickOrChange:this.onPlanChange}),r.default.createElement("div",{className:"plan-info__subtitle plan-info__subtitle--pro"},a&&p),c&&r.default.createElement("div",{className:"plan-info__subtitle plan-info__subtitle--green"},m))},t.prototype.render=function(){return r.default.createElement("div",{className:"grid__container plan-info"},this.renderPlusPlanBlock(),r.default.createElement("div",{className:"plan-info__spacer"}),this.renderProfessionalPlanBlock())},t})((r=a.__importDefault(r)).default.Component);t.ExpPlanSelection=u})),define("modules/clean/react/payments/buy/components/buy_purchase_form",["require","exports","tslib","react","react-intl","classnames","modules/core/i18n","modules/clean/raf_throttle","modules/clean/auth/common/recaptcha","modules/clean/web_timing_logger","modules/clean/analytics","modules/clean/react/payments/buy/components/account/new_account_input","modules/clean/react/payments/buy/components/plan/schedule_selection","modules/clean/react/payments/buy/components/payments/buy_payment_info_section","modules/clean/react/payments/buy/components/payments/order_summary","modules/clean/react/payments/buy/components/payments/worldpay_entity_info","modules/clean/react/payments/buy/components/plan/exp_plan_selection","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/common/form/actions/actions","modules/core/exception"],(function(e,t,a,r,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),o=a.__importDefault(o),u=a.__importStar(u),S=a.__importStar(S);var b=(function(e){function t(t){var a=e.call(this,t)||this;if(a.paymentSection=r.default.createRef(),a.variant="row",a.setCaptchaComponent=function(e){a.captchaComponent=e},a.submitForm=function(e){var t,r=((t={})[g.PaymentMethod.CreditCard]="/pro/ajax_buy",t[g.PaymentMethod.PayPal]="/pro/ajax_paypal_buy",t[g.PaymentMethod.DirectDeposit]="/payments/ajax_sepa_buy",t[g.PaymentMethod.Ideal]="/payments/ajax_ideal_buy",t);a.onSubmitProBuyForm({trigger:e,url:r[a.props.formData.paymentMethod.formattedValue]})},a.handleSubmitTryForm=function(e){e.preventDefault(),a.onSubmitFormWithCaptchaScore()},a.submitTryForm=function(e){var t;c.ProEventsLogger.log("clicked_start_free_trial_cta_"+a.props.planName.toLowerCase());var r=((t={})[g.PaymentMethod.CreditCard]="/pro/ajax_try",t[g.PaymentMethod.PayPal]="/pro/ajax_paypal_try",t);a.onSubmitProBuyForm({trigger:e,url:r[a.props.formData.paymentMethod.formattedValue]})},a.onSubmitProBuyForm=function(e){var t=e.trigger,r=e.url,n=a.props.promoSpec,o={cont:a.props.continueURI,is_pro_buy_form:!0};a.saveState(),n&&(o.is_pro_buy_form=!1,o.promo_ids=n.id,n.cashCode&&(o.code=n.cashCode)),a.props.actions.submitProBuyForm({additionalData:o,allowSubmitWithoutTOS:!1,captchaComponentRef:a.captchaComponent,handle3DsMessage:a.paymentInfoSection.getCreditCardFrame().handle3DsMessage,enableBinRouting:!0,prepareForSubmission:a.prepareForSubmission.bind(a),trigger:t,url:r,psd2AddressFields:a.props.experiments.psd2AddressFields,webPlusDirect:!!a.props.experiments.webPlusDirect,paymentPayPalV2Flow:a.props.experiments.paymentPayPalV2Flow})},a.onSubmitFormWithCaptchaScore=function(){a.captchaComponent&&a.captchaComponent.getWrappedComponent().submit()},a.resubmitForm=function(e){void 0===e&&(e=_.SubmitFormTriggerType.ButtonClick),a.props.showTrialVersion?a.submitTryForm(e):a.submitForm(e)},a.handleChange=function(){var e="none";if(window.innerWidth>=736){var t=a.state.elementPositions,r=window.pageYOffset||document.documentElement.scrollTop,n=t.columnTop-a.stickyColumnBuffer,o=t.paymentSectionTop-a.stickyColumnBuffer;e=r>=n&&r<=o?"fixed":r>o?"flex-end":"flex-start"}a.state.stickyElementState!==e&&a.setState({stickyElementState:e})},a.handleResize=function(){a.getElementPositions()},a.getElementPositions=function(){var e=a.paymentSection;if(e&&e.current){var t=a.summaryColumn.getBoundingClientRect(),r=a.stickyElement.getBoundingClientRect(),n=e.current.getBoundingClientRect(),o={columnTop:t.top+window.pageYOffset,columnLeft:t.left+window.pageXOffset,columnWidth:t.width,paymentSectionTop:n.top+window.pageYOffset,stickyElementHeight:r.height,windowWidth:document.documentElement.clientWidth};a.setState({elementPositions:o},a.handleChange)}},a.onLoginClick=function(){c.GrowthEventsLogger.log("buy_checkout_sign_in_modal",{action:"click",location:"in_product"}),a.props.actions.toggleExistingAccount()},a.handlePress=function(e){"Enter"===e.key&&e.target instanceof Element&&("INPUT"===e.target.tagName||"SELECT"===e.target.tagName)&&(e.preventDefault(),a.onSubmitFormWithCaptchaScore())},a.scrollThrottle=new s.RafThrottle(a.handleChange),a.resizeThrottle=new s.RafThrottle(a.handleResize),a.stickyColumnBuffer=50,a.state={stickyElementState:"flex-start",elementPositions:{columnTop:250,columnLeft:45,columnWidth:500,paymentSectionTop:900,stickyElementHeight:550,windowWidth:1e3},hasLoadedSubChangePlans:!1},a.props.showTrialVersion){var n=a.props.pageState.paymentFormSpec;a.props.actions.updatePaymentMethod(n.default_payment_method())}return a.variant=a.props.variant?a.props.variant:"row",a}return a.__extends(t,e),t.prototype.prepareForSubmission=function(){return this.paymentInfoSection.prepareForSubmission()},t.prototype.getValue=function(e,t){var a=sessionStorage.getItem(e);return null!=a?a:t},t.prototype.loadState=function(){try{if(void 0===sessionStorage)return;this.props.actions.updateFirstName(this.getValue("firstName",this.props.formData.firstName.rawValue)),this.props.actions.updateLastName(this.getValue("lastName",this.props.formData.lastName.rawValue)),this.props.actions.updateEmail(this.getValue("email",this.props.formData.email.rawValue)),this.props.actions.updateZipCode(this.getValue("zipCode",this.props.formData.zipCode.rawValue));var e=this.getValue("countryCode",this.props.formData.countryCode.rawValue);this.props.actions.updateCountryCode(e);var t=Number(this.getValue("paymentMethod",""+this.props.formData.paymentMethod.rawValue));this.props.pageState.paymentFormSpec.available_payment_methods_for_country(e).includes(t)&&this.props.actions.updatePaymentMethod(t),this.props.experiments.psd2AddressFields&&(this.props.actions.updateAddress(this.getValue("address",this.props.formData.address.rawValue)),this.props.actions.updateCity(this.getValue("city",this.props.formData.city.rawValue)),this.props.actions.updateName(this.getValue("name",this.props.formData.name.rawValue)))}catch(e){S.reportException({err:new Error("Error loading payment state"+e.message),severity:S.SEVERITY.NONCRITICAL})}},t.prototype.saveState=function(){try{if(void 0===sessionStorage)return;sessionStorage.setItem("firstName",this.props.formData.firstName.rawValue),sessionStorage.setItem("lastName",this.props.formData.lastName.rawValue),sessionStorage.setItem("email",this.props.formData.email.rawValue),sessionStorage.setItem("zipCode",this.props.formData.zipCode.rawValue),sessionStorage.setItem("countryCode",this.props.formData.countryCode.rawValue),sessionStorage.setItem("paymentMethod",""+this.props.formData.paymentMethod.rawValue),this.props.experiments.psd2AddressFields&&(sessionStorage.setItem("address",""+this.props.formData.address.rawValue),sessionStorage.setItem("city",""+this.props.formData.city.rawValue),sessionStorage.setItem("name",""+this.props.formData.name.rawValue))}catch(e){S.reportException({err:new Error("Error saving payment state"+e.message),severity:S.SEVERITY.NONCRITICAL})}},t.prototype.componentDidMount=function(){u.mark_time_to_interactive(),this.getElementPositions(),window.addEventListener("resize",this.resizeThrottle.request),"row"===this.variant&&window.addEventListener("scroll",this.scrollThrottle.request),"orientation"in window&&window.addEventListener("orientationchange",this.resizeThrottle.request),this.loadState()},t.prototype.componentDidUpdate=function(e,t){var a=this.props.pricingState;!this.state.hasLoadedSubChangePlans&&a.currentTransitionPrices.totalPrice&&(this.handleResize(),this.setState({hasLoadedSubChangePlans:!0}))},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollThrottle.request),window.removeEventListener("resize",this.resizeThrottle.request)},t.prototype.renderPaymentForm=function(){var e,t=this,a=this.props,o=a.ccIframeUrl,s=a.countryList,l=a.experiments,u=a.idealBanks,c=a.initialPricingStrings,f=a.locale,y=a.formData,g=a.pageState,_=a.pricingState,S=a.showTrialVersion,b=a.isFromLowSpace,v=a.trialLength,F=a.quotaStrings,w=a.updateHistory,T=a.useAUTaxInclusivePricing,N=a.showPlusTryRedesign,M=function(e){return void 0===e&&(e=!0),e?n.defineMessage({id:"uR6YMd",defaultMessage:"{index}. Choose your space"}):i.intl.formatMessage({id:"ix4+1x",defaultMessage:"Choose your space"})},k=function(e){return void 0===e&&(e=!0),e?n.defineMessage({id:"xs62vu",defaultMessage:"{index}. Choose your billing cycle"}):i.intl.formatMessage({id:"r4whCV",defaultMessage:"Choose your billing cycle"})},V=function(e){return void 0===e&&(e=!0),e?n.defineMessage({id:"DcuOhc",defaultMessage:"{index}. Create your account"}):i.intl.formatMessage({id:"QEa1gY",defaultMessage:"Create your account"})},x=function(e){return void 0===e&&(e=!0),e?n.defineMessage({id:"2/IxPb",defaultMessage:"{index}. Enter payment details"}):i.intl.formatMessage({id:"yxgpXI",defaultMessage:"Enter payment details"})};g.showPlanSwitchRadios&&(e=function(e,a){return r.default.createElement(P,{index:e,key:"choose-space-section-"+e,modifier:"plan-selection",title:M(a)},r.default.createElement(h.ExpPlanSelection,{actions:t.props.actions,productPlanType:y.productPlanType.rawValue,proTrialDays:v,quotaStrings:F,updateHistory:w,showTrialVersion:"ON"===l.ujProfessionalTrial,showPlanNameUnderRadio:b}))});var I,D=r.default.createElement(p.ScheduleSelection,{actions:this.props.actions,displayPrices:_.displayPrices,formData:y,initialPricingStrings:c,locale:f,useAUTaxInclusivePricing:T,showTrialVersion:S,showPlusTryRedesign:N,trialLength:v});if(!g.userInfo.email){var B=r.default.createElement(E,{onClick:this.onLoginClick,linkKey:"existing_account",linkText:n.defineMessage({id:"pNdul5",defaultMessage:"or <existing_account>use existing Dropbox account</existing_account>"})});I=function(e,a){return r.default.createElement(C,{index:e,key:"create-account-section-"+e,link:B,title:V(a)},r.default.createElement(d.NewAccountInput,{actions:t.props.actions,pageState:g,formData:y,paymentFormErrorsExperiment:l.paymentFormErrorsExperiment}))}}var A=r.default.createElement(m.PaymentInfoSection,{paymentSpec:g.paymentFormSpec,iframeUrl:o,idealBanks:u,countryList:s,formData:y,productPlanType:this.props.productPlanType,psd2AddressFields:this.props.experiments.psd2AddressFields,actions:this.props.actions,ref:function(e){t.paymentInfoSection=e},showTrialVersion:S,hidePaymentMethodSelector:!1,userInfo:this.props.pageState.userInfo,submitForm:this.resubmitForm,paymentFormErrorsExperiment:l.paymentFormErrorsExperiment,paymentPayPalV2Flow:l.paymentPayPalV2Flow,braintreeClientToken:this.props.braintreeClientToken,paymentBannerError:this.props.pageState.paymentBannerError}),L=[e,function(e,t){return r.default.createElement(P,{index:e,key:"billing-schedule-section-"+e,modifier:"schedule-selection",title:k(t)},D)},I,function(e,a){return r.default.createElement(P,{forwardRef:t.paymentSection,index:e,key:"payment-section-"+e,modifier:"billing",title:x(a)},A)}],U=!0;if(N){L=[I,function(e,a){return r.default.createElement(P,{forwardRef:t.paymentSection,key:"plus-try-redesign-section-"+e,modifier:"billing",title:n.defineMessage({id:"4tTSsY",defaultMessage:"Add your billing info for later"})},D,A)}],U=!1}var R=L.filter(Boolean).map((function(e,t){return e(t+1,U)}));return r.default.createElement("form",{className:"payment-form grid__container",method:"post",onKeyPress:this.handlePress},R)},t.prototype.renderOrderSummary=function(){var e=this.props,t=e.actions,a=e.buyLink,n=e.experiments,o=e.formData,i=e.pageState,s=e.planName,l=e.planNamePrefixedWithDropbox,u=e.pricingState,c=e.productPlanType,d=e.promoSpec,p=e.trialLength,m=e.showTrialVersion,y=e.taxNamesByCountry,h=e.showPlusTryRedesign;return r.default.createElement("div",{className:"grid__item"},r.default.createElement(f.OrderSummary,{actions:t,buyLink:a,formVariant:this.variant,formData:o,currentTransitionPrices:u.currentTransitionPrices,loadingPrices:u.loadingPrices,onClick:this.onSubmitFormWithCaptchaScore,onTryClick:this.handleSubmitTryForm,pageState:i,planName:s,planNamePrefixedWithDropbox:l,productPlanType:c,taxNamesByCountry:y,showTrialVersion:m,promoSpec:d,paymentFormErrorsExperiment:n.paymentFormErrorsExperiment,showPlusTryRedesign:h,trialLength:p}))},t.prototype.renderIncludedFeatures=function(){var e=this.props.includedFeaturesContent,t=this.props.experiments;if(e){var a="ON"===t.subgrowthProBuyFeaturesMobile,n=o.default({"included-features":!0,grid__container:!0,"included-features--show-on-mobile":a});return r.default.createElement("div",{className:n},r.default.createElement("p",{className:"included-features__title grid__item"},e.title),r.default.createElement("ul",{className:"included-features__list grid__container"},e.items.map((function(e,t){return r.default.createElement("li",{className:"included-features__feature grid__item--1-2",key:"included-"+t},e.text)}))))}},t.prototype.renderWorldpayEntityText=function(){return-1===t.excludeWorldpayEntityTextForCountry.indexOf(this.props.formData.countryCode.formattedValue)?r.default.createElement(y.WorldPayEntityInfo,null):null},t.prototype.render=function(){var e,t,n=this,i=this.state,s=i.elementPositions,u=i.stickyElementState,c="flex-start",d={msFlexAlign:"start"};if("flex-end"===u&&(c="flex-end",d={msFlexAlign:"end"}),"none"!==u){var p=s.paymentSectionTop-s.columnTop+s.stickyElementHeight;t=a.__assign({height:p,alignItems:c},d)}else t={alignItems:c,width:s.windowWidth,maxWidth:s.windowWidth};var m={};"fixed"===u&&(m={position:"fixed",top:this.stickyColumnBuffer,left:s.columnLeft,width:s.columnWidth});var f="column"===this.variant;return r.default.createElement("div",{className:o.default("PurchaseForm","grid__container",(e={},e["PurchaseForm--column"]=f,e))},r.default.createElement("div",{className:o.default("grid__item",{"grid__item--medium--11-24":!f})},this.renderPaymentForm()),!f&&r.default.createElement("div",{className:"grid__item--medium--1-12"}),r.default.createElement("div",{className:o.default("grid__item","PurchaseForm__summary-col",{"grid__item--medium--11-24":!f,"PurchaseForm__summary-col--full":f}),style:t,ref:function(e){n.summaryColumn=e}},r.default.createElement("div",{className:"grid__item",style:m,ref:function(e){n.stickyElement=e}},this.renderOrderSummary(),this.renderIncludedFeatures())),r.default.createElement("div",{className:"grid__item"},this.renderWorldpayEntityText()),r.default.createElement(l.Recaptcha,{ref:this.setCaptchaComponent,source:"BUY_PURCHASE_FORM",onSubmit:this.resubmitForm,email:this.props.pageState.userInfo.email||this.props.formData.email.formattedValue}))},t.excludeWorldpayEntityTextForCountry=["US","CA","MX"],t})(r.default.Component);t.BuyPurchaseForm=b;var v=function(){return r.default.createElement("hr",{"aria-hidden":"true",className:"payment-form__divider grid__item payment-form__divider"})},P=function(e){var t=e.children,n=e.forwardRef,o=e.index,s=e.modifier,l=e.title,u=a.__assign({className:"payment-form__section--"+s+" grid__item"},n?{ref:n}:{});return r.default.createElement("section",a.__assign({},u),r.default.createElement(v,null),r.default.createElement("div",{className:"payment-form__header grid__item"},"string"==typeof l?l:i.intl.formatMessage(l,{index:o})),t)},C=function(e){var t=e.index,a=e.link,n=e.title,o=e.children;return r.default.createElement("section",{className:"payment-form__section grid__item"},r.default.createElement(v,null),r.default.createElement("div",{className:"payment-form__header grid__container grid--x-bookend"},r.default.createElement("div",{className:"payment-form__header--account"},"string"==typeof n?n:i.intl.formatMessage(n,{index:t})),a),o)},E=function(e){var t,n=e.linkText,o=e.linkKey,s=e.onClick,l=e.otherFormatters,u=void 0===l?{}:l;return r.default.createElement("div",{className:"payment-form__login"},i.intl.formatMessage(n,a.__assign(((t={})[o]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("button",{"aria-label":"",key:"account-toggle",className:"account-toggle button--as-link",onClick:s,type:"button"},e)},t),u)))}})),define("modules/clean/react/payments/buy/components/account/new_account_input",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/web_timing_logger"],(function(e,t,a,r,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),o=a.__importStar(o);var u=(function(t){function u(){var e=null!==t&&t.apply(this,arguments)||this;return e.onFirstNameChanged=function(t){e.props.actions.updateFirstName(t.value)},e.onFirstNameBlur=function(t){"ON"===e.props.paymentFormErrorsExperiment&&e.props.actions.showFormFieldErrors(["firstName"],"FirstNameBlur")},e.onLastNameChanged=function(t){e.props.actions.updateLastName(t.value)},e.onLastNameBlur=function(t){"ON"===e.props.paymentFormErrorsExperiment&&e.props.actions.showFormFieldErrors(["lastName"],"LastNameBlur")},e.onEmailChanged=function(t){e.props.actions.updateEmail(t.value)},e.onEmailBlur=function(t){"ON"!==e.props.paymentFormErrorsExperiment?""!==t.value&&e.props.actions.showFormFieldErrors(["email"],"EmailBlur"):e.props.actions.showFormFieldErrors(["email"],"EmailBlur")},e.onPasswordChanged=function(t){e.props.actions.updatePassword(t.value)},e.onPasswordBlur=function(t){e.props.actions.showFormFieldErrors(["password"],"PasswordBlur")},e.toggleExistingAccount=function(){e.props.actions.toggleExistingAccount(!1)},e}return a.__extends(u,t),u.prototype.firstNameErrorString=function(){var e=this.props.formData.firstName;return e.showError&&!i.FormValueHelper.isValid(e)?n.intl.formatMessage({id:"4Vv4Iv",defaultMessage:"Please enter a valid first name."}):""},u.prototype.lastNameErrorString=function(){var e=this.props.formData.lastName;return e.showError&&!i.FormValueHelper.isValid(e)?n.intl.formatMessage({id:"pr57uQ",defaultMessage:"Please enter a valid last name."}):""},u.prototype.emailErrorMessage=function(){var e=this,t=this.props.formData.email;if(t.showError)switch(t.errorState){case o.EmailErrorState.Empty:return n.intl.formatMessage({id:"5hturn",defaultMessage:"Please enter an email address."});case o.EmailErrorState.NoAt:return n.intl.formatMessage({id:"579xSI",defaultMessage:"An email address must contain a single @"});case o.EmailErrorState.BadUsername:var a=t.formattedValue.split("@")[0];return n.intl.formatMessage({id:"3kb11u",defaultMessage:"The username portion of the email address is invalid (the portion before the @: {username})."},{username:a});case o.EmailErrorState.BadDomain:var i=t.formattedValue.split("@")[1];return""===i?n.intl.formatMessage({id:"LDcGLP",defaultMessage:"The domain portion of the email address is invalid (the portion after the @)."}):n.intl.formatMessage({id:"Qo7TLX",defaultMessage:"The domain portion of the email address is invalid (the portion after the @: {domain})."},{domain:i});case o.EmailErrorState.TakenWarning:return r.default.createElement("span",null,n.intl.formatMessage({id:"AnTrsf",defaultMessage:"This e-mail is already taken."}));case o.EmailErrorState.TakenError:return r.default.createElement("span",null,n.intl.formatMessage({id:"5kny8Y",defaultMessage:"This e-mail is already taken. <a_signin>Sign in</a_signin> or <a_forgot>reset your password</a_forgot>."},{a_signin:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{key:"a-signin",className:"login-register-switch-link",onClick:e.toggleExistingAccount},t)},a_forgot:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("a",{key:"a-forgot",href:"/forgot"},e)}}))}return""},u.prototype.passwordErrorString=function(){return this.props.formData.password.showError?n.intl.formatMessage({id:"6p7phI",defaultMessage:"Passwords must be 6 characters or more."}):""},u.prototype.renderPasswordStrengthMeter=function(e){return this.state&&this.state.passwordStrengthMeter?r.default.createElement(this.state.passwordStrengthMeter,{password:e}):void 0},u.prototype.componentDidMount=function(){return a.__awaiter(this,void 0,void 0,(function(){var t;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,l.waitForTTI()];case 1:return r.sent(),[4,new Promise((function(t,a){e(["modules/clean/components/password_strength_meter"],t,a)})).then(a.__importStar)];case 2:return t=r.sent().PasswordStrengthMeter,this.setState({passwordStrengthMeter:t}),[2]}}))}))},u.prototype.render=function(){var e=this.props,t=e.formData,a=e.pageState,o=n.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}),i=n.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"});return r.default.createElement("div",{className:"grid__item account-info grid__item--large--11-12"},r.default.createElement("div",{className:"account-info__name grid__container grid--x-bookend grid--y-top"},r.default.createElement(s.LabeledTextInput,{name:"fname",autocomplete:a.autocomplete?"given-name":"off",labelText:n.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"}),containerClassName:"grid__item--fluid grid__item--margin-right--1-24",value:t.firstName.rawValue,onBlur:this.onFirstNameBlur,onChange:this.onFirstNameChanged,errorText:this.firstNameErrorString()}),r.default.createElement(s.LabeledTextInput,{name:"lname",autocomplete:a.autocomplete?"family-name":"off",labelText:n.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"}),containerClassName:"grid__item--fluid",value:t.lastName.rawValue,onBlur:this.onLastNameBlur,onChange:this.onLastNameChanged,errorText:this.lastNameErrorString()})),r.default.createElement("div",{className:"account-info__cred grid__container grid--x-bookend grid--y-top"},r.default.createElement(s.LabeledTextInput,{name:"account-email",autocomplete:a.autocomplete?"email":"off",type:"email",labelText:o,containerClassName:"grid__item--fluid grid__item--margin-right--1-24",value:t.email.rawValue,onBlur:this.onEmailBlur,onChange:this.onEmailChanged,errorText:this.emailErrorMessage()}),r.default.createElement("div",{className:"account-info__password grid__item--fluid"},this.renderPasswordStrengthMeter(t.password.rawValue),r.default.createElement(s.LabeledTextInput,{name:"password",type:"password",autocomplete:"new-password",labelText:i,containerClassName:"grid__item",value:t.password.rawValue,onChange:this.onPasswordChanged,onBlur:this.onPasswordBlur,errorText:this.passwordErrorString()}))))},u})(r.default.Component);t.NewAccountInput=u})),define("modules/clean/react/payments/buy/components/plan/schedule_selection",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/inputs/inputs"],(function(e,t,a,r,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n);var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onScheduleChange=function(e,a,r){var n=e.currentTarget;r=r||n.value;var o=parseInt(r,10);o!==t.props.formData.scheduleId.formattedValue&&t.props.actions.updateSchedule(o)},t.onPlanLabelClick=function(e){e!==t.props.formData.scheduleId.formattedValue&&t.props.actions.updateSchedule(e)},t.getFreeForTrialDaysThenPriceSubtitle=function(e){return o.intl.formatMessage({id:"Usb6hw",defaultMessage:"{count, plural, one{<free>Free</free> for {count} day,{br}then {price}} other{<free>Free</free> for {count} days,{br}then {price}}}"},{free:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("span",{className:"plan-info__savings plan-info__savings--zeromargin"},e)},count:t.props.trialLength,br:r.default.createElement("br",null),price:e})},t}return a.__extends(t,e),t.prototype.getPricingStrings=function(){var e,t,a,r,n,i,s,l=this.props.initialPricingStrings;if(l)e=o.intl.formatMessage({id:"6tPzCg",defaultMessage:"{price} / year"},{price:l.yearlyPrice}),r=o.intl.formatMessage({id:"KTUKSV",defaultMessage:"{price} per year. Save {savings}"},{price:l.yearlyPrice,savings:l.yearlySavings}),t=o.intl.formatMessage({id:"4IZRvO",defaultMessage:"{price} / month"},{price:l.monthlyPrice}),n=o.intl.formatMessage({id:"NCPpB8",defaultMessage:"{price} per month"},{price:l.monthlyPrice}),a=o.intl.formatMessage({id:"6tPzCg",defaultMessage:"{price} / year"},{price:l.yearlyWithoutSavings}),i=o.intl.formatMessage({id:"4IZRvO",defaultMessage:"{price} / month"},{price:l.annualPriceAsMonthly}),s=o.intl.formatMessage({id:"pmkY4K",defaultMessage:"{price} per month when billed yearly"},{price:l.annualPriceAsMonthly});else{var u=this.props.displayPrices,c=u.yearlyPrice,d=u.monthlyPrice,p=u.yearlySavings,m=u.taxInclusiveYearlyPrice,f=u.taxInclusiveMonthlyPrice,y=u.taxInclusiveYearlySavings;this.props.useAUTaxInclusivePricing?(e=o.intl.formatMessage({id:"6tPzCg",defaultMessage:"{price} / year"},{price:m?m.formatCurrency():""}),r=o.intl.formatMessage({id:"fTrTN2",defaultMessage:"{price} per year. Save {savings}. Prices include GST"},{price:m?m.formatCurrency():"",savings:y?y.formatCurrency():""}),t=o.intl.formatMessage({id:"4IZRvO",defaultMessage:"{price} / month"},{price:f?f.formatCurrency():""}),n=o.intl.formatMessage({id:"/Ww02p",defaultMessage:"{price} per month. Includes GST"},{price:f?f.formatCurrency():""}),a=o.intl.formatMessage({id:"6tPzCg",defaultMessage:"{price} / year"},{price:f?f.multiply(12).formatCurrency():""}),i=o.intl.formatMessage({id:"4IZRvO",defaultMessage:"{price} / month"},{price:m?m.divide(12).formatCurrency():""}),s=o.intl.formatMessage({id:"pmkY4K",defaultMessage:"{price} per month when billed yearly"},{price:m?m.divide(12).formatCurrency():""})):(e=o.intl.formatMessage({id:"6tPzCg",defaultMessage:"{price} / year"},{price:c?c.formatCurrency():""}),r=o.intl.formatMessage({id:"KTUKSV",defaultMessage:"{price} per year. Save {savings}"},{price:c?c.formatCurrency():"",savings:p?p.formatCurrency():""}),t=o.intl.formatMessage({id:"4IZRvO",defaultMessage:"{price} / month"},{price:d?d.formatCurrency():""}),n=o.intl.formatMessage({id:"NCPpB8",defaultMessage:"{price} per month"},{price:d?d.formatCurrency():""}),a=o.intl.formatMessage({id:"6tPzCg",defaultMessage:"{price} / year"},{price:d?d.multiply(12).formatCurrency():""}),i=o.intl.formatMessage({id:"4IZRvO",defaultMessage:"{price} / month"},{price:c?c.divide(12).formatCurrency():""}),s=o.intl.formatMessage({id:"pmkY4K",defaultMessage:"{price} per month when billed yearly"},{price:c?c.divide(12).formatCurrency():""}))}return{yearlyPrice:e,yearlyPriceAx:r,monthlyPrice:t,monthlyPriceAx:n,yearlyPriceNoSavings:a,yearlyGstIncluded:o.intl.formatMessage({id:"iBp3QN",defaultMessage:"(prices include GST)"}),monthlyGstIncluded:o.intl.formatMessage({id:"XfS7WN",defaultMessage:"(includes GST)"}),yearlyPricePerMonth:i,yearlyPricePerMonthAx:s}},t.prototype.renderYearlyPlanBlock=function(){var e=this,t=this.props.formData.scheduleId.formattedValue,a=this.getPricingStrings(),l=a.yearlyPrice,u=a.yearlyPriceAx,c=a.yearlyPriceNoSavings,d=a.yearlyGstIncluded,p=a.yearlyPricePerMonth,m=a.yearlyPricePerMonthAx,f=a.monthlyGstIncluded,y=n.default({"plan-info__savings":!0,"plan-info__savings--strike":"en"===this.props.locale}),h="en"===this.props.locale?c:o.intl.formatMessage({id:"rOFcNI",defaultMessage:"(includes 2 free months)"}),g=this.props.formData.productPlanType.rawValue===i.ProductPlanType.PLUS&&!this.props.showTrialVersion&&!this.props.showServerViewVersion,_=r.default.createElement("span",{id:"plan-info__label--yearly",className:"plan-info__label plan-info__label--yearly",onClick:function(){return e.onPlanLabelClick(i.ScheduleId.YEARLY)},"aria-hidden":"true"},o.intl.formatMessage({id:"VeKS9s",defaultMessage:"Billed Yearly"})),S=g?p:l;return this.props.showPlusTryRedesign&&(S=this.getFreeForTrialDaysThenPriceSubtitle(l),y=n.default({"plan-info__subtitle":!0,"plan-info__savings--strike":"en"===this.props.locale})),r.default.createElement("div",{className:"plan-info__choice plan-info__yearly"},r.default.createElement(s.LabeledRadioInput,{name:"schedule_id",inputId:"plan-info__radio--yearly",ariaLabelId:"plan-info__label--yearly",className:"plan-info__radio",labelClassName:"plan-info__container",value:i.ScheduleId.YEARLY.toString(),checked:t===i.ScheduleId.YEARLY,labelSpan:_,onClickOrChange:this.onScheduleChange}),r.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},S),r.default.createElement("span",{className:"ax-visually-hidden"},g?m:u),!g&&r.default.createElement("div",{"aria-hidden":"true",className:y},h),this.props.useAUTaxInclusivePricing&&r.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},g?f:d))},t.prototype.renderMonthlyPlanBlock=function(){var e=this,t=this.props.formData.scheduleId.formattedValue,a=this.getPricingStrings(),n=a.monthlyPrice,l=a.monthlyPriceAx,u=a.monthlyGstIncluded,c=r.default.createElement("span",{id:"plan-info__label--monthly",className:"plan-info__label plan-info__label--monthly",onClick:function(){return e.onPlanLabelClick(i.ScheduleId.MONTHLY)},"aria-hidden":"true"},o.intl.formatMessage({id:"Fb6V6v",defaultMessage:"Billed Monthly"})),d=n;return this.props.showPlusTryRedesign&&(d=this.getFreeForTrialDaysThenPriceSubtitle(n)),r.default.createElement("div",{className:"plan-info__choice plan-info__monthly"},r.default.createElement(s.LabeledRadioInput,{name:"schedule_id",inputId:"plan-info__radio--monthly",ariaLabelId:"plan-info__label--monthly",className:"plan-info__radio",labelClassName:"plan-info__container",value:i.ScheduleId.MONTHLY.toString(),checked:t===i.ScheduleId.MONTHLY,labelSpan:c,onClickOrChange:this.onScheduleChange}),r.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},d),r.default.createElement("span",{className:"ax-visually-hidden"},l),this.props.useAUTaxInclusivePricing&&r.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},u))},t.prototype.render=function(){return r.default.createElement("div",{className:"grid__container plan-info"},this.renderYearlyPlanBlock(),r.default.createElement("div",{className:"plan-info__spacer"}),this.renderMonthlyPlanBlock())},t})(r.default.Component);t.ScheduleSelection=l})),define("modules/clean/react/payments/buy/components/payments/cpf_tooltip",["require","exports","tslib","react","modules/core/i18n"],(function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=n.intl.formatMessage({id:"1ONP6O",defaultMessage:"The Cadastro de Pessoas FÃ­sicas (CPF) is the the Brazilian individual taxpayer registry identification number. It has 11 digits and can be found on your CPF card. It consists of numbers, dots and a dash, as in the following example: 100.001.101-00."}),t=n.intl.formatMessage({id:"VsWgR6",defaultMessage:"The Cadastro Nacional da Pessoa JurÃ­dica, or most commonly known as CNPJ, is a number that identifies legal entities and other legal arrangements at the Federal Revenue Service of Brazil. It has functions similar to those of the CPF, the only difference being that it is unique to the use of legal entities. It is a 14-digit number with a certain format, like in the following example: 00.000.000/0001-00"});return r.default.createElement("div",{className:"cpf-tooltip-contents"},r.default.createElement("p",{className:"cpf-tooltip-contents__header"},n.intl.formatMessage({id:"b1XaAp",defaultMessage:"What is CPF?"})),r.default.createElement("p",null,e),r.default.createElement("p",{className:"cpf-tooltip-contents__header"},n.intl.formatMessage({id:"grlpui",defaultMessage:"What is CNPJ?"})),r.default.createElement("p",null,t))},t})((r=a.__importDefault(r)).default.Component);t.CPFTooltip=o})),define("modules/clean/react/payments/buy/components/payments/buy_payment_info_section",["require","exports","tslib","react","classnames","modules/clean/react/tooltip","modules/clean/react/image","modules/clean/static_urls","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/skus/constants","modules/clean/payments/validation","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/buy/components/payments/ideal_form","modules/clean/react/payments/buy/components/payments/payment_method_selector","modules/clean/react/payments/buy/components/payments/cpf_tooltip","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_frame","modules/clean/react/payments/checkout/components/payment_method_form/direct_debit_form","modules/clean/react/payments/checkout/components/payment_method_form/address_form","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_purchase_full_name","modules/clean/react/payments/common/constants","modules/core/exception","dig-components/icons/src/ui-icon/line/warning","dig-components/icons"],(function(e,t,a,r,n,o,i,s,l,u,c,d,p,m,f,y,h,g,_,S,b,v,P,C,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n),P=a.__importStar(P);var F=(function(t){function F(){var r=null!==t&&t.apply(this,arguments)||this;return r.createPaypalBtn=function(){var t=r.props.braintreeClientToken?r.props.braintreeClientToken:"",n=r.props.actions.updatePayPalNonce;Promise.all([new Promise((function(t,a){e(["braintree-web-client"],t,a)})).then(a.__importStar),new Promise((function(t,a){e(["braintree-web-paypal"],t,a)})).then(a.__importStar),new Promise((function(t,a){e(["paypal-api-checkout"],t,a)})).then(a.__importStar)]).then((function(e){var a=e[0],r=e[1],o=e[2].default;a.create({authorization:t},(function(e,t){if(e)P.reportException({err:new Error("Error creating Braintree client: "+e),severity:P.SEVERITY.CRITICAL});else{var a=o;r.create({client:t},(function(e,t){e?P.reportException({err:new Error("Error creating PayPal Checkout: "+e),severity:P.SEVERITY.CRITICAL}):a.Button.render({env:"production",style:{color:"gold",height:35,label:"paypal",shape:"rect",size:"responsive",tagline:!1},funding:{allowed:[a.FUNDING.CARD],disallowed:[a.FUNDING.CREDIT]},payment:function(){return t.createPayment({flow:"vault",enableShippingAddress:!1})},onAuthorize:function(e,a){return t.tokenizePayment(e,(function(e,t){n(t.nonce,t.details.email)}))},onCancel:function(e){},onError:function(e){P.reportException({err:new Error("PayPal Checkout error: "+e),severity:P.SEVERITY.CRITICAL})}},"#paypal-button").then((function(){}))}))}}))}))},r.clearPayPalNonce=function(e){e.preventDefault(),r.props.actions.updatePayPalNonce("","")},r.onVatBlur=function(e){"ON"===r.props.paymentFormErrorsExperiment&&r.props.actions.showFormFieldErrors(["vat"],"VatBlur"),r.props.actions.blurVat(e.value)},r.onVatChange=function(e){r.props.actions.updateVat(e.value)},r.onCpfBlur=function(e){"ON"===r.props.paymentFormErrorsExperiment&&r.props.actions.showFormFieldErrors(["cpf"],"CpfBlur"),r.props.actions.blurCpf(e.value)},r.onCpfChange=function(e){r.props.actions.updateCpf(e.value)},r}return a.__extends(F,t),F.prototype.componentDidMount=function(){this.props.actions.updateHistory&&this.props.actions.updateHistory(),"ON"===this.props.paymentPayPalV2Flow&&this.props.braintreeClientToken&&this.createPaypalBtn()},F.prototype.prepareForSubmission=function(){return this.props.formData.paymentMethod.formattedValue===l.PaymentMethod.CreditCard?this.creditCardFrame.tokenize():Promise.resolve(!0)},F.prototype.getCreditCardFrame=function(){return this.creditCardFrame},F.prototype.vatErrorString=function(){var e=this.props.formData.vat;return!m.FormValueHelper.isValid(e)&&e.showError?d.intl.formatMessage({id:"iRjYtd",defaultMessage:"Please enter a valid VAT number (ex: {examples})."},{examples:c.getVatExamples(this.props.formData.countryCode.formattedValue).join(", ")}):""},F.prototype.cpfErrorString=function(){var e=this.props.formData.cpf;return!m.FormValueHelper.isValid(e)&&e.showError?d.intl.formatMessage({id:"MQDRWx",defaultMessage:"Please enter a valid CPF number."}):""},F.prototype.renderLocationFields=function(){return r.default.createElement("div",{className:"grid__item"},r.default.createElement(S.AddressForms,{paymentSpec:this.props.paymentSpec,formData:this.props.formData,actions:this.props.actions,countryList:this.props.countryList,psd2AddressFields:this.props.psd2AddressFields,showServerViewVersion:this.props.showServerViewVersion,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}),this.renderVatFields(),this.renderCpfInput())},F.prototype.renderVatFields=function(){var e=null;if(this.props.paymentSpec.should_show_vat_for_country(this.props.formData.countryCode.formattedValue)&&this.props.productPlanType===u.ProductPlanType.PROFESSIONAL){var t=this.props.formData.vat.errorState&&this.props.formData.vat.showError,a=c.getVatPrefix(this.props.formData.countryCode.formattedValue),o=n.default({"payment-info__vat-input":!0,"payment-info__vat-input--valid":""!==this.props.formData.vat.formattedValue&&m.FormValueHelper.isValid(this.props.formData.vat)}),i=void 0;"ON"===this.props.paymentFormErrorsExperiment&&(i=this.vatErrorString()),e=r.default.createElement(p.LabeledTextInput,{className:"payment-info__vat",inputClassName:o,containerClassName:"grid__item vat-container",name:"vat",labelText:d.intl.formatMessage({id:"eZAuK1",defaultMessage:"VAT number (optional)"}),placeholder:a,hasError:Boolean(t),value:this.props.formData.vat.rawValue,onBlur:this.onVatBlur,onChange:this.onVatChange,errorText:i})}return e},F.prototype.renderCpfInput=function(){var e=null;if(this.props.paymentSpec.should_require_cpf(this.props.formData.countryCode.formattedValue,this.props.formData.paymentMethod.formattedValue)){var t=this.props.formData.cpf.errorState&&this.props.formData.cpf.showError,a=n.default({"payment-info__cpf-input":!0,"payment-info__cpf-input--valid":""!==this.props.formData.cpf.formattedValue&&m.FormValueHelper.isValid(this.props.formData.cpf)}),l=r.default.createElement("span",null,d.intl.formatMessage({id:"Z1BdZ2",defaultMessage:"CPF/CNPJ"}),r.default.createElement(o.Tooltip,{position:o.TooltipPosition.RIGHT,tooltip_contents:r.default.createElement(h.CPFTooltip,null),is_focusable:!0},r.default.createElement(i.Image,{className:"cpf-tooltip-icon",src:s.static_url("/static/images/payments/buy/rebrand-info-vflRPzJtZ.png"),srcHiRes:s.static_url("/static/images/payments/buy/rebrand-info@2x-vflc1SGxi.png"),alt:d.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"}),width:15,height:15}))),u=d.intl.formatMessage({id:"+9XYcz",defaultMessage:"e.g. 100.001.101-00"}),c=void 0;"ON"===this.props.paymentFormErrorsExperiment&&(c=this.cpfErrorString()),e=r.default.createElement("div",{className:"grid__item"},r.default.createElement(p.LabeledTextInput,{className:"",inputClassName:a,containerClassName:"grid__item payment-info__cpf",name:"cpf",labelText:l,hasError:Boolean(t),value:this.props.formData.cpf.rawValue,onBlur:this.onCpfBlur,onChange:this.onCpfChange,placeholder:u,errorText:c}))}return e},F.prototype.showPSD2FieldsToUser=function(){return!0===this.props.psd2AddressFields&&this.props.formData.paymentMethod.formattedValue===l.PaymentMethod.CreditCard&&this.props.paymentSpec.should_show_PSD2_address_fields_for_country(this.props.formData.countryCode.formattedValue)},F.prototype.renderPaymentMethodSelector=function(){var e=this.props,t=e.paymentSpec,a=e.formData,n=e.showTrialVersion;return r.default.createElement(y.PaymentMethodSelector,{paymentSpec:t,paymentMethod:a.paymentMethod.rawValue,updatePaymentMethod:this.props.actions.updatePaymentMethod,countryCode:a.countryCode.rawValue,zipCode:a.zipCode.rawValue,showTrialVersion:n,fullWidth:!1})},F.prototype.renderErrors=function(){var e=this.props,t=e.formData,a=e.paymentSpec,n=[];if("ON"===this.props.paymentFormErrorsExperiment)return null;t.nonce.showError&&t.paymentMethod.formattedValue===l.PaymentMethod.CreditCard&&(t.nonce.isCCNValid||n.push(d.intl.formatMessage({id:"RH49yN",defaultMessage:"Please enter a valid credit card number."})),t.nonce.isCCodeValid||n.push(d.intl.formatMessage({id:"CyoTeR",defaultMessage:"Please enter a valid CVV."})),t.nonce.isCCExpValid||n.push(d.intl.formatMessage({id:"IRFEz7",defaultMessage:"Please enter a valid expiration date."}))),a.showPSD2FieldsToUser(t.paymentMethod.formattedValue,t.countryCode.formattedValue,!!this.props.psd2AddressFields)&&(t.address.errorState&&t.address.showError&&n.push(v.AddressErrorMessage),t.name.errorState&&t.name.showError&&n.push(v.NameErrorMessage),t.city.errorState&&t.city.showError&&n.push(v.CityErrorMessage)),t.paymentMethod.formattedValue===l.PaymentMethod.DirectDeposit&&(t.accountHolderName.errorState&&t.accountHolderName.showError&&n.push(d.intl.formatMessage({id:"lVEpBU",defaultMessage:"Please enter the account holderâ€™s name."})),t.iban.errorState&&t.iban.showError&&n.push(d.intl.formatMessage({id:"jqBL8f",defaultMessage:"Please enter a valid bank account number."}))),t.paymentMethod.formattedValue===l.PaymentMethod.Ideal&&t.idealBankId.errorState&&t.idealBankId.showError&&n.push(d.intl.formatMessage({id:"Lly4lc",defaultMessage:"Please select your bank."}));var o=v.ZipCodeErrorMessage;return!m.FormValueHelper.isValid(t.zipCode)&&t.zipCode.showError&&n.push(o),a.should_show_vat_for_country(t.countryCode.formattedValue)&&t.vat.errorState&&n.push(this.vatErrorString()),t.cpf.errorState&&n.push(this.cpfErrorString()),n.length>0?r.default.createElement("div",{className:"payment-info__errors"},n.map((function(e){return r.default.createElement("div",{key:e},e)}))):null},F.prototype.render=function(){var e=this,t=this.props,n=t.actions,o=t.formData,i=t.idealBanks,s=t.hidePaymentMethodSelector,u=this.renderLocationFields(),c=u;o.paymentMethod.formattedValue===l.PaymentMethod.DirectDeposit?c=r.default.createElement(_.DirectDebitForm,{locationFields:u,formData:o,actions:n,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}):o.paymentMethod.formattedValue===l.PaymentMethod.Ideal&&(c=r.default.createElement(f.IdealForm,{locationFields:u,formData:o,actions:n,idealBanks:i,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}));var p,m,y="payment-info grid__container",h="grid__item grid__item--large--3-4";return"ON"===this.props.paymentFormErrorsExperiment&&(y="payment-info grid__container inline-errors",h="grid__item grid__item--large--11-12"),"ON"===this.props.paymentPayPalV2Flow&&(p=r.default.createElement("span",{className:"paypal-button-container",hidden:o.paymentMethod.formattedValue!==l.PaymentMethod.PayPal},r.default.createElement("span",{className:"paypal-button-start",hidden:""!==o.payPalNonce.formattedValue},r.default.createElement("label",{className:"input__label"},d.intl.formatMessage({id:"Xkz5XK",defaultMessage:"Sign into PayPal to continue with this payment method:"})),r.default.createElement("div",{id:"paypal-button"})),r.default.createElement("span",{className:"paypal-button-end",hidden:""===o.payPalNonce.formattedValue},r.default.createElement("span",{id:"paypal-button-account-email"},o.payPalNonce.email),r.default.createElement("br",null),r.default.createElement("a",{href:"#",onClick:this.clearPayPalNonce},d.intl.formatMessage({id:"TFnOYM",defaultMessage:"Change PayPal account"}))),r.default.createElement("span",{hidden:!1===o.payPalNonce.showError},r.default.createElement("label",{className:"input__label--error"},d.intl.formatMessage({id:"3z459e",defaultMessage:"Please select your PayPal account."}))))),this.props.paymentBannerError&&(m=r.default.createElement("div",{className:"payment-error-div "+y},r.default.createElement("div",{className:"grid__item--fluid",style:{maxWidth:"30px",marginRight:"5px",marginLeft:"5px"}},r.default.createElement(E.UIIcon,{src:C.WarningLine,size:"large"})),r.default.createElement("div",{className:"grid__item--fluid grid__item--margin-right--1-24 payment-error-text"},this.props.paymentBannerError))),r.default.createElement("div",{id:"payment-info",className:y},m,!s&&this.renderPaymentMethodSelector(),r.default.createElement("div",{className:h},r.default.createElement(b.CreditCardPurchaseFullNameIfPsd2,a.__assign({},this.props)),r.default.createElement(g.CreditCardFrame,{iframeUrl:this.props.iframeUrl,hidden:o.paymentMethod.formattedValue!==l.PaymentMethod.CreditCard,actions:this.props.actions,ref:function(t){e.creditCardFrame=t},nonce:o.nonce,bin:o.bin,showServerViewVersion:this.props.showServerViewVersion,submitForm:this.props.submitForm,getHeightFromIframe:"ON"===this.props.paymentFormErrorsExperiment,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}),p,c),this.renderErrors())},F})(r.default.Component);t.PaymentInfoSection=F})),define("modules/clean/react/payments/buy/components/payments/order_summary",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/react/payments/buy/components/payments/tos","modules/clean/react/rebrand/elements/rebrand_buttons","spectrum/button","modules/core/browser","modules/clean/analytics","modules/clean/payments/skus/constants","modules/clean/payments/skus/constants","modules/clean/payments/cash"],(function(e,t,a,r,n,o,i,s,l,u,c,d,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n),u=a.__importStar(u);var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickRedirectToBuy=function(){var e=t.props.showServerViewVersion;c.ProEventsLogger.log("clicked_buy_directly_cta",{},void 0,e),u.redirect(t.props.buyLink)},t}return a.__extends(t,e),t.prototype.getFormattedTaxLines=function(){var e=this.props.currentTransitionPrices,t=e.taxPercentage,a=e.taxAmount;if(a&&a.amount&&t&&t>0){var r=this.getTaxNameForCountry(),n=o.intl.formatNumber(t/100,{style:"percent",maximumFractionDigits:2});return[{taxName:r,formattedAmount:a.toString(),formattedPercent:n}]}return[]},t.prototype.getTaxNameForCountry=function(){return this.props.taxNamesByCountry?this.props.taxNamesByCountry[this.props.currentTransitionPrices.taxCountryCode||"null"]:o.intl.formatMessage({id:"m+cPZv",defaultMessage:"Tax"})},t.prototype.renderTaxElement=function(){var e=this.props.showTrialVersion?"order-summary__strike":"";return this.getFormattedTaxLines().map((function(t){return r.default.createElement("div",{key:t.taxName,className:"order-summary__tax grid__item"},o.intl.formatMessage({id:"xKOTiz",defaultMessage:"{tax_name} ({tax_percent}):"},{tax_name:t.taxName,tax_percent:t.formattedPercent}),"Â ",r.default.createElement("span",{className:e},o.intl.formatMessage({id:"GsCdhc",defaultMessage:"{tax_amount}"},{tax_amount:t.formattedAmount})))}))},t.prototype.renderWithheldTaxElement=function(){var e=this.props.currentTransitionPrices,t=e.withheldTaxAmount,a=e.withheldTaxPercentage,n=this.getTaxNameForCountry();if(t&&t.amount&&a&&a>0){var i=t.toString();return r.default.createElement("div",{className:"order-summary__withheld_tax grid__item"},o.intl.formatMessage({id:"n/tZow",defaultMessage:"Withheld {tax_name} ({tax_percent, number, ::percent .##}): {tax_amount}"},{tax_name:n,tax_percent:a/100,tax_amount:i}))}},t.prototype.renderTotalPriceElement=function(e){var t=this.props.showPlusTryRedesign,n=e.toString(),i=r.default.createElement("div",{className:"order-summary__price grid__item"},o.intl.formatMessage({id:"bieOtj",defaultMessage:"Billed Now: {total_price}"},{total_price:n})),s={strike:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("span",{className:"order-summary__strike order-summary__padding-left"},e)},free:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("span",{className:"order-summary__free-price order-summary__padding-left"},e)}},l=r.default.createElement("div",{className:"order-summary__price grid__item"},o.intl.formatMessage({id:"ag6+Eh",defaultMessage:"Charged Now: <strike>{total_price}</strike> <free>FREE</free>"},a.__assign(a.__assign({},s),{total_price:n})));return t&&(l=r.default.createElement("div",{className:"order-summary__price grid__item"},o.intl.formatMessage({id:"VO8//u",defaultMessage:"Billed now: <free>{free_price}</free>"},a.__assign(a.__assign({},s),{free_price:new m.Cash(0,e.currency).toString()})))),this.props.showTrialVersion?l:i},t.prototype.renderCTA=function(){var e=this.props,t=e.loadingPrices,a=e.pageState,i=e.showTrialVersion,u=e.showServerViewVersion,c=e.showPlusTryRedesign,d=e.trialLength,p=e.onTryClick,m=e.onClick,f=t||a.submitting,y=n.default({"button--submit":!0,"button--loading":f,grid__item:!0,"order-summary__button":!0}),h=i?o.intl.formatMessage({id:"d3yeCH",defaultMessage:"Start your free trial"}):o.intl.formatMessage({id:"w4hgo7",defaultMessage:"Buy now"});u&&!i&&(h=o.intl.formatMessage({id:"7bfujo",defaultMessage:"Get {plan} now"},{plan:this.props.planNamePrefixedWithDropbox})),c&&(h=o.intl.formatMessage({id:"3YYr3i",defaultMessage:"Try free for {trialLength} days"},{trialLength:d}));var g=h;f&&(g=r.default.createElement("div",{className:"loader"},r.default.createElement("span",{className:"loader__dot"}),r.default.createElement("span",{className:"loader__dot"}),r.default.createElement("span",{className:"loader__dot"})));var _=i?p:m;return u?r.default.createElement(l.Button,{"aria-label":h,variant:"primary",size:"default",type:"submit",className:y,onClick:_,disabled:f,"data-uxa-log":"order-summary-submit-button"},g):r.default.createElement(s.RebrandButton,{ariaLabel:h,importance:"primary",size:"medium",type:"submit",className:y,onClick:_,disabled:f,"data-uxa-log":"order-summary-submit-button"},g)},t.prototype.renderError=function(){var e=this.props.pageState.hasFormError;"ON"===this.props.paymentFormErrorsExperiment&&(e=!!this.props.pageState.showBuyClickError);var t=n.default({"form-error":!0,"form-error--enabled":e});return r.default.createElement("p",{className:t,"aria-live":"assertive"},o.intl.formatMessage({id:"auVIoT",defaultMessage:"Please correct the form errors and try again"}))},t.prototype.render=function(){var e,t,a=this.props,s=a.actions,u=a.formData,c=a.showServerViewVersion,m=a.promoSpec,f=this.props.currentTransitionPrices.totalPrice,y=this.props.currentTransitionPrices.currency;f&&(e=this.renderTotalPriceElement(f),t=f.formatCurrency());var h,g=this.renderTaxElement(),_=this.renderWithheldTaxElement();y&&t&&(h=r.default.createElement(i.TermsOfService,{actions:s,currency:y,formData:u,totalPrice:t,showTrialVersion:this.props.showTrialVersion,showServerViewVersion:c||!1,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}));var S=this.props.loadingPrices||this.props.pageState.submitting,b=n.default({"button-as-link":!0,"order-summary__button":!0,"order-summary__buy-button":!0,grid__item:!0,"order-summary__buy-button-disabled":S,"ProTryServerView__secondary-button":this.props.showServerViewVersion}),v=r.default.createElement("button",{className:b,onClick:this.onClickRedirectToBuy,"data-uxa-log":"order-summary-go-to-buy"},o.intl.formatMessage({id:"Cf2uR5",defaultMessage:"Or buy {plan} now"},{plan:this.props.planNamePrefixedWithDropbox}));this.props.showServerViewVersion&&(v=r.default.createElement(l.Button,{variant:"borderless",className:"ProTryServerView__secondary-button",onClick:this.onClickRedirectToBuy},o.intl.formatMessage({id:"dE9LCX",defaultMessage:"Buy {plan} now"},{plan:this.props.planNamePrefixedWithDropbox})));var P=n.default({"ProTryServerView__order-summary":c,"order-summary":!0,grid__container:!0}),C=n.default({"ProTryServerView__order-card":c,"order-summary__card":!this.props.formVariant||"row"===this.props.formVariant,"order-summary__card-no-border":"column"===this.props.formVariant,grid__item:!0}),E="blue";this.props.productPlanType===p.ProductPlanType.PLUS&&(E="black");var F="column"===this.props.formVariant||c?null:r.default.createElement("div",{className:"card-top card-top--"+E+" grid__item"}),w=m&&m.freeMonths&&u.scheduleId.formattedValue===d.ScheduleId.YEARLY?r.default.createElement("div",{className:"promo-highlight"},o.intl.formatMessage({id:"RvXco3",defaultMessage:"<span>+ {free_months} months free</span> with your first year"},{free_months:m.freeMonths,span:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("span",null,e)}})):null;return r.default.createElement("div",{className:P},F,r.default.createElement("div",{className:C},r.default.createElement("div",{className:"order-summary__plan-name grid__item"},this.props.planNamePrefixedWithDropbox),r.default.createElement("div",{className:"order-summary__line-items grid__item"},g,_,e,w),h,this.renderCTA(),this.props.showTrialVersion?v:void 0,this.renderError()))},t})(r.default.Component);t.OrderSummary=f})),define("modules/clean/react/payments/buy/components/payments/worldpay_entity_info",["require","exports","tslib","react"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return r.default.createElement("div",{className:"grid__container payment-entity-info__text"},r.default.createElement("p",null,"Dropbox International Unlimited Company",r.default.createElement("br",null),"One Park Place / Hatch Street Upper / Dublin 2 / Ireland"))},t})((r=a.__importDefault(r)).default.Component);t.WorldPayEntityInfo=n})),define("modules/clean/react/payments/buy/helpers/pricing_value_helper",["require","exports","modules/clean/payments/skus/constants"],(function(e,t,a){"use strict";function r(e,t,a,r){return e.filter((function(e){var n=e.finalSubState.plan,o=e.finalSubState.billingSchedule,i=!!e.finalSubState.addons.skus.length;return n&&n.productType===t&&o&&o.id===a&&i===r})).pop()}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayPrices=function(e,t,n){var o,i,s,l,u,c;if(e){var d=r(e,t.productPlanType.formattedValue,a.ScheduleId.MONTHLY,!1),p=r(e,t.productPlanType.formattedValue,a.ScheduleId.YEARLY,!1),m=void 0,f=void 0;if(n?(p&&(o=(m=p.tvm).getTotalPrice(),l=m.getBilledPrice()),d&&(i=(f=d.tvm).getTotalPrice(),u=f.getBilledPrice())):(p&&(o=p.nextBillingSummary.base,l=p.nextBillingSummary.total),d&&(i=d.nextBillingSummary.base,u=d.nextBillingSummary.total)),o&&i){var y=i.multiply(12).subtract(o);s=y.amount>0?y:void 0}if(l&&u){var h=u.multiply(12).subtract(l);c=h.amount>0?h:void 0}}return{yearlyPrice:o,monthlyPrice:i,yearlySavings:s,taxInclusiveYearlyPrice:l,taxInclusiveMonthlyPrice:u,taxInclusiveYearlySavings:c}},t.getCurrentTransitionPrices=function(e,t){var a,n,o,i,s,l,u,c;if(e&&(a=r(e,t.productPlanType.formattedValue,t.scheduleId.formattedValue,!!t.evh.rawValue)),a&&a.tvm){var d=a.tvm;n=d.getTotalPrice(),o=d.getTaxCountryCode(),i=d.getTaxPercentage(),s=d.getTaxPrice(),l=d.getCurrency(),u=d.getTotalTaxWithheld(),c=d.getWithheldTaxPercentage()}return{totalPrice:n,taxCountryCode:o,taxPercentage:i,taxAmount:s,currency:l,withheldTaxAmount:u,withheldTaxPercentage:c}}})),define("modules/clean/react/payments/buy/components/payments/ideal_form",["require","exports","tslib","react","modules/clean/react/payments/buy/components/inputs/inputs","modules/core/i18n","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,a,r,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onIdealBankChange=function(e){var a=e.value,r=t.props.idealBanks[a];t.props.actions.updateIdealBank({bankId:a,bankName:r})},t.onIdealBankBlur=function(e){"ON"===t.props.paymentFormErrorsExperiment&&t.props.actions.showFormFieldErrors(["idealBankId"],"IdealBankBlur")},t.idealErrorString=function(){var e=t.props.formData.idealBankId;return!i.FormValueHelper.isValid(e)&&e.showError?o.intl.formatMessage({id:"Lly4lc",defaultMessage:"Please select your bank."}):""},t}return a.__extends(t,e),t.prototype.render=function(){var e,t=this.props,a=t.formData,i=t.idealBanks,s=o.intl.formatMessage({id:"4MQHjO",defaultMessage:"Note: Weâ€™ll use your bank information provided by iDEAL for all future billing cycles. If your bank is not listed, then please select a different payment method."}),l=a.idealBankId.errorState&&a.idealBankId.showError;return"ON"===this.props.paymentFormErrorsExperiment&&(e=this.idealErrorString()),r.default.createElement("div",{className:"ideal-container"},r.default.createElement("div",{className:"ideal-fields"},r.default.createElement(n.LabeledSelectInput,{name:"ideal_bank",labelText:o.intl.formatMessage({id:"nomYjM",defaultMessage:"Bank"}),value:a.idealBankId.rawValue,onChange:this.onIdealBankChange,onBlur:this.onIdealBankBlur,hasError:Boolean(l),errorText:e},r.default.createElement("option",{value:"",key:"default","aria-selected":""===a.idealBankId.rawValue},o.intl.formatMessage({id:"EYb0mR",defaultMessage:"Select your bank..."})),Object.keys(i).map((function(e){return r.default.createElement("option",{value:e,key:e,"aria-selected":a.idealBankId.rawValue===e},i[e])})))),this.props.locationFields,r.default.createElement("div",{className:"ideal-note"},s))},t})((r=a.__importDefault(r)).default.Component);t.IdealForm=s})),define("modules/clean/react/payments/buy/components/payments/payment_method_input",["require","exports","tslib","react","classnames","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/buy/components/inputs/inputs"],(function(e,t,a,r,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n);var s=(function(e){function t(t){var a=e.call(this,t)||this;return a.focus=function(){null!==a.labeledRadioInput.current&&a.labeledRadioInput.current.focus()},a.onChange=function(){a.props.onSelected(a.props.paymentMethod)},a.getPaymentMethodId=function(e){switch(e){case o.PaymentMethod.CreditCard:return"creditcard";case o.PaymentMethod.PayPal:return"paypal";case o.PaymentMethod.Ideal:return"ideal";case o.PaymentMethod.DirectDeposit:return"debit";default:return e}},a.labeledRadioInput=r.default.createRef(),a}return a.__extends(t,e),t.prototype.render=function(){var e=this.getPaymentMethodId(this.props.paymentMethod);return r.default.createElement("div",{className:n.default({"payment-info__option":!0,"full-width":this.props.fullWidth,"no-margin-bottom":this.props.noMarginBottom,"grid__item--expand":this.props.fullWidth,"grid__item--shrink":!this.props.fullWidth,"grid--y-middle":!0})},r.default.createElement(i.LabeledRadioInput,{ref:this.labeledRadioInput,name:this.props.name,className:"payment-info__payment",inputId:"payment-method-radio#"+e,ariaLabelId:"payment-method-label#"+e,value:this.props.paymentMethod.toString(),checked:this.props.selected,onClickOrChange:this.onChange,labelSpan:r.default.createElement(l,{id:e,textTitle:this.props.textTitle,title:this.props.title,icons:this.props.icons,onClick:this.onChange})}))},t})(r.default.Component);t.PaymentMethodInput=s;var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e,t=this;return r.default.createElement("span",{className:"payment-info__method-label",onClick:this.props.onClick},r.default.createElement("span",{id:"payment-method-label#"+this.props.id,"aria-hidden":"true",className:n.default((e={"ax-visually-hidden":this.props.icons},e[this.props.id]=!this.props.icons,e)),title:this.props.textTitle},this.props.title),this.props.icons&&this.props.icons.map((function(e){return r.default.createElement("span",{key:"payment-method-icon#"+e,className:e,title:t.props.icons&&t.props.icons.length>1?e:t.props.title})})))},t})(r.default.Component)})),define("modules/clean/react/payments/buy/components/payments/payment_method_selector",["require","exports","tslib","react","modules/core/i18n","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/buy/components/payments/payment_method_input"],(function(e,t,a,r,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPaymentMethodSelected=function(e){t.props.updatePaymentMethod(e)},t}return a.__extends(t,e),t.prototype.getLabelForMethodId=function(e){if(e===o.PaymentMethod.CreditCard){var t=this.props.paymentSpec.supported_credit_cards_for_country(this.props.countryCode);return r.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.CreditCard,selected:this.props.paymentMethod===o.PaymentMethod.CreditCard,onSelected:this.onPaymentMethodSelected,icons:t,fullWidth:this.props.fullWidth,title:n.intl.formatMessage({id:"2NPQhg",defaultMessage:"Credit card. We accept {payment_methods}."},{payment_methods:t.join(", ").replace("_","-")})})}return e===o.PaymentMethod.PayPal?r.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.PayPal,selected:this.props.paymentMethod===o.PaymentMethod.PayPal,onSelected:this.onPaymentMethodSelected,icons:["paypal"],fullWidth:this.props.fullWidth,title:n.intl.formatMessage({id:"RxvBVG",defaultMessage:"Paypal"})}):e===o.PaymentMethod.DirectDeposit?r.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.DirectDeposit,selected:this.props.paymentMethod===o.PaymentMethod.DirectDeposit,onSelected:this.onPaymentMethodSelected,title:n.intl.formatMessage({id:"H1vHwe",defaultMessage:"Direct Debit"}),fullWidth:this.props.fullWidth}):e===o.PaymentMethod.Ideal?r.default.createElement(i.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.Ideal,selected:this.props.paymentMethod===o.PaymentMethod.Ideal,onSelected:this.onPaymentMethodSelected,icons:["ideal"],fullWidth:this.props.fullWidth,title:n.intl.formatMessage({id:"DgNBM/",defaultMessage:"iDEAL"})}):null},t.prototype.render=function(){var e=this,t=this.props,a=t.countryCode,o=t.paymentSpec,i=(t.showTrialVersion?o.only_default_payment_methods():o.available_payment_methods_for_country(a)).map((function(t){return e.getLabelForMethodId(t)}));return r.default.createElement("div",{className:"payment-info__selector grid__container"},r.default.createElement("span",{className:"ax-visually-hidden"},n.intl.formatMessage({id:"WrPpf6",defaultMessage:"Select a payment method"})),i)},t})((r=a.__importDefault(r)).default.Component);t.PaymentMethodSelector=s})),define("modules/clean/react/payments/buy/components/payments/tos",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/payments/skus/constants","modules/clean/server_side_client_view_bridge","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,a,r,n,o,i,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),s=a.__importStar(s);var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTermsAndServiceChange=function(e){t.props.actions.updateTermsAndService(Boolean(!e.checked))},t.onTermsAndServiceBlur=function(e){"ON"===t.props.paymentFormErrorsExperiment&&t.props.actions.showFormFieldErrors(["termsAndService"],"TermsAndServiceBlur")},t.onTOSLabelClick=function(e){var a=t.props.formData.termsAndService.formattedValue;t.props.actions.updateTermsAndService(Boolean(!a))},t.onLinkClick=function(e){t.props.showServerViewVersion&&(e.preventDefault(),e.stopPropagation(),s.OpenUncredentialedBrowserWithDropboxURL(e.currentTarget.getAttribute("href")))},t}return a.__extends(t,e),t.prototype.termsAndServiceErrorString=function(){var e=this.props.formData.termsAndService;return!l.FormValueHelper.isValid(e)&&e.showError?n.intl.formatMessage({id:"a2NBnL",defaultMessage:"Please agree to the terms of service."}):""},t.prototype.componentDidMount=function(){this.props.showServerViewVersion&&s.init()},t.prototype.renderLegalTermsBuy=function(){var e=this,t=this.props,a=t.currency,o=t.formData,s=t.totalPrice;return n.intl.formatMessage({id:"iwdwdQ",defaultMessage:"Youâ€™ll be charged {total_price} {schedule} until you <link_cancel>cancel</link_cancel> your subscription. Previous charges <link_refund>wonâ€™t be refunded</link_refund> when you cancel <link_required>unless itâ€™s legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}."},{total_price:s,schedule:o.scheduleId.rawValue===i.ScheduleId.MONTHLY?n.intl.formatMessage({id:"dF0ZGK",defaultMessage:"monthly"}):n.intl.formatMessage({id:"yvyyXC",defaultMessage:"yearly"}),currency:a,link_cancel:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"cancel-article",key:"tos-cancel",href:"/help/158",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},link_refund:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"refund-article",key:"tos-refund",href:"/terms",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},link_required:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"requirements-article",key:"tos-required",href:"/help/9069",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)}})},t.prototype.renderLegalTermsTrial=function(){var e=this,t=this.props,a=t.currency,o=t.formData,s=t.totalPrice;return n.intl.formatMessage({id:"iPVwvJ",defaultMessage:"Your free trial ends on {trial_end_date}. If you donâ€™t <link_cancel>cancel</link_cancel> your free trial by that date, weâ€™ll charge you {total_price} {schedule} (taxes included) until you cancel your plan. Charges <link_refund>wonâ€™t be refunded</link_refund> when you cancel, <link_required>unless itâ€™s legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}."},{trial_end_date:o.trialEndDate.rawValue,total_price:s,schedule:o.scheduleId.rawValue===i.ScheduleId.MONTHLY?n.intl.formatMessage({id:"dF0ZGK",defaultMessage:"monthly"}):n.intl.formatMessage({id:"yvyyXC",defaultMessage:"yearly"}),link_cancel:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"cancel-article",key:"tos-cancel",href:"/help/space/cancel-plus",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},link_refund:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"refund-article",key:"tos-refund",href:"/help/billing/plus-refund",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},link_required:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"requirements-article",key:"tos-required",href:"/terms",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},currency:a})},t.prototype.render=function(){var e=this,t=this.props.formData,a=this.props.showTrialVersion?this.renderLegalTermsTrial():this.renderLegalTermsBuy(),i=n.intl.formatMessage({id:"Q4Jjko",defaultMessage:"I agree to the <link>Dropbox Terms</link>{br}and the <strong>Automatic Renewal Terms</strong> above"},{link:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__tos--terms-link","aria-label":"terms",key:"link_dbx",href:"/terms",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},br:r.default.createElement("br",null),strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("strong",null,e)}}),s=r.default.createElement("span",{className:"type--copy-small",onClick:this.onTOSLabelClick},i),l=r.default.createElement(o.LabeledCheckboxInput,{checked:t.termsAndService.rawValue,containerClassName:"grid__item terms-info__tos",className:"billing-terms-and-service",errorText:this.termsAndServiceErrorString(),labelText:s,name:"tos_agree",onClick:this.onTermsAndServiceChange,onBlur:this.onTermsAndServiceBlur});return r.default.createElement("div",{className:"terms-info"},r.default.createElement("p",{className:"terms-info__legal"},a),l)},t})(r.default.Component);t.TermsOfService=u})),define("modules/clean/react/payments/common/middleware/captcha_visibility_checker",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(e){var t=this;this.POLLING_FREQUENCY_MS=500,this.checkCaptchaVisibility=function(){t.isCheckingCaptchaVisibility&&(t.isCaptchaVisible=t.getCaptchaVisibility(),t.isCaptchaVisible?(t.isCheckingCaptchaVisibility=!1,t.onCaptchaVisibility(!0)):setTimeout(t.checkCaptchaVisibility,t.POLLING_FREQUENCY_MS))},this.isCaptchaVisible=!1,this.isCheckingCaptchaVisibility=!1,this.onCaptchaVisibility=e,this.wasLastCaptchaSubmitVisible=!1}return e.prototype.triggerCaptcha=function(){this.isCheckingCaptchaVisibility=!0,this.checkCaptchaVisibility()},e.prototype.submitCaptcha=function(){this.isCaptchaVisible||this.onCaptchaVisibility(!1),this.wasLastCaptchaSubmitVisible=this.isCaptchaVisible,this.isCaptchaVisible=!1,this.isCheckingCaptchaVisibility=!1},e.prototype.getCaptchaVisibility=function(){var e=document.querySelector('iframe[src^="https://www.google.com/recaptcha/api2/bframe"]');return null!==e&&null!==e.parentElement&&null!==e.parentElement.parentElement&&"visible"===e.parentElement.parentElement.style.visibility},e})();t.CaptchaVisibilityChecker=a})),define("modules/clean/react/payments/common/middleware/payments_ux_logger",["require","exports","tslib","modules/clean/payments/three_ds_helper","modules/clean/payments/payment_form/payment_form_spec","modules/clean/logging/telemetry","modules/core/exception","modules/clean/logging/hive/schemas/web-payments_ux_analytics","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/common/middleware/captcha_visibility_checker"],(function(e,t,a,r,n,o,i,s,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importStar(o),i=a.__importStar(i);var d=new Set(["BlurAccountHolderName","BlurAddress","BlurCity","BlurCpf","BlurIBAN","BlurName","BlurVat","BlurZipCode","UpdateCountryCode","UpdateIdealBank","UpdateMandateSigned","UpdatePaymentMethod"]),p=(function(){function e(e,t){var a=this;this.reduxMiddleware=function(e){return function(t){return function(r){var n=e.getState(),o=t(r);try{var s=e.getState();a.handleAction(r,s,n)}catch(e){i.reportException({err:e,severity:i.SEVERITY.CRITICAL,tags:["payments_ux_logger","payment"]})}return o}}},this.onCaptchaVisibility=function(e){var t={challenge_type:e?s.ChallengeType.ShownCaptcha:s.ChallengeType.SuppressedCaptcha,origin_submit_seq:a.originSubmitSeq.toString()};a.actionSeq++,a.logChallengeStart(t)},this.requestSeq=-1,this.actionSeq=-1,this.originSubmitSeq=0,this.requestId=e,this.logger=new o.HiveLogger,this.captchaVisibilityChecker=new c.CaptchaVisibilityChecker(this.onCaptchaVisibility),this.platform=t}return e.prototype.handleAction=function(e,t,a){var o;if(this.isPageView(e)){var i=((o={})[s.FormFields.CountryCode]=t.formData.countryCode.rawValue,o[s.FormFields.PaymentMethod]=n.PaymentMethod[t.formData.paymentMethod.rawValue],o);this.requestSeq++,this.actionSeq=0,this.logPageView(i)}else if(this.isFormFieldChange(e)){null!==(i=this.getFormFieldChangeDetails(e.type,t.formData,a.formData))&&(this.actionSeq++,this.logFormFieldChange(i))}else if(this.isCCFormFieldChange(e)){null!==(i=this.getCCFormFieldChangeDetails(e.creditCardIframeFields))&&(this.actionSeq++,this.logFormFieldChange(i))}else if(this.isShowFormFieldErrors(e)){if(this.isErrorFromSubmitForm(e)){i=this.getFormValidationErrorDetails(t.formData);this.actionSeq++,this.logFormValidationError(i)}}else if(this.isSubmitFormSuccess(e)){i=this.getFormSubmitEventDetails(u.SubmitFormTriggerType.ButtonClick,t.formData,a.pageState.submitSeq);this.actionSeq++,this.logFormSubmitSuccess(i)}else if(this.isSubmitFormStart(e)){i=this.getFormSubmitEventDetails(e.trigger,t.formData,a.pageState.submitSeq);this.actionSeq++,this.logFormSubmit(i)}else if(this.isTriggerCaptcha(e))this.captchaVisibilityChecker.triggerCaptcha();else if(this.isSubmitCaptcha(e)){this.captchaVisibilityChecker.submitCaptcha();i={challenge_type:this.captchaVisibilityChecker.wasLastCaptchaSubmitVisible?s.ChallengeType.ShownCaptcha:s.ChallengeType.SuppressedCaptcha,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeSubmit(i)}else if(this.isTriggerThreeDsChallenge(e)){i={challenge_type:s.ChallengeType.ThreeDsChallenge,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeStart(i)}else if(this.isTriggerThreeDsFingerprint(e)){i={challenge_type:s.ChallengeType.ThreeDsFingerprint,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeStart(i)}else if(this.isUpdateThreeDsData(e)&&""!==e.value){var l=JSON.parse(e.value),c=void 0;if(l.resultType===r.ThreeDsResultType.IdentifyShopper)c=s.ChallengeType.ThreeDsFingerprint;else{if(l.resultType!==r.ThreeDsResultType.ChallengeShopper)return;c=s.ChallengeType.ThreeDsChallenge}i={challenge_type:c,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeSubmit(i)}},e.prototype.logPageView=function(e){this.log(s.PaymentsUXEvent.PageView,e)},e.prototype.logFormFieldChange=function(e){this.log(s.PaymentsUXEvent.FormFieldChange,e)},e.prototype.logFormValidationError=function(e){this.log(s.PaymentsUXEvent.FormValidationError,e)},e.prototype.logFormSubmitSuccess=function(e){this.log(s.PaymentsUXEvent.FormSubmitSuccess,e)},e.prototype.logFormSubmit=function(e){this.log(s.PaymentsUXEvent.FormSubmit,e)},e.prototype.logChallengeStart=function(e){this.log(s.PaymentsUXEvent.ChallengeStart,e)},e.prototype.logChallengeSubmit=function(e){this.log(s.PaymentsUXEvent.ChallengeSubmit,e)},e.prototype.log=function(e,t){this.logger.log(new s.PaymentsUXAnalyticsRow({event_name:e,event_details:t,request_id:this.requestId,request_seq:this.requestSeq,action_seq:this.actionSeq,platform:this.platform}))},e.prototype.isPageView=function(e){return"UpdateHistory"===e.type},e.prototype.isFormFieldChange=function(e){return d.has(e.type)},e.prototype.isShowFormFieldErrors=function(e){return"ShowFormFieldErrors"===e.type},e.prototype.isErrorFromSubmitForm=function(e){return"SubmitForm"===e.origin},e.prototype.isSubmitFormStart=function(e){return"SubmitFormStart"===e.type},e.prototype.isSubmitFormSuccess=function(e){return"SubmitFormSuccess"===e.type},e.prototype.isTriggerCaptcha=function(e){return"TriggerCaptcha"===e.type},e.prototype.isSubmitCaptcha=function(e){return"SubmitCaptcha"===e.type},e.prototype.isTriggerThreeDsChallenge=function(e){return"TriggerThreeDsChallenge"===e.type},e.prototype.isTriggerThreeDsFingerprint=function(e){return"TriggerThreeDsFingerprint"===e.type},e.prototype.isUpdateThreeDsData=function(e){return"UpdateThreeDsData"===e.type},e.prototype.isCCFormFieldChange=function(e){return"BlurCCField"===e.type},e.prototype.getFormFieldChangeDetails=function(e,t,a){switch(e){case"BlurAccountHolderName":return{field:s.FormFields.SepaAccountHolderName,value:t.accountHolderName.rawValue,error_state:l.InputErrorState[t.accountHolderName.errorState],show_error:t.accountHolderName.showError.toString()};case"BlurAddress":return{field:s.FormFields.Address,value:t.address.rawValue,error_state:l.InputErrorState[t.address.errorState],show_error:t.address.showError.toString()};case"BlurCity":return{field:s.FormFields.City,value:t.city.rawValue,error_state:l.InputErrorState[t.city.errorState],show_error:t.city.showError.toString()};case"BlurCpf":return{field:s.FormFields.Cpf,value:t.cpf.rawValue,error_state:l.InputErrorState[t.cpf.errorState],show_error:t.cpf.showError.toString()};case"BlurIBAN":return{field:s.FormFields.Iban,value:t.iban.rawValue,error_state:l.InputErrorState[t.iban.errorState],show_error:t.iban.showError.toString()};case"BlurName":return{field:s.FormFields.CardholderName,value:t.name.rawValue,error_state:l.InputErrorState[t.name.errorState],show_error:t.name.showError.toString()};case"BlurVat":return{field:s.FormFields.Vat,value:t.vat.rawValue,error_state:l.InputErrorState[t.vat.errorState],show_error:t.vat.showError.toString()};case"BlurZipCode":return{field:s.FormFields.ZipCode,value:t.zipCode.rawValue,error_state:l.InputErrorState[t.zipCode.errorState],show_error:t.zipCode.showError.toString()};case"UpdateCountryCode":return a.countryCode.rawValue!==t.countryCode.rawValue?{field:s.FormFields.CountryCode,value:t.countryCode.rawValue,error_state:l.InputErrorState[t.countryCode.errorState],show_error:t.countryCode.showError.toString()}:null;case"UpdateIdealBank":return a.idealBankId.rawValue!==t.idealBankId.rawValue?{field:s.FormFields.IdealBankId,value:t.idealBankId.rawValue,error_state:l.InputErrorState[t.idealBankId.errorState],show_error:t.idealBankId.showError.toString()}:null;case"UpdateMandateSigned":return a.mandateSigned.rawValue!==t.mandateSigned.rawValue?{field:s.FormFields.SepaMandateSigned,value:t.mandateSigned.rawValue.toString(),error_state:l.InputErrorState[t.mandateSigned.errorState],show_error:t.mandateSigned.showError.toString()}:null;case"UpdatePaymentMethod":return a.paymentMethod.rawValue!==t.paymentMethod.rawValue?{field:s.FormFields.PaymentMethod,value:n.PaymentMethod[t.paymentMethod.rawValue],error_state:l.InputErrorState[t.paymentMethod.errorState],show_error:t.paymentMethod.showError.toString()}:null;default:return null}},e.prototype.getCCFormFieldChangeDetails=function(e){return e.ccn?{field:s.FormFields.CreditCardNumber,error_state:l.InputErrorState[e.ccn.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccn.showError.toString()}:e.ccode?{field:s.FormFields.CreditCardCode,error_state:l.InputErrorState[e.ccode.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccode.showError.toString()}:e.ccexp?{field:s.FormFields.CreditCardExpDate,error_state:l.InputErrorState[e.ccexp.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccexp.showError.toString()}:null},e.prototype.getFormValidationErrorDetails=function(e){var t={};return e.countryCode.showError&&(t[s.FormFields.CountryCode]=l.InputErrorState[e.countryCode.errorState]),e.paymentMethod.showError&&(t[s.FormFields.PaymentMethod]=l.InputErrorState[e.paymentMethod.errorState]),e.zipCode.showError&&(t[s.FormFields.ZipCode]=l.InputErrorState[e.zipCode.errorState]),e.vat.showError&&(t[s.FormFields.Vat]=l.InputErrorState[e.vat.errorState]),e.paymentMethod.formattedValue===n.PaymentMethod.CreditCard?(e.nonce.showError&&(e.nonce.isCCNValid||(t[s.FormFields.CreditCardNumber]=l.InputErrorState[l.InputErrorState.Invalid]),e.nonce.isCCodeValid||(t[s.FormFields.CreditCardCode]=l.InputErrorState[l.InputErrorState.Invalid]),e.nonce.isCCExpValid||(t[s.FormFields.CreditCardExpDate]=l.InputErrorState[l.InputErrorState.Invalid])),e.cpf.showError&&(t[s.FormFields.Cpf]=l.InputErrorState[e.cpf.errorState]),e.name.showError&&(t[s.FormFields.CardholderName]=l.InputErrorState[e.name.errorState]),e.address.showError&&(t[s.FormFields.Address]=l.InputErrorState[e.address.errorState]),e.city.showError&&(t[s.FormFields.City]=l.InputErrorState[e.city.errorState])):e.paymentMethod.formattedValue===n.PaymentMethod.DirectDeposit?(e.mandateSigned.showError&&(t[s.FormFields.SepaMandateSigned]=l.InputErrorState[e.mandateSigned.errorState]),e.accountHolderName.showError&&(t[s.FormFields.SepaAccountHolderName]=l.InputErrorState[e.accountHolderName.errorState]),e.iban.showError&&(t[s.FormFields.Iban]=l.InputErrorState[e.iban.errorState])):e.paymentMethod.formattedValue===n.PaymentMethod.Ideal&&e.idealBankId.showError&&(t[s.FormFields.IdealBankId]=l.InputErrorState[e.idealBankId.errorState]),t},e.prototype.getFormSubmitEventDetails=function(e,t,a){var r;switch(e){case u.SubmitFormTriggerType.ButtonClick:r=s.FormSubmitTrigger.ButtonClick,this.originSubmitSeq=a;break;case u.SubmitFormTriggerType.RecaptchaV2:r=this.captchaVisibilityChecker.wasLastCaptchaSubmitVisible?s.FormSubmitTrigger.ShownCaptcha:s.FormSubmitTrigger.SuppressedCaptcha;break;case u.SubmitFormTriggerType.ThreeDsFingerprint:r=s.FormSubmitTrigger.ThreeDsFingerprint;break;case u.SubmitFormTriggerType.ThreeDsChallenge:r=s.FormSubmitTrigger.ThreeDsChallenge;break;default:r=s.FormSubmitTrigger.Unknown}var o={origin_submit_seq:this.originSubmitSeq.toString(),submit_seq:a.toString(),trigger:r};return r===s.FormSubmitTrigger.ButtonClick&&(o[s.FormFields.CountryCode]=t.countryCode.rawValue,o[s.FormFields.PaymentMethod]=n.PaymentMethod[t.paymentMethod.rawValue],t.paymentMethod.rawValue===n.PaymentMethod.CreditCard&&(o.bin=t.bin.rawValue)),o},e})();t.PaymentsUXLogger=p})),define("modules/clean/logging/hive/schemas/web-payments_ux_analytics",["require","exports","tslib","modules/core/browser"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importStar(r),(function(e){e.PageView="page_view",e.FormFieldChange="form_field_change",e.FormValidationError="form_validation_error",e.FormSubmit="form_submit",e.ChallengeStart="challenge_start",e.ChallengeSubmit="challenge_submit",e.FormSubmitSuccess="form_submit_success"})(t.PaymentsUXEvent||(t.PaymentsUXEvent={})),(function(e){e.Address="address",e.CardholderName="name",e.City="city",e.CountryCode="country_code",e.Cpf="cpf",e.CreditCardCode="cc_code",e.CreditCardExpDate="cc_exp_date",e.CreditCardNumber="cc_number",e.Iban="iban",e.IdealBankId="bank_id",e.PaymentMethod="payment_method",e.SepaAccountHolderName="owner_name",e.SepaMandateSigned="mandate_signed",e.Vat="vat",e.ZipCode="zip_code"})(t.FormFields||(t.FormFields={})),(function(e){e.SuppressedCaptcha="suppressed_captcha",e.ShownCaptcha="shown_captcha",e.ThreeDsChallenge="three_ds_challenge",e.ThreeDsFingerprint="three_ds_fingerprint"})(t.ChallengeType||(t.ChallengeType={})),(function(e){e.ButtonClick="button_click",e.SuppressedCaptcha="suppressed_captcha",e.ShownCaptcha="shown_captcha",e.ThreeDsChallenge="three_ds_challenge",e.ThreeDsFingerprint="three_ds_fingerprint",e.Unknown="unknown"})(t.FormSubmitTrigger||(t.FormSubmitTrigger={})),(function(e){e.Legacy="legacy",e.RevenueAPI="revenue_api"})(t.PaymentsUxPlatform||(t.PaymentsUxPlatform={}));var n=function(e){this.category="web-payments_ux_analytics",this.session_id=null,this.user_id=null,this.team_id=null,this.anon_ip=null,this.country=null,this.locale_user_selected=null,this.locale_browser_header=null,this.user_agent=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.event_name=e.event_name,this.event_details=e.event_details,this.url=r.get_href(),this.request_id=e.request_id,this.request_seq=e.request_seq,this.action_seq=e.action_seq,this.platform=e.platform,Object.seal(this)};t.PaymentsUXAnalyticsRow=n})),define("modules/clean/payments/skus/subscription_change_plan_set",["require","exports","modules/clean/payments/skus/constants","modules/clean/payments/skus/subscription_change_plan"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(e){this._subChangePlans=e}return e.deserialize=function(t){return new e(t.map(r.SubscriptionChangePlan.deserialize))},Object.defineProperty(e.prototype,"plans",{get:function(){return this._subChangePlans.slice()},enumerable:!0,configurable:!0}),e.prototype.filter=function(t){return new e(this._subChangePlans.filter(t))},e.prototype.withProductPlanType=function(e){return this.filter((function(t){var a=t.finalSubState.plan;return!!a&&a.productType===e}))},e.prototype.withSchedule=function(e){return this.filter((function(t){var a=t.finalSubState.billingSchedule;return!!a&&a.id===e}))},e.prototype.withSku=function(e){return this.filter((function(t){return t.finalSubState.plan===e}))},e.prototype.monthly=function(){return this.withSchedule(a.ScheduleId.MONTHLY)},e.prototype.yearly=function(){return this.withSchedule(a.ScheduleId.YEARLY)},e})();t.SubscriptionChangePlanSet=n}));var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};define("modules/clean/react/payments/common/form/middleware/middleware",["require","exports","modules/core/browser","modules/core/notify","modules/clean/marketing_tracker"],(function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submitFormErrorMiddleware=function(t){return function(t){return function(n){if("SubmitFormError"!==n.type)return t(n);var o=t(n);return n.data.error_message&&r.Notify.error(n.data.error_message),n.data.redirect&&a.redirect(n.data.redirect),"payment_system_down_error"===n.data.error_type&&new Promise((function(t,a){e(["modules/clean/react/payments/checkout/components/payment_down_error_modal"],t,a)})).then(__importStar).then((function(e){e.PaymentDownErrorModalView.showInstance({isTrial:n.data.is_trial})})),o}}},t.marketingEventMiddleware=function(e){return function(t){return function(a){var r=a.additionalData;switch(a.type){case"SubmitFormStart":if(!r||!r.is_pro_buy_form)return t(a);var o={event:"conversionDataReady",tealium_event:"conversionDataReady",product:r.product,licenses:1,billing_cycle:r.billing_schedule,purchase_price:r.expected_price_amount,currency:r.currency,type:r.signup_type};n.MarketingTracker.pushWithDefaults(o);break;case"SubmitFormSuccess":var i=e.getState().pageState;if(i&&i.marketingTracker){var s=i.marketingTracker.onSubmitFormSuccess;s&&n.MarketingTracker.pushEvent(s)}}return t(a)}}}})),define("modules/clean/react/payments/common/form/reducers/reducers",["require","exports","tslib","redux","modules/clean/react/payments/common/form_values","modules/clean/payments/skus/constants","modules/clean/react/payments/business/state/business_state","modules/clean/react/payments/common/form_value_factory","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,a,r,n,o,i,s,l){"use strict";function u(e){var t=i.fieldsToServerProps[e];return t?function(r){return function(n,o){switch(o.type){case"ShowFormFieldErrors":var i=o;if(n&&!l.FormValueHelper.isValid(n))for(var s=0,u=i.fieldNames;s<u.length;s++){var c=u[s];if(e===c)return a.__assign(a.__assign({},n),{showError:!0})}return n;case"SubmitFormError":var d=o;return d.data instanceof Object&&d.data.hasOwnProperty("error_fields")&&d.data.error_fields.hasOwnProperty(t)?a.__assign(a.__assign({},n),{showError:!0,serverError:d.data.error_fields[t]}):n;default:return r(n,o)}}}:function(e){return e}}function c(e){return function(t,a){return Object.assign({},t,e(t,a))}}function d(e,t){switch(t.type){case"SubmitFormError":var r=t;if(r.data instanceof Object&&r.data.hasOwnProperty("error_fields")&&r.data.error_fields.hasOwnProperty("email")){var o=r.data.error_fields.email,i=void 0;switch(o){case"empty":i=n.EmailErrorState.Empty;break;case"account":case"email-taken":i=n.EmailErrorState.TakenError;break;default:i=e?e.errorState:n.EmailErrorState.Valid}return a.__assign(a.__assign({},e),{showError:!0,serverError:o,errorState:i})}return r.data instanceof Object&&r.data.hasOwnProperty("error_type")&&"capturable_user"===r.data.error_type.toString()?a.__assign(a.__assign({},e),{showError:!1,isCapturable:!0}):e;case"ShowFormFieldErrors":var u=t;if(e&&!l.FormValueHelper.isValid(e))for(var c=0,d=u.fieldNames;c<d.length;c++){if("email"===d[c])return a.__assign(a.__assign({},e),{showError:!0})}return e;case"UpdateEmail":var p=t;return s.FormValueFactory.createEmail(p.value,e||void 0);default:return e||null}}function p(e,t){if(void 0===e&&(e=null),"SubmitFormSuccess"!==t.type)return null;var a=t;return a.data&&a.data.next_url?a.data.next_url:null}function m(e,t){switch(void 0===e&&(e=null),t.type){case"SubmitFormStart":return"submitting";case"SubmitFormSuccess":return"success";case"SubmitFormError":return"error";default:return e}}function f(e,t){return void 0===e&&(e=null),"SubmitFormStart"===t.type&&null!==e?e+1:e}function y(e,t){switch(void 0===e&&(e=!1),t.type){case"SubmitFormStart":return!0;case"SubmitFormSuccess":case"SubmitFormError":return!1;default:return e}}function h(e,t){switch(t.type){case"UpdateCpfName":return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{cpfName:s.FormValueFactory.createCpfName(t.value,e.formData.cpfName)})});case"UpdateFirstName":return e.formData.cpfName.manuallyEdited?e:a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{cpfName:s.FormValueFactory.createCpfNamePrefill(t.value,e.formData.lastName.rawValue,e.pageState.userInfo.displayName)})});case"UpdateLastName":return e.formData.cpfName.manuallyEdited?e:a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{cpfName:s.FormValueFactory.createCpfNamePrefill(e.formData.firstName.rawValue,t.value,e.pageState.userInfo.displayName)})});default:return e}}function g(e,t){switch(t.type){case"SubmitFormError":var r=t,n="";return r.data&&r.data.error_fields&&(n=r.data.error_fields.product_plan_type),a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{productPlanType:a.__assign(a.__assign({},e.formData.productPlanType),{serverError:n,showError:!0})})});case"ShowFormFieldErrors":var i=t;if(e.formData.productPlanType&&!l.FormValueHelper.isValid(e.formData.productPlanType))for(var u=0,c=i.fieldNames;u<c.length;u++){if("productPlanType"===c[u])return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{productPlanType:a.__assign(a.__assign({},e.formData.productPlanType),{showError:!0})})})}return e;case"UpdateProductPlanType":var d=t,p=d.value,m=p===o.ProductPlanType.ADVANCED?e.pageState.advancedMinNumUsers:e.pageState.standardMinNumUsers,f=p===o.ProductPlanType.ADVANCED?e.pageState.advancedMaxNumUsers:e.pageState.standardMaxNumUsers;return void 0!==e.pageState.teamNumUsers&&(m=Math.max(m,e.pageState.teamNumUsers)),a.__assign(a.__assign({},e),{pageState:a.__assign(a.__assign({},e.pageState),{minNumUsers:m,maxNumUsers:f}),formData:a.__assign(a.__assign({},e.formData),{productPlanType:s.FormValueFactory.createProductPlanType(d.value,e.pricingState.subChangePlans,e.formData.productPlanType)})});default:return e}}function _(e,t){switch(t.type){case"SubmitFormError":var r=t,n="";return r.data&&r.data.error_fields&&(n=r.data.error_fields.team_num_users),a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{numberOfUsers:a.__assign(a.__assign({},e.formData.numberOfUsers),{serverError:n,showError:!0})})});case"ShowFormFieldErrors":var o=t;if(e.formData.numberOfUsers&&!l.FormValueHelper.isValid(e.formData.numberOfUsers))for(var i=0,u=o.fieldNames;i<u.length;i++){if("numberOfUsers"===u[i])return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{numberOfUsers:a.__assign(a.__assign({},e.formData.numberOfUsers),{showError:!0})})})}return e;case"UpdateNumberOfUsers":var c=t;return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{numberOfUsers:s.FormValueFactory.createNumberOfUsers(c.value,e.pageState,e.formData.numberOfUsers,e.formData.numberOfUsers.minLicenseLimit,e.formData.emailsToInvite?e.formData.emailsToInvite.rawValue.length:0)})});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.companySize=u("companySize")((function(e,t){return"UpdateCompanySize"===t.type?s.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.email=d,t.emailsToInvite=u("emailsToInvite")((function(e,t){return"UpdateEmailsToInvite"===t.type?s.FormValueFactory.createEmailsToInvite(t.value,e||void 0):e||null})),t.firstName=u("firstName")((function(e,t){return"UpdateFirstName"===t.type?s.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.lastName=u("lastName")((function(e,t){return"UpdateLastName"===t.type?s.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.nextUrl=p,t.password=u("password")((function(e,t){return"UpdatePassword"===t.type?s.FormValueFactory.createPassword(t.value,e||void 0):e||null})),t.schedule=u("schedule")((function(e,t){return"UpdateSchedule"===t.type?s.FormValueFactory.createSchedule(t.value):e||null})),t.submitState=m,t.submitSeq=f,t.submitting=y,t.teamName=u("teamName")((function(e,t){return"UpdateTeamName"===t.type?s.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.teamPhone=u("teamPhone")((function(e,t){return"UpdateTeamPhone"===t.type?s.FormValueFactory.createTeamPhone(t.value,e||void 0):e||null})),t.updateCpfName=h,t.updateProductPlanType=g,t.updateNumberOfUsers=_,t.FormReducer=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(a,r){return t(e(a,r),r)}}))})(h,g,_,r.combineReducers({pricingState:function(e,t){return void 0===e&&(e={}),e},pageState:c(r.combineReducers({nextUrl:p,submitState:m,submitting:y,submitSeq:f})),formData:c(r.combineReducers({companySize:t.companySize,email:d,emailsToInvite:t.emailsToInvite,firstName:t.firstName,lastName:t.lastName,password:t.password,schedule:t.schedule,teamName:t.teamName,teamPhone:t.teamPhone}))}))})),define("modules/clean/react/payments/common/payments/reducers/reducers",["require","exports","tslib","modules/clean/react/payments/business/state/business_state","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_value_factory"],(function(e,t,a,r,n,o){"use strict";function i(e,t){return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),t)})}function s(e){var t=r.fieldsToServerProps[e];return t?function(r){return function(o,s){var l=o.formData[e];switch(s.type){case"ShowFormFieldErrors":for(var u=0,c=s.fieldNames;u<c.length;u++){if(c[u]===e&&void 0!==l&&!n.FormValueHelper.isValid(l)){var d={};return d[e]=a.__assign(a.__assign({},l),{showError:!0}),i(o,d)}}return o;case"SubmitFormError":var p=s;if(!p.data||!p.data.error_fields||!p.data.error_fields[t]||void 0===l)return o;var m={};return m[e]=a.__assign(a.__assign({},l),{showError:!0,serverError:p.data.error_fields[t]}),i(o,m);default:return r(o,s)}}}:function(e){return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updatePaymentMethod=s("paymentMethod")((function(e,t){if("UpdatePaymentMethod"!==t.type&&"UpdateCountryCode"!==t.type)return e;var a=e.formData,r=e.pageState,n="UpdatePaymentMethod"===t.type?t.value:a.paymentMethod.rawValue,s=a.countryCode.formattedValue;return i(e,{paymentMethod:o.FormValueFactory.createPaymentMethod(n,s,r.paymentFormSpec,a.paymentMethod)})})),t.updateCountryCode=s("countryCode")((function(e,t){return"UpdateCountryCode"!==t.type?e:i(e,{countryCode:o.FormValueFactory.createCountryCode(t.value,e.formData.countryCode)})})),t.updateZipCode=s("zipCode")((function(e,t){return"UpdateZipCode"!==t.type&&"UpdateCountryCode"!==t.type?e:i(e,{zipCode:o.FormValueFactory.createZipCode("UpdateZipCode"===t.type?t.value:e.formData.zipCode.rawValue,e.formData.countryCode.formattedValue,e.pageState.paymentFormSpec,e.formData.zipCode)})})),t.updateVat=s("vat")((function(e,t){return"UpdateVat"!==t.type&&"UpdateCountryCode"!==t.type?e:i(e,{vat:o.FormValueFactory.createVat("UpdateVat"===t.type?t.value.toUpperCase():e.formData.vat.rawValue,e.formData.countryCode.formattedValue,e.formData.vat)})})),t.updateCpf=s("cpf")((function(e,t){return"UpdateCpf"!==t.type&&"UpdateCountryCode"!==t.type?e:i(e,{cpf:o.FormValueFactory.createCpf("UpdateCpf"===t.type?t.value.toUpperCase():e.formData.cpf.rawValue,e.formData.cpf)})})),t.updatePhone=s("phone")((function(e,t){return"UpdatePhone"!==t.type?e:i(e,{phone:o.FormValueFactory.createPhone(t.value,e.formData.phone)})})),t.updateAddress=s("address")((function(e,t){return"UpdateAddress"!==t.type?e:i(e,{address:o.FormValueFactory.createAddress(t.value,e.formData.address)})})),t.updateName=s("name")((function(e,t){return"UpdateName"!==t.type?e:i(e,{name:o.FormValueFactory.createName(t.value,e.formData.name)})})),t.updateCity=s("city")((function(e,t){return"UpdateCity"!==t.type?e:i(e,{city:o.FormValueFactory.createCity(t.value,e.formData.city)})})),t.updateCpfName=s("cpfName")((function(e,t){return"UpdateCpfName"!==t.type?e:i(e,{cpfName:o.FormValueFactory.createCpfName(t.value,e.formData.cpfName)})})),t.updateNonce=s("nonce")((function(e,t){return"UpdateNonce"!==t.type?e:i(e,{nonce:o.FormValueFactory.createNonce(t.value,t.creditCardIframeFields,e.formData.nonce)})})),t.updatePayPalNonce=s("nonce")((function(e,t){return"UpdatePayPalNonce"!==t.type?e:i(e,{payPalNonce:o.FormValueFactory.createPayPalNonce(t.value,t.email,e.formData.payPalNonce)})})),t.updateAdyenEncryptedCard=s("adyenEncryptedCard")((function(e,t){return"UpdateAdyenEncryptedCard"!==t.type?e:i(e,{adyenEncryptedCard:o.FormValueFactory.createAdyenEncryptedCard(t.value,e.formData.adyenEncryptedCard)})})),t.updateEncryptedCardForNetworkToken=s("encryptedCardForNetworkToken")((function(e,t){return"UpdateEncryptedCardForNetworkToken"!==t.type?e:i(e,{encryptedCardForNetworkToken:o.FormValueFactory.createEncryptedCardForNetworkToken(t.cardType,t.encryptedCard,e.formData.encryptedCardForNetworkToken)})})),t.updateBIN=s("bin")((function(e,t){return"UpdateBIN"!==t.type?e:i(e,{bin:o.FormValueFactory.createBIN(t.value,e.formData.bin)})})),t.updateBrowserInfo=s("browserInfo")((function(e,t){return"UpdateBrowserInfo"!==t.type?e:i(e,{browserInfo:o.FormValueFactory.createBrowserInfo(t.value,e.formData.browserInfo)})})),t.updateThreeDsData=s("threeDsData")((function(e,t){return"UpdateThreeDsData"!==t.type?e:i(e,{threeDsData:o.FormValueFactory.createThreeDsData(t.value)})})),t.updateAccountHolderName=s("accountHolderName")((function(e,t){return"UpdateAccountHolderName"!==t.type?e:i(e,{accountHolderName:o.FormValueFactory.createInput(t.value,e.formData.accountHolderName)})})),t.updateIBAN=s("iban")((function(e,t){return"UpdateIBAN"!==t.type?e:i(e,{iban:o.FormValueFactory.createIBAN(t.value,e.formData.iban)})})),t.updateMandateSigned=s("mandateSigned")((function(e,t){return"UpdateMandateSigned"!==t.type?e:i(e,{mandateSigned:o.FormValueFactory.createCheckbox(t.value,e.formData.mandateSigned)})})),t.updateTermsAndService=s("termsAndService")((function(e,t){return"UpdateTermsAndService"!==t.type?e:i(e,{termsAndService:o.FormValueFactory.createCheckbox(t.value,e.formData.termsAndService)})})),t.updateIdealBank=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(a,r){return t(e(a,r),r)}}))})(s("idealBankId")((function(e,t){return"UpdateIdealBank"!==t.type?e:i(e,{idealBankId:o.FormValueFactory.createIdealBankId(t.value.bankId,e.formData.idealBankId)})})),s("idealBankName")((function(e,t){return"UpdateIdealBank"!==t.type?e:i(e,{idealBankName:o.FormValueFactory.createIdealBankName(t.value.bankName,e.formData.idealBankName)})}))),t.PaymentMethodReducers=[t.updateCountryCode,t.updatePaymentMethod,t.updateZipCode,t.updateVat,t.updateCpf,t.updateCpfName,t.updateNonce,t.updateAdyenEncryptedCard,t.updateEncryptedCardForNetworkToken,t.updateBIN,t.updateBrowserInfo,t.updateThreeDsData,t.updateAccountHolderName,t.updateIBAN,t.updateMandateSigned,t.updateIdealBank,t.updateCity,t.updateAddress,t.updatePhone,t.updateName,t.updatePayPalNonce],t.TermsAndServiceReducers=[t.updateTermsAndService]})),define("modules/clean/react/payments/common/payments/state/store_creator",["require","exports","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/common/form_value_factory"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPaymentPricingState=function(e){return{countryCode:r.FormValueFactory.createCountryCode(e.countryCode).formattedValue,countryCodeLoading:void 0,hasCurrencyChanged:!1,hasTaxChangedWithinCountry:!1,loadingPrices:!1,recentLoadEvent:!1,requestToken:-1}},t.createPaymentPageState=function(e){return{paymentFormSpec:new a.PaymentFormSpec(e.serializedPaymentFormSpec),requestId:e.requestId,submitSeq:0,paypalEmail:""}},t.createPaymentFormData=function(e,t,a){var n=e.countryCode,o=e.userInfo,i=e.vat,s=t.paymentFormSpec.default_payment_method_for_country(n);return{city:r.FormValueFactory.createCity(""),phone:r.FormValueFactory.createPhone(""),name:r.FormValueFactory.createName(""),address:r.FormValueFactory.createAddress(""),paymentMethod:r.FormValueFactory.createPaymentMethod(s,n,t.paymentFormSpec),countryCode:r.FormValueFactory.createCountryCode(n),zipCode:r.FormValueFactory.createZipCode("",n,t.paymentFormSpec),vat:r.FormValueFactory.createVat(i||"",n),cpf:r.FormValueFactory.createCpf(""),cpfName:r.FormValueFactory.createCpfNamePrefill("","",o.displayName),nonce:r.FormValueFactory.createNonce(""),payPalNonce:r.FormValueFactory.createPayPalNonce("",""),adyenEncryptedCard:r.FormValueFactory.createAdyenEncryptedCard(""),encryptedCardForNetworkToken:r.FormValueFactory.createEncryptedCardForNetworkToken("",""),bin:r.FormValueFactory.createBIN(""),browserInfo:r.FormValueFactory.createBrowserInfo(""),threeDsData:r.FormValueFactory.createThreeDsData(""),accountHolderName:r.FormValueFactory.createInput(""),iban:r.FormValueFactory.createIBAN(""),mandateSigned:r.FormValueFactory.createCheckbox(!1),termsAndService:r.FormValueFactory.createCheckbox(!1),idealBankId:r.FormValueFactory.createIdealBankId(""),idealBankName:r.FormValueFactory.createIdealBankName("")}}})),define("modules/clean/react/payments/common/pricing/reducers/reducers",["require","exports","tslib","modules/clean/payments/skus/subscription_change_plan_set"],(function(e,t,a,r){"use strict";function n(e,t){if("PrepareToUpdateTransitions"!==t.type)return e;var r=a.__assign(a.__assign({},e.pricingState),{loadingPrices:!0,recentLoadEvent:!0});return a.__assign(a.__assign({},e),{pricingState:r})}function o(e,t){if("UpdateRecentLoadEventStatus"!==t.type)return e;var r=a.__assign(a.__assign({},e.pricingState),{recentLoadEvent:t.recentLoadEventStatus});return a.__assign(a.__assign({},e),{pricingState:r})}function i(e,t){if("UpdateTransitionsStart"!==t.type)return e;var r=a.__assign(a.__assign({},e.pricingState),{countryCodeLoading:e.formData.countryCode.formattedValue,loadingPrices:!0,recentLoadEvent:!0});return a.__assign(a.__assign({},e),{pricingState:r})}function s(e,t){if("UpdateTransitionsSuccess"!==t.type)return e;var n,o="N/A",i=!1,s=!1;if(t.subChangePlans&&(n=t.subChangePlans,e.pricingState.subChangePlans.plans.length>0)){var l=e.pricingState.subChangePlans.plans[0],u=n[0],c=l.tvm,d=u.tvm,p=c&&c.getCurrency(),m=d&&d.getCurrency();i=(o="N/A"===e.pricingState.originalCurrency?p:e.pricingState.originalCurrency)!==m;var f=l.nextBillingSummary.taxRate,y=f===u.nextBillingSummary.taxRate&&(0===f||p===m);s=e.pricingState.hasTaxChangedWithinCountry||!y,e.pricingState.countryCode!==e.pricingState.countryCodeLoading&&(s=!1)}var h=a.__assign(a.__assign({},e.pricingState),{countryCode:e.pricingState.countryCodeLoading,countryCodeLoading:void 0,hasCurrencyChanged:i,hasTaxChangedWithinCountry:s,loadingPrices:!1,originalCurrency:o,recentLoadEvent:!0,subChangePlans:new r.SubscriptionChangePlanSet(t.subChangePlans),baseSubChangePlans:new r.SubscriptionChangePlanSet(t.subChangePlans)});return a.__assign(a.__assign({},e),{pricingState:h})}Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionManagementReducers=[n,o,i,s],t.prepareToUpdateTransitions=n,t.updateRecentLoadEventStatus=o,t.updateTransitionsStart=i,t.updateTransitionsSuccess=s})),define("modules/clean/react/payments/pro/components/inputs/inputs",["require","exports","tslib","react","react-dom","classnames"],(function(e,t,a,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n),o=a.__importDefault(o);var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=o.default({input__label:!0,"input__label--before":Boolean(!this.props.labelAfterElement),"input__label--errormodal":Boolean(this.props.errorText)},this.props.className),t=this.props.containerClassName,a=r.default.createElement("label",{className:e,htmlFor:this.props.htmlFor},this.props.labelText),n=null;this.props.labelAfterElement&&(n=a,a=null);var i,s=null;this.props.secondaryLabel&&(s=r.default.createElement("label",{className:"input__label input__label--secondary",htmlFor:this.props.htmlFor},this.props.secondaryLabel)),this.props.errorText&&(i=this.props.errorText);var l=r.default.createElement("label",{className:"input__label--error",htmlFor:this.props.htmlFor},i);return r.default.createElement("div",{className:t},a,this.props.children,n,s,l)},t})(r.default.Component);t.LabeledInput=i;var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(n.default.findDOMNode(t.input))},t.onBlur=function(e){t.props.onBlur&&t.props.onBlur(n.default.findDOMNode(t.input))},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.default.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,a=t.name,n=t.autocomplete,s=t.className,l=t.disabled,u=t.labelText,c=t.secondaryLabel,d=t.errorText,p=t.hasError,m=t.value,f=t.maxLength,y=t.containerClassName,h=t.placeholder,g=this.props.type||"text",_=o.default({input__text:!0,"input__text--error":Boolean(d)||p},this.props.inputClassName);return r.default.createElement(i,{className:s,containerClassName:y,labelText:u,htmlFor:a,errorText:d,secondaryLabel:c},r.default.createElement("input",{className:_,type:g,autoComplete:n,placeholder:h,name:a,id:a,ref:function(t){e.input=t},value:m,disabled:l,onChange:this.onChange,onBlur:this.onBlur,maxLength:f}))},t})(r.default.Component);t.LabeledTextInput=s;var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheckboxChange=function(e){t.props.onClick&&("click"!==e.type&&"Enter"!==e.key&&13!==e.charCode||(t.props.onClick(n.default.findDOMNode(t.input)),e.preventDefault()))},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onClick){var e=n.default.findDOMNode(this.input),t=e.checked;t&&t!==this.props.checked&&this.props.onClick(e)}},t.prototype.render=function(){var e=this,t=this.props,a=t.name,n=t.className,s=t.containerClassName,l=t.disabled,u=t.labelText,c=t.labelClassName,d=t.errorText,p=t.checked,m=o.default({input__checkbox:!0,"input__checkbox--valid":p,"input__checkbox--disabled":Boolean(l)},n);return r.default.createElement(i,{containerClassName:s,className:c,errorText:d,htmlFor:a,labelAfterElement:!0,labelText:u},r.default.createElement("div",{"aria-labelledby":a,tabIndex:0,role:"checkbox",className:m,onClick:this.handleCheckboxChange,onKeyUp:this.handleCheckboxChange}),r.default.createElement("input",{tabIndex:-1,checked:p,disabled:l,id:a,name:a,ref:function(t){e.input=t},type:"checkbox"}))},t})(r.default.Component);t.LabeledCheckboxInput=l;var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRadioChange=function(e){t.props.disabled?e.stopPropagation():t.props.onClick&&("click"!==e.type&&"Enter"!==e.key&&13!==e.charCode||(t.props.onClick(e,t.props.name,t.props.value),e.preventDefault()))},t}return a.__extends(t,e),t.prototype.render=function(){var e,t=this.props,a=t.id,n=t.name,s=t.ariaLabel,l=t.disabled,u=t.value,c=t.checked,d=t.onChange,p=t.labelText,m=t.labelClassName,f=o.default({input__radio:!0,"input__radio--valid":Boolean(c),"input__radio--disabled":Boolean(l)},this.props.className),y=o.default(((e={})[this.props.containerClassName+"--valid"]=!!this.props.containerClassName&&Boolean(c),e),this.props.containerClassName);return r.default.createElement(i,{containerClassName:y,className:m,labelText:p,htmlFor:n,labelAfterElement:!0},r.default.createElement("div",{"aria-label":s||n,role:"radio",tabIndex:0,className:f,onClick:this.handleRadioChange,onKeyUp:this.handleRadioChange}),r.default.createElement("input",{id:a,tabIndex:-1,ref:"radio",type:"radio",name:n,value:u,checked:c,onChange:d,disabled:l}))},t})(r.default.Component);t.LabeledRadioInput=u;var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(n.default.findDOMNode(t.input))},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.default.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,a=t.name,n=t.className,s=t.containerClassName,l=t.labelClassName,u=t.labelText,c=t.errorText,d=o.default({input__select:!0},n);return r.default.createElement(i,{containerClassName:s,className:l,errorText:c,htmlFor:a,labelText:u},r.default.createElement("select",{className:d,id:a,name:a,onChange:this.onChange,value:this.props.value,ref:function(t){e.input=t}},this.props.children))},t})(r.default.Component);t.LabeledSelectInput=c;var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return r.default.createElement("div",{className:this.props.className},this.props.children,this.props.errors&&this.props.errors.map((function(e){return r.default.createElement("div",{className:e.className},r.default.createElement("label",{className:"input__label--error",htmlFor:e.name},e.text))})))},t})(r.default.Component);t.LabeledInputRow=d}));
//# sourceMappingURL=pkg-buy.min.js-vflaIsrc5.map