define(["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/analytics","modules/clean/react/payments/update_team_billing/update_team_store_creator","modules/clean/react/payments/update_team_billing/update_team_action_creator","modules/clean/react/payments/update_team_billing/reducers","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/checkout/components/payment_method_form/business_payment_method_form","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/unified_module/unified_payment_form","modules/clean/react/payments/unified_module/unified_actions/unified_store"],(function(e,t,n,i,s,a,r,o,m,d,l,c,u,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),s=n.__importDefault(s);var y=(r=n.__importStar(r)).TeamsWebActionsLogger,g=(function(e){function t(t){var n=e.call(this,t)||this;return n.calledOnSuccess=!1,n.prepareForSubmission=function(){return n.props.useUnifiedPayments?n.unifiedPaymentForm.prepareForSubmission():n.paymentMethodForm.prepareForSubmission()},n.onAccept=function(e){void 0===e&&(e=u.SubmitFormTriggerType.ButtonClick),e===u.SubmitFormTriggerType.ButtonClick&&y.log("update_billing_open_save_changes_click"),n.props.useUnifiedPayments&&n.unifiedPaymentForm?n.unifiedActions.submitBillingForm(n.prepareForSubmission,n.props.psd2AddressFields,n.unifiedPaymentForm.getCreditCardFrame().handle3DsMessage,e):n.billingActions.submitBillingForm(n.prepareForSubmission,n.props.psd2AddressFields,n.props.useUnifiedPayments?n.unifiedPaymentForm.getCreditCardFrame().handle3DsMessage:n.paymentMethodForm.getCreditCardFrame().handle3DsMessage,e)},n.saveUnifiedPaymentMethodForm=function(e){n.unifiedPaymentForm=e},n.savePaymentMethodForm=function(e){n.paymentMethodForm=e},n.store=o.createBillingStore(t,d.BillingReducer),n.state=n.store.getState(),n.store.subscribe((function(){var e=n.store.getState();e.pageState.submitSuccess||n.setState((function(t){return n.props.setSubmittingStatus(e.pageState.submitting),e})),e.pageState.submitSuccess&&!n.calledOnSuccess&&(n.props.onSuccess(),n.calledOnSuccess=!0)})),n}return n.__extends(t,e),Object.defineProperty(t.prototype,"actions",{get:function(){return this.props.useUnifiedPayments?f.bindUnifiedBillingActions(this.store):m.bindBillingActions(this.store)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unifiedActions",{get:function(){return f.bindUnifiedBillingActions(this.store)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"billingActions",{get:function(){return m.bindBillingActions(this.store)},enumerable:!0,configurable:!0}),t.prototype.onDismiss=function(){y.log("update_billing_open_cancel")},t.prototype.render=function(){var e,t=this.props,n=t.iframeUrl,r=t.countryList,o=this.state,m=o.formData,d=o.pageState;e=m.paymentMethod.rawValue===l.PaymentMethod.PayPal?i.default.createElement("div",{className:"payment-method-disclaimer","data-payment-method-id":"{payment_method.ID}"},a.intl.formatMessage({id:"hO6ljT",defaultMessage:"Youâ€™ll be redirected to PayPal to finish updating your billing information."})):null;var u=["payment-info-section"];if(this.props.useUnifiedPayments){var f={psd2AddressFields:this.props.psd2AddressFields};return i.default.createElement("div",{className:s.default(u)},i.default.createElement("div",{className:"payment-method-section grid__container"},i.default.createElement(p.UnifiedPaymentForm,{ref:this.saveUnifiedPaymentMethodForm,paymentSpec:d.paymentFormSpec,iframeUrl:n,countryList:r,formData:m,actions:this.actions,submitForm:this.onAccept,payment_experiments:f}),e))}return i.default.createElement("div",{className:s.default(u)},i.default.createElement("div",{className:"payment-method-section grid__container"},i.default.createElement(c.BusinessPaymentMethodForm,{paymentSpec:d.paymentFormSpec,iframeUrl:n,isTeam:!1,countryList:r,formData:m,actions:this.actions,ref:this.savePaymentMethodForm,paymentIsDown:!1,psd2AddressFields:this.props.psd2AddressFields,submitForm:this.onAccept}),e))},t})(i.default.Component);t.UpdateBillingModal=g}));
//# sourceMappingURL=update_billing_modal.min.js-vflpC4eSu.map